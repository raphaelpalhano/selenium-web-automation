(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"8bpB":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("PCNd"),a=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a]]}),e})(),c=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a,s],s]}),e})()},A6Nz:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("XNiG"),a=i("fXoL"),n=i("tk/3"),s=i("yJW+");let c=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t,this.risksChanges=new o.a}create(e){return this.http.post(this.environmentService.getAPI()+"/risco",e)}update(e,t){return this.http.put(this.environmentService.getAPI()+"/risco/"+e,t)}getById(e){return this.http.get(this.environmentService.getAPI()+"/risco/"+e)}delete(e){return this.http.delete(this.environmentService.getAPI()+"/risco/"+e)}getAllByDemandId(e){return this.http.get(this.environmentService.getAPI()+"/risco/demanda/"+e)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(n.b),a.Xb(s.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},BFR3:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("wd/R"),a=i("fXoL"),n=i("tk/3"),s=i("yJW+");let c=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}listFilteredPaginable(e,t,i,a,n){const s={page:String(e),size:String(t),sort:`${i},${a}`};n.periodoAtivo="false",n.dtInicioRecebimento&&(n.dtInicioRecebimento=o(n.dtInicioRecebimento).format("YYYY-MM-DD")),n.dtFimRecebimento&&(n.dtFimRecebimento=o(n.dtFimRecebimento).format("YYYY-MM-DD")),n.dtInicioEntrada&&(n.dtInicioEntrada=o(n.dtInicioEntrada).format("YYYY-MM-DD")),n.dtFimEntrada&&(n.dtFimEntrada=o(n.dtFimEntrada).format("YYYY-MM-DD")),n.dtInicioEntregaAcordada&&(n.dtInicioEntregaAcordada=o(n.dtInicioEntregaAcordada).format("YYYY-MM-DD")),n.dtFimEntregaAcordada&&(n.dtFimEntregaAcordada=o(n.dtFimEntregaAcordada).format("YYYY-MM-DD")),n.dtInicioComecoExecucao&&(n.dtInicioComecoExecucao=o(n.dtInicioComecoExecucao).format("YYYY-MM-DD")),n.dtFimComecoExecucao&&(n.dtFimComecoExecucao=o(n.dtFimComecoExecucao).format("YYYY-MM-DD")),n.dtInicioEntregaReal&&(n.dtInicioEntregaReal=o(n.dtInicioEntregaReal).format("YYYY-MM-DD")),n.dtFimEntregaReal&&(n.dtFimEntregaReal=o(n.dtFimEntregaReal).format("YYYY-MM-DD"));for(const o in n)null!=n[o]&&""!==n[o]&&(s[o]=n[o]);return this.http.get(this.environmentService.getAPI()+"/demandas/filtradas",{params:s})}create(e){return this.http.post(this.environmentService.getAPI()+"/demandas",e)}update(e,t){return t.demanda_id=e,this.http.put(`${this.environmentService.getAPI()}/demandas/${e}`,t)}getById(e){return this.http.get(`${this.environmentService.getAPI()}/demandas/${e}`)}getEtcmEtccIncurrido(e){return this.http.get(`${this.environmentService.getAPI()}/demandas/incurrido/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(n.b),a.Xb(s.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},DDQA:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o=function(e){return e.SIMPLE="SIMPLES",e.COMPLETE="NORMAL",e}({})},DeFO:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("PCNd"),a=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},imports:[[a.c,o.a]]}),e})(),c=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},imports:[[a.c,o.a,s],s]}),e})(),r=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a]]}),e})(),l=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a,r],r]}),e})(),d=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a,l,c]]}),e})(),u=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a,d,l],d]}),e})()},FKwj:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("PCNd"),a=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a]]}),e})(),c=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},imports:[[a.c,o.a,s],s]}),e})()},"JX+z":function(e,t,i){"use strict";i.d(t,"a",function(){return Jt});var o=i("0IaG"),a=i("e3yB"),n=i("fXoL"),s=i("TXJc"),c=i("ofXK"),r=i("VQGR"),l=i("Xgew"),d=i("z/S5"),u=i("+0xr"),m=i("1G5W"),b=i("STbY"),f=i("XNiG"),p=i("QLLi"),h=i("CW9h"),g=i("nAk8"),v=i("kh7C"),S=i("A6Nz"),w=i("Pu89"),T=i("XiUz"),y=i("bTqV"),E=i("NFeN"),N=i("Qu3c"),k=i("zoH9"),D=i("zGX+"),C=i("f0Cb"),I=i("ouhe");function R(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",10),n.bc("click",function(){return n.xc(e),n.fc().new.emit()}),n.Tb(1,"mat-icon"),n.Hc(2,"add_circle_outline"),n.Sb(),n.Hc(3," NOVO RISCO "),n.Sb()}}function B(e,t){1&e&&n.Ob(0,"th",27)}function M(e,t){if(1&e){const e=n.Ub();n.Tb(0,"td",28),n.Tb(1,"button",29),n.bc("click",function(i){n.xc(e);const o=t.$implicit;return n.fc(2).onContextMenu(i,o)}),n.Tb(2,"mat-icon"),n.Hc(3,"more_vert"),n.Sb(),n.Sb(),n.Sb()}}function F(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"#"),n.Sb())}function x(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.Sb()),2&e){const e=t.index;n.Bb(1),n.Jc(" ",e+1," ")}}function O(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Risco"),n.Sb())}function Y(e,t){if(1&e&&(n.Tb(0,"td",28),n.Tb(1,"div",30),n.Tb(2,"mat-icon",31),n.Hc(3," fiber_manual_record "),n.Sb(),n.Sb(),n.Sb()),2&e){const e=t.$implicit,i=n.fc(2);n.Bb(2),n.Cc("color",i.risksTypesService.getColorOfRisk(e.nivelRisco)),n.lc("matTooltip",i.risksTypesService.getDescriptionOfRisk(e.nivelRisco))}}function _(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Identificado"),n.Sb())}function H(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.gc(2,"date"),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",n.ic(2,1,e.dtIdentificado,"dd/MM/yy")," ")}}function A(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"T\xedtulo"),n.Sb())}function L(e,t){if(1&e&&(n.Tb(0,"td",28),n.Tb(1,"span",32),n.Hc(2),n.gc(3,"maxLength"),n.Sb(),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.lc("matTooltip",e.titulo),n.Bb(1),n.Jc(" ",n.ic(3,2,e.titulo,50)," ")}}function P(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Probabilidade"),n.Sb())}function q(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",e.probabilidade.valor," ")}}function U(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Impacto"),n.Sb())}function V(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",e.impacto.valor," ")}}function z(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Criticidade"),n.Sb())}function j(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",e.criticidade.valor," ")}}function $(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Identificador"),n.Sb())}function J(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",e.identificador.nome," ")}}function Q(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Limite"),n.Sb())}function G(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.gc(2,"date"),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",n.ic(2,1,e.dtLimite,"dd/MM/yy")," ")}}function X(e,t){1&e&&(n.Tb(0,"th",27),n.Hc(1,"Resolu\xe7\xe3o"),n.Sb())}function K(e,t){if(1&e&&(n.Tb(0,"td",28),n.Hc(1),n.gc(2,"date"),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",n.ic(2,1,e.dtResolucao,"dd/MM/yy")," ")}}function W(e,t){1&e&&n.Ob(0,"tr",33)}function Z(e,t){if(1&e){const e=n.Ub();n.Tb(0,"tr",34),n.bc("contextmenu",function(i){n.xc(e);const o=t.$implicit,a=n.fc(2);return a.allowsActions?a.onContextMenu(i,o):null}),n.Sb()}}function ee(e,t){if(1&e&&(n.Tb(0,"table",11),n.Rb(1,12),n.Fc(2,B,1,0,"th",13),n.Fc(3,M,4,0,"td",14),n.Qb(),n.Rb(4,15),n.Fc(5,F,2,0,"th",13),n.Fc(6,x,2,1,"td",14),n.Qb(),n.Rb(7,16),n.Fc(8,O,2,0,"th",13),n.Fc(9,Y,4,3,"td",14),n.Qb(),n.Rb(10,17),n.Fc(11,_,2,0,"th",13),n.Fc(12,H,3,4,"td",14),n.Qb(),n.Rb(13,18),n.Fc(14,A,2,0,"th",13),n.Fc(15,L,4,5,"td",14),n.Qb(),n.Rb(16,19),n.Fc(17,P,2,0,"th",13),n.Fc(18,q,2,1,"td",14),n.Qb(),n.Rb(19,20),n.Fc(20,U,2,0,"th",13),n.Fc(21,V,2,1,"td",14),n.Qb(),n.Rb(22,21),n.Fc(23,z,2,0,"th",13),n.Fc(24,j,2,1,"td",14),n.Qb(),n.Rb(25,22),n.Fc(26,$,2,0,"th",13),n.Fc(27,J,2,1,"td",14),n.Qb(),n.Rb(28,23),n.Fc(29,Q,2,0,"th",13),n.Fc(30,G,3,4,"td",14),n.Qb(),n.Rb(31,24),n.Fc(32,X,2,0,"th",13),n.Fc(33,K,3,4,"td",14),n.Qb(),n.Fc(34,W,1,0,"tr",25),n.Fc(35,Z,1,0,"tr",26),n.Sb()),2&e){const e=n.fc();n.lc("dataSource",e.dataSource),n.Bb(34),n.lc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),n.Bb(1),n.lc("matRowDefColumns",e.displayedColumns)}}function te(e,t){1&e&&n.Ob(0,"app-loading-spinner")}function ie(e,t){1&e&&n.Ob(0,"app-simple-message",35)}function oe(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",38),n.bc("click",function(){n.xc(e);const t=n.fc(2).item;return n.fc().edit.emit(t)}),n.Tb(1,"mat-icon"),n.Hc(2,"edit"),n.Sb(),n.Hc(3," Editar risco "),n.Sb()}}function ae(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",38),n.bc("click",function(){n.xc(e);const t=n.fc(2).item;return n.fc().confirmRemove(t)}),n.Tb(1,"mat-icon"),n.Hc(2,"delete_outline"),n.Sb(),n.Hc(3," Remover risco "),n.Sb()}}function ne(e,t){if(1&e){const e=n.Ub();n.Rb(0),n.Tb(1,"button",38),n.bc("click",function(){n.xc(e);const t=n.fc().item;return n.fc().view.emit(t)}),n.Tb(2,"mat-icon"),n.Hc(3,"remove_red_eye"),n.Sb(),n.Hc(4," Visualizar risco "),n.Sb(),n.Fc(5,oe,4,0,"button",36),n.Fc(6,ae,4,0,"button",36),n.Ob(7,"mat-divider"),n.Qb()}if(2&e){const e=n.fc().item,t=n.fc();n.Bb(5),n.lc("ngIf",t.showEditButton(e)),n.Bb(1),n.lc("ngIf",!e.dtResolucao)}}function se(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",38),n.bc("click",function(){return n.xc(e),n.fc(2).new.emit()}),n.Tb(1,"mat-icon"),n.Hc(2,"add_circle_outline"),n.Sb(),n.Hc(3," Novo risco "),n.Sb()}}function ce(e,t){1&e&&(n.Tb(0,"button",39),n.Hc(1," Nenhuma a\xe7\xe3o dispon\xedvel :/ "),n.Sb())}function re(e,t){if(1&e&&(n.Fc(0,ne,8,2,"ng-container",6),n.Fc(1,se,4,0,"button",36),n.Fc(2,ce,2,0,"button",37)),2&e){const e=t.item,i=n.fc();n.lc("ngIf",e),n.Bb(1),n.lc("ngIf",i.showNewButton()),n.Bb(1),n.lc("ngIf",!e&&!i.showNewButton())}}let le=(()=>{class e{constructor(e,t,i,o,a,s){this.messageService=e,this.loadingService=t,this.errorHandlerService=i,this.utilsService=o,this.risksService=a,this.risksTypesService=s,this.allowsActions=!0,this.view=new n.o,this.edit=new n.o,this.new=new n.o,this.displayedColumns=["actions","rowNumber","nivelRisco","dtIdentificado","titulo","probabilidade.valor","impacto.valor","criticidade.valor","identificador.nome","dtLimite","dtResolucao"],this.contextMenuPosition=new d.a,this.unsubscribeNotifier=new f.a}ngOnInit(){this.loadRisks()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onContextMenu(e,t){this.contextMenuPosition=this.utilsService.openContextMenu(e,this.contextMenu,{item:t})}loadRisks(){this.isLoading=!0,this.risksService.getAllByDemandId(this.demand.demanda_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.isLoading=!1,this.dataSource=new u.k(e)},()=>{this.isLoading=!1,this.messageService.snackMessage("Erro ao carregar riscos!","error"),this.dataSource=new u.k([])})}confirmRemove(e){this.messageService.swalMessage("Deseja realmente excluir o risco?","Uma vez feito isso n\xe3o ser\xe1 poss\xedvel desfazer.","question").then(t=>{t.value&&this.remove(e)})}remove(e){this.loadingService.show(),this.risksService.delete(e.risco_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Risco removido com sucesso!","success"),this.loadRisks(),this.risksService.risksChanges.next({action:l.a.DELETED,item:e})},e=>this.errorHandlerService.handleError(e,"Erro ao excluir lan\xe7amento no risco!")).add(()=>this.loadingService.hide())}showEditButton(e){const t=this.demand.status_demanda&&this.demand.status_demanda.status_demanda_id?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id;return t!==r.a.CANCELLED&&t!==r.a.DONE&&t!==r.a.DELIVERED&&!e.dtResolucao}showNewButton(){const e=this.demand.status_demanda&&this.demand.status_demanda.status_demanda_id?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id;return e!==r.a.CANCELLED&&e!==r.a.DONE&&e!==r.a.DELIVERED&&this.allowsActions}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(p.a),n.Nb(h.a),n.Nb(g.a),n.Nb(v.a),n.Nb(S.a),n.Nb(w.a))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-risks-list"]],viewQuery:function(e,t){if(1&e&&n.Lc(b.e,!0),2&e){let e;n.tc(e=n.cc())&&(t.contextMenu=e.first)}},inputs:{demand:"demand",allowsActions:"allowsActions"},outputs:{view:"view",edit:"edit",new:"new"},decls:12,vars:11,consts:[[3,"fxLayoutAlign"],["mat-button","","mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],[1,"table-count"],[1,"wrapper-table-scrolling",3,"contextmenu"],["mat-table","",3,"dataSource",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],[4,"ngIf"],["message","Nenhum lan\xe7amento de risco cadastrado.",4,"ngIf"],["contextMenu","matMenu"],["matMenuContent",""],["mat-button","","mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rowNumber"],["matColumnDef","nivelRisco"],["matColumnDef","dtIdentificado"],["matColumnDef","titulo"],["matColumnDef","probabilidade.valor"],["matColumnDef","impacto.valor"],["matColumnDef","criticidade.valor"],["matColumnDef","identificador.nome"],["matColumnDef","dtLimite"],["matColumnDef","dtResolucao"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"contextmenu",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["fxLayoutAlign","start center"],[3,"matTooltip"],[1,"font-weight-bold",3,"matTooltip"],["mat-header-row",""],["mat-row","",3,"contextmenu"],["message","Nenhum lan\xe7amento de risco cadastrado."],["mat-menu-item","",3,"click",4,"ngIf"],["class","button-break-line","disabled","","mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click"],["disabled","","mat-menu-item","",1,"button-break-line"]],template:function(e,t){if(1&e&&(n.Tb(0,"div",0),n.Fc(1,R,4,0,"button",1),n.Tb(2,"p",2),n.Hc(3),n.Sb(),n.Sb(),n.Tb(4,"div",3),n.bc("contextmenu",function(e){return t.allowsActions?t.onContextMenu(e):null}),n.Fc(5,ee,36,4,"table",4),n.Ob(6,"div",5),n.Fc(7,te,1,0,"app-loading-spinner",6),n.Fc(8,ie,1,0,"app-simple-message",7),n.Sb(),n.Tb(9,"mat-menu",null,8),n.Fc(11,re,3,3,"ng-template",9),n.Sb()),2&e){const e=n.uc(10);n.mc("fxLayoutAlign","",t.showNewButton()?"space-between":"end"," center my-2"),n.Bb(1),n.lc("ngIf",t.showNewButton()),n.Bb(2),n.Jc("Total de registros: ",t.dataSource?t.dataSource.data.length:0,""),n.Bb(2),n.lc("ngIf",!t.isLoading&&(null==t.dataSource?null:t.dataSource.data.length)>0),n.Bb(1),n.Cc("left",t.contextMenuPosition.x)("top",t.contextMenuPosition.y),n.lc("matMenuTriggerFor",e),n.Bb(1),n.lc("ngIf",t.isLoading),n.Bb(1),n.lc("ngIf",0==(null==t.dataSource?null:t.dataSource.data.length)&&!t.isLoading)}},directives:[T.a,c.l,b.e,b.a,b.b,y.b,E.a,u.j,u.c,u.e,u.b,u.g,u.i,u.d,u.a,N.a,u.f,u.h,k.a,D.a,b.c,C.a],pipes:[c.e,I.a],styles:[".wrapper-table-scrolling[_ngcontent-%COMP%]{max-height:200px}.wrapper-table-scrolling[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]}),e})();var de=function(e){return e.RISK="R",e.PROBLEM="P",e}({}),ue=function(e){return e.ACTION_PLAN="A",e.CONTINGENCY="C",e}({}),me=i("3Pt+"),be=i("wd/R"),fe=i("tk/3"),pe=i("yJW+");let he=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t,this.actionsPlansLoaded=new f.a,this.contingenciesLoaded=new f.a}create(e){return this.http.post(this.environmentService.getAPI()+"/planoacao",e)}update(e,t){return this.http.put(this.environmentService.getAPI()+"/planoacao/"+e,t)}getById(e){return this.http.get(this.environmentService.getAPI()+"/planoacao/"+e)}delete(e){return this.http.delete(this.environmentService.getAPI()+"/planoacao/"+e)}getAllByRiskIdAndType(e,t){return this.http.get(this.environmentService.getAPI()+"/planoacao/"+e+"/risco/"+t)}}return e.\u0275fac=function(t){return new(t||e)(n.Xb(fe.b),n.Xb(pe.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ge=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t,this.followUpsLoaded=new f.a}create(e){return this.http.post(this.environmentService.getAPI()+"/seguimento",e)}update(e,t){return this.http.put(`${this.environmentService.getAPI()}/seguimento/${e}`,t)}getById(e){return this.http.get(`${this.environmentService.getAPI()}/seguimento/${e}`)}delete(e){return this.http.delete(`${this.environmentService.getAPI()}/seguimento/${e}`)}getAllByRiskId(e){return this.http.get(`${this.environmentService.getAPI()}/seguimento/risco/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(n.Xb(fe.b),n.Xb(pe.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ve=i("PS72"),Se=i("wZkO"),we=i("kmnG"),Te=i("qFsG"),ye=i("DJTy"),Ee=i("RTbq"),Ne=i("QNEd"),ke=i("hfhr"),De=i("61Wy"),Ce=i("9Ovz");function Ie(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",10),n.bc("click",function(){return n.xc(e),n.fc().new.emit()}),n.Tb(1,"mat-icon"),n.Hc(2,"add_circle_outline"),n.Sb(),n.Hc(3),n.Sb()}if(2&e){const e=n.fc();n.Bb(3),n.Jc(" ",e.type==e.actionPlanFeatureType.ACTION_PLAN?"NOVO PLANO DE A\xc7\xc3O":"NOVA CONTING\xcaNCIA"," ")}}function Re(e,t){1&e&&n.Ob(0,"th",22)}function Be(e,t){if(1&e){const e=n.Ub();n.Tb(0,"td",23),n.Tb(1,"button",24),n.bc("click",function(i){n.xc(e);const o=t.$implicit;return n.fc(2).onContextMenu(i,o)}),n.Tb(2,"mat-icon"),n.Hc(3,"more_vert"),n.Sb(),n.Sb(),n.Sb()}}function Me(e,t){1&e&&(n.Tb(0,"th",22),n.Hc(1,"#"),n.Sb())}function Fe(e,t){if(1&e&&(n.Tb(0,"td",23),n.Hc(1),n.Sb()),2&e){const e=t.index;n.Bb(1),n.Jc(" ",e+1," ")}}function xe(e,t){1&e&&(n.Tb(0,"th",22),n.Hc(1,"A\xe7\xe3o"),n.Sb())}function Oe(e,t){if(1&e&&(n.Tb(0,"td",23),n.Tb(1,"span",25),n.Hc(2),n.gc(3,"maxLength"),n.Sb(),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.lc("matTooltip",e.acao),n.Bb(1),n.Jc(" ",n.ic(3,2,e.acao,50)," ")}}function Ye(e,t){1&e&&(n.Tb(0,"th",22),n.Hc(1,"Respons\xe1vel"),n.Sb())}function _e(e,t){if(1&e&&(n.Tb(0,"td",23),n.Hc(1),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",e.responsavel.nome," ")}}function He(e,t){1&e&&(n.Tb(0,"th",22),n.Hc(1,"Custo"),n.Sb())}function Ae(e,t){if(1&e&&(n.Tb(0,"td",23),n.Hc(1),n.gc(2,"decimalNumber"),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Ic(n.hc(2,1,e.custo))}}function Le(e,t){1&e&&(n.Tb(0,"th",22),n.Hc(1,"Eficaz"),n.Sb())}function Pe(e,t){if(1&e&&(n.Tb(0,"td",23),n.Hc(1),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Ic(!0===e.eficaz?"SIM":!1===e.eficaz?"N\xc3O":"-")}}function qe(e,t){1&e&&n.Ob(0,"tr",26)}function Ue(e,t){if(1&e){const e=n.Ub();n.Tb(0,"tr",27),n.bc("contextmenu",function(i){n.xc(e);const o=t.$implicit;return n.fc(2).onContextMenu(i,o)}),n.Sb()}}function Ve(e,t){if(1&e&&(n.Tb(0,"table",11),n.Rb(1,12),n.Fc(2,Re,1,0,"th",13),n.Fc(3,Be,4,0,"td",14),n.Qb(),n.Rb(4,15),n.Fc(5,Me,2,0,"th",13),n.Fc(6,Fe,2,1,"td",14),n.Qb(),n.Rb(7,16),n.Fc(8,xe,2,0,"th",13),n.Fc(9,Oe,4,5,"td",14),n.Qb(),n.Rb(10,17),n.Fc(11,Ye,2,0,"th",13),n.Fc(12,_e,2,1,"td",14),n.Qb(),n.Rb(13,18),n.Fc(14,He,2,0,"th",13),n.Fc(15,Ae,3,3,"td",14),n.Qb(),n.Rb(16,19),n.Fc(17,Le,2,0,"th",13),n.Fc(18,Pe,2,1,"td",14),n.Qb(),n.Fc(19,qe,1,0,"tr",20),n.Fc(20,Ue,1,0,"tr",21),n.Sb()),2&e){const e=n.fc();n.lc("dataSource",e.dataSource),n.Bb(19),n.lc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),n.Bb(1),n.lc("matRowDefColumns",e.displayedColumns)}}function ze(e,t){1&e&&n.Ob(0,"app-loading-spinner")}function je(e,t){if(1&e&&n.Ob(0,"app-simple-message",28),2&e){const e=n.fc();n.lc("message",e.getMessageNoItems())}}function $e(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",31),n.bc("click",function(){n.xc(e);const t=n.fc(2).item;return n.fc().edit.emit(t)}),n.Tb(1,"mat-icon"),n.Hc(2,"edit"),n.Sb(),n.Hc(3),n.Sb()}if(2&e){const e=n.fc(3);n.Bb(3),n.Jc(" ",e.type==e.actionPlanFeatureType.ACTION_PLAN?"Editar plano de a\xe7\xe3o":"Editar conting\xeancia"," ")}}function Je(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",31),n.bc("click",function(){n.xc(e);const t=n.fc(2).item;return n.fc().confirmRemove(t)}),n.Tb(1,"mat-icon"),n.Hc(2,"delete_outline"),n.Sb(),n.Hc(3),n.Sb()}if(2&e){const e=n.fc(3);n.Bb(3),n.Jc(" ",e.type==e.actionPlanFeatureType.ACTION_PLAN?"Remover plano de a\xe7\xe3o":"Remover conting\xeancia"," ")}}function Qe(e,t){if(1&e){const e=n.Ub();n.Rb(0),n.Tb(1,"button",31),n.bc("click",function(){n.xc(e);const t=n.fc().item;return n.fc().view.emit(t)}),n.Tb(2,"mat-icon"),n.Hc(3,"remove_red_eye"),n.Sb(),n.Hc(4),n.Sb(),n.Fc(5,$e,4,1,"button",29),n.Fc(6,Je,4,1,"button",29),n.Ob(7,"mat-divider"),n.Qb()}if(2&e){const e=n.fc(2);n.Bb(4),n.Jc(" ",e.type==e.actionPlanFeatureType.ACTION_PLAN?"Visualizar plano de a\xe7\xe3o":"Visualizar conting\xeancia"," "),n.Bb(1),n.lc("ngIf",e.showEditButton()),n.Bb(1),n.lc("ngIf",e.allowsDelete)}}function Ge(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",31),n.bc("click",function(){return n.xc(e),n.fc(2).new.emit()}),n.Tb(1,"mat-icon"),n.Hc(2,"add_circle_outline"),n.Sb(),n.Hc(3),n.Sb()}if(2&e){const e=n.fc(2);n.Bb(3),n.Jc(" ",e.type==e.actionPlanFeatureType.ACTION_PLAN?"Novo plano de a\xe7\xe3o":"Nova conting\xeancia"," ")}}function Xe(e,t){1&e&&(n.Tb(0,"button",32),n.Hc(1," Nenhuma a\xe7\xe3o dispon\xedvel :/ "),n.Sb())}function Ke(e,t){if(1&e&&(n.Fc(0,Qe,8,3,"ng-container",6),n.Fc(1,Ge,4,1,"button",29),n.Fc(2,Xe,2,0,"button",30)),2&e){const e=t.item,i=n.fc();n.lc("ngIf",e),n.Bb(1),n.lc("ngIf",i.showNewButton()),n.Bb(1),n.lc("ngIf",!e&&!i.showNewButton())}}let We=(()=>{class e{constructor(e,t,i,o,a){this.messageService=e,this.loadingService=t,this.errorHandlerService=i,this.utilsService=o,this.actionsPlansService=a,this.view=new n.o,this.edit=new n.o,this.new=new n.o,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsDelete=!0,this.displayedColumns=["actions","rowNumber","acao","responsavel.nome","custo","eficaz"],this.contextMenuPosition=new d.a,this.actionPlanFeatureType=ue,this.unsubscribeNotifier=new f.a}ngOnInit(){this.loadActionsPlans()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onContextMenu(e,t){this.contextMenuPosition=this.utilsService.openContextMenu(e,this.contextMenu,{item:t})}loadActionsPlans(){this.type===ue.ACTION_PLAN&&this.actionsPlansService.actionsPlansLoaded.next([]),this.type===ue.CONTINGENCY&&this.actionsPlansService.contingenciesLoaded.next([]),this.risk?(this.isLoading=!0,this.actionsPlansService.getAllByRiskIdAndType(this.type,this.risk.risco_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.type===ue.ACTION_PLAN&&this.actionsPlansService.actionsPlansLoaded.next(e),this.type===ue.CONTINGENCY&&this.actionsPlansService.contingenciesLoaded.next(e),this.isLoading=!1,this.dataSource=new u.k(e)},()=>{this.isLoading=!1,this.messageService.snackMessage("Erro ao carregar planos de a\xe7\xe3o!","error"),this.dataSource=new u.k([])})):this.dataSource=new u.k([])}confirmRemove(e){this.messageService.swalMessage("Deseja realmente excluir o plano de a\xe7\xe3o?","Uma vez feito isso n\xe3o ser\xe1 poss\xedvel desfazer.","question").then(t=>{t.value&&this.remove(e)})}remove(e){this.loadingService.show(),this.actionsPlansService.delete(e.plano_acao_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage(this.type===ue.CONTINGENCY?"Conting\xeancia removida com sucesso!":"Plano de a\xe7\xe3o removido com sucesso!","success"),this.loadActionsPlans()},e=>{this.errorHandlerService.handleError(e,this.type===ue.CONTINGENCY?"Erro ao excluir conting\xeancia!":"Erro ao excluir plano de a\xe7\xe3o!")}).add(()=>this.loadingService.hide())}getMessageNoItems(){return this.risk||this.type!==ue.CONTINGENCY?this.risk?this.allowsCreate||this.type!==ue.CONTINGENCY?this.allowsCreate||this.type!==ue.ACTION_PLAN?void 0:"Nenhum plano de a\xe7\xe3o cadastrado.":"Nenhuma conting\xeancia cadastrada.":"Ainda n\xe3o \xe9 poss\xedvel criar um plano de a\xe7\xe3o. Salve o risco primeiro :)":"Ainda n\xe3o \xe9 poss\xedvel criar uma conting\xeancia. Salve o risco primeiro :)"}showEditButton(){return this.allowsEdit&&this.risk}showNewButton(){return this.allowsCreate&&this.risk}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(p.a),n.Nb(h.a),n.Nb(g.a),n.Nb(v.a),n.Nb(he))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-actions-plans-list"]],viewQuery:function(e,t){if(1&e&&n.Lc(b.e,!0),2&e){let e;n.tc(e=n.cc())&&(t.contextMenu=e.first)}},inputs:{allowsCreate:"allowsCreate",allowsEdit:"allowsEdit",allowsDelete:"allowsDelete",risk:"risk",type:"type"},outputs:{view:"view",edit:"edit",new:"new"},decls:12,vars:11,consts:[[3,"fxLayoutAlign"],["mat-button","","mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],[1,"table-count"],[1,"wrapper-table-scrolling",3,"contextmenu"],["mat-table","",3,"dataSource",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],[4,"ngIf"],[3,"message",4,"ngIf"],["contextMenu","matMenu"],["matMenuContent",""],["mat-button","","mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rowNumber"],["matColumnDef","acao"],["matColumnDef","responsavel.nome"],["matColumnDef","custo"],["matColumnDef","eficaz"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"contextmenu",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],[1,"font-weight-bold",3,"matTooltip"],["mat-header-row",""],["mat-row","",3,"contextmenu"],[3,"message"],["mat-menu-item","",3,"click",4,"ngIf"],["class","button-break-line","disabled","","mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click"],["disabled","","mat-menu-item","",1,"button-break-line"]],template:function(e,t){if(1&e&&(n.Tb(0,"div",0),n.Fc(1,Ie,4,1,"button",1),n.Tb(2,"p",2),n.Hc(3),n.Sb(),n.Sb(),n.Tb(4,"div",3),n.bc("contextmenu",function(e){return t.onContextMenu(e)}),n.Fc(5,Ve,21,4,"table",4),n.Ob(6,"div",5),n.Fc(7,ze,1,0,"app-loading-spinner",6),n.Fc(8,je,1,1,"app-simple-message",7),n.Sb(),n.Tb(9,"mat-menu",null,8),n.Fc(11,Ke,3,3,"ng-template",9),n.Sb()),2&e){const e=n.uc(10);n.mc("fxLayoutAlign","",t.showNewButton()?"space-between":"end"," center my-2"),n.Bb(1),n.lc("ngIf",t.showNewButton()),n.Bb(2),n.Jc("Total de registros: ",t.dataSource?t.dataSource.data.length:0,""),n.Bb(2),n.lc("ngIf",!t.isLoading&&(null==t.dataSource?null:t.dataSource.data.length)>0),n.Bb(1),n.Cc("left",t.contextMenuPosition.x)("top",t.contextMenuPosition.y),n.lc("matMenuTriggerFor",e),n.Bb(1),n.lc("ngIf",t.isLoading),n.Bb(1),n.lc("ngIf",0==(null==t.dataSource?null:t.dataSource.data.length))}},directives:[T.a,c.l,b.e,b.a,b.b,y.b,E.a,u.j,u.c,u.e,u.b,u.g,u.i,u.d,u.a,N.a,u.f,u.h,k.a,D.a,b.c,C.a],pipes:[I.a,Ce.a],styles:[""]}),e})();var Ze=i("/LKV"),et=i("TT0I"),tt=i("jySS"),it=i("Xwk/");const ot=function(){return{prefix:"",thousands:".",decimal:","}};let at=(()=>{class e{constructor(e,t,i,o,a,s,c){this.formBuilder=e,this.messageService=t,this.loadingService=i,this.errorHandlerService=o,this.utilsService=a,this.actionsPlansService=s,this.loggedUserService=c,this.saveEvent=new n.o,this.backEvent=new n.o,this.unsubscribeNotifier=new f.a}ngOnInit(){}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}ngOnChanges(){this.createForm(),this.item&&this.getItem()}createForm(){this.form=this.formBuilder.group({risco:this.formBuilder.group({risco_id:[this.risk.risco_id,[me.t.required]]}),acao:[null,[me.t.required,me.t.maxLength(100)]],responsavel:this.formBuilder.group({pessoa_id:[this.loggedUserService.isTechnical()?Number(this.loggedUserService.getPersonId()):null,[me.t.required]]}),tipo:[this.type,[me.t.required]],custo:[null,[me.t.required]],eficaz:[null],ativo:[!0]}),this.formEnabled||this.form.disable()}getItem(){this.loadingService.show(),this.actionsPlansService.getById(this.item.plano_acao_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.form.setValue({risco:{risco_id:e.risco.risco_id},acao:e.acao,tipo:e.tipo,responsavel:{pessoa_id:e.responsavel.pessoa_id},custo:e.custo,eficaz:e.eficaz,ativo:e.ativo})},()=>{this.messageService.snackMessage(this.type===ue.CONTINGENCY?"Erro ao visualizar conting\xeancia!":"Erro ao visualizar plano de a\xe7\xe3o!","error")}).add(()=>this.loadingService.hide())}save(){this.utilsService.validForm(this.form)&&(this.item?this.update():this.create())}create(){this.loadingService.show(),this.actionsPlansService.create(this.form.value).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.messageService.snackMessage(this.type===ue.CONTINGENCY?"Conting\xeancia lan\xe7ada com sucesso!":"Plano de a\xe7\xe3o lan\xe7ado com sucesso!","success"),this.saveEvent.emit({action:l.a.CREATED,item:e})},e=>{this.errorHandlerService.handleError(e,this.type===ue.CONTINGENCY?"N\xe3o foi poss\xedvel salvar conting\xeancia!":"N\xe3o foi poss\xedvel salvar plano de a\xe7\xe3o!")}).add(()=>this.loadingService.hide())}update(){const e=Object.assign({},this.form.value);e.plano_acao_id=this.item.plano_acao_id,this.loadingService.show(),this.actionsPlansService.update(this.item.plano_acao_id,e).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.messageService.snackMessage(this.type===ue.CONTINGENCY?"Conting\xeancia atualizada com sucesso!":"Plano de a\xe7\xe3o atualizado com sucesso!","success"),this.saveEvent.emit({action:l.a.UPDATED,item:e})},e=>{this.errorHandlerService.handleError(e,this.type===ue.CONTINGENCY?"N\xe3o foi poss\xedvel atualizar a conting\xeancia!":"N\xe3o foi poss\xedvel atualizar o plano de a\xe7\xe3o!")}).add(()=>this.loadingService.hide())}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(me.d),n.Nb(p.a),n.Nb(h.a),n.Nb(g.a),n.Nb(v.a),n.Nb(he),n.Nb(ve.a))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-actions-plans-form"]],inputs:{item:"item",formEnabled:"formEnabled",risk:"risk",demand:"demand",type:"type"},outputs:{saveEvent:"saveEvent",backEvent:"backEvent"},features:[n.zb],decls:22,vars:10,consts:[[3,"formGroup"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["appearance","outline","color","primary"],["matInput","","formControlName","acao","appTrim",""],[3,"control"],[1,"col-lg-6"],["valueType","people","label","Respons\xe1vel implanta\xe7\xe3o",3,"control","idSquad","formEnabled"],[1,"col-lg-3"],["matInput","","formControlName","custo","currencyMask","",3,"options"],["label","Eficaz",3,"control"],["backButtonLabel","FECHAR",3,"showSaveButton","saveEvent","backEvent"]],template:function(e,t){1&e&&(n.Tb(0,"form",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"mat-form-field",4),n.Tb(5,"mat-label"),n.Hc(6,"A\xe7\xe3o"),n.Sb(),n.Ob(7,"input",5),n.Tb(8,"mat-error"),n.Ob(9,"app-input-errors",6),n.Sb(),n.Sb(),n.Sb(),n.Tb(10,"div",7),n.Ob(11,"app-select-allocation-dev-by-squad",8),n.Sb(),n.Tb(12,"div",9),n.Tb(13,"mat-form-field",4),n.Tb(14,"mat-label"),n.Hc(15,"Custo"),n.Sb(),n.Ob(16,"input",10),n.Tb(17,"mat-error"),n.Ob(18,"app-input-errors",6),n.Sb(),n.Sb(),n.Sb(),n.Tb(19,"div",9),n.Ob(20,"app-select-yes-no",11),n.Sb(),n.Sb(),n.Tb(21,"app-footer-form-buttons",12),n.bc("saveEvent",function(){return t.save()})("backEvent",function(){return t.backEvent.emit()}),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.lc("formGroup",t.form),n.Bb(9),n.lc("control",t.form.get("acao")),n.Bb(2),n.lc("control",t.form.get("responsavel").get("pessoa_id"))("idSquad",null!=t.demand&&null!=t.demand.alocacao&&null!=t.demand.alocacao.squad&&t.demand.alocacao.squad.squad_id?t.demand.alocacao.squad.squad_id:null!=t.demand.squad&&t.demand.squad.squad_id?t.demand.squad.squad_id:t.demand.squad_id)("formEnabled",t.formEnabled),n.Bb(5),n.lc("options",n.nc(9,ot)),n.Bb(2),n.lc("control",t.form.get("custo")),n.Bb(2),n.lc("control",t.form.get("eficaz")),n.Bb(1),n.lc("showSaveButton",t.formEnabled))},directives:[me.u,me.p,me.h,we.c,we.f,Te.b,me.c,me.o,me.g,ye.a,we.b,Ee.a,Ze.a,et.a,tt.a,it.a],styles:[""]}),e})();function nt(e,t){if(1&e){const e=n.Ub();n.Tb(0,"app-actions-plans-list",2),n.bc("new",function(){return n.xc(e),n.fc().create()})("view",function(t){return n.xc(e),n.fc().view(t)})("edit",function(t){return n.xc(e),n.fc().edit(t)}),n.Sb()}if(2&e){const e=n.fc();n.lc("risk",e.risk)("type",e.type)("allowsCreate",e.allowsCreate)("allowsEdit",e.allowsEdit)("allowsDelete",e.allowsDelete)}}function st(e,t){if(1&e){const e=n.Ub();n.Tb(0,"app-actions-plans-form",3),n.bc("backEvent",function(){return n.xc(e),n.fc().back()})("saveEvent",function(){return n.xc(e),n.fc().back()}),n.Sb()}if(2&e){const e=n.fc();n.lc("risk",e.risk)("demand",e.demand)("item",e.item)("formEnabled",e.formEnabled)("type",e.type)}}let ct=(()=>{class e extends a.a{constructor(){super(),this.allowsCreate=!0,this.allowsEdit=!0,this.allowsDelete=!0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["app-actions-plans"]],inputs:{risk:"risk",demand:"demand",type:"type",allowsCreate:"allowsCreate",allowsEdit:"allowsEdit",allowsDelete:"allowsDelete"},features:[n.yb],decls:2,vars:2,consts:[[3,"risk","type","allowsCreate","allowsEdit","allowsDelete","new","view","edit",4,"ngIf"],[3,"risk","demand","item","formEnabled","type","backEvent","saveEvent",4,"ngIf"],[3,"risk","type","allowsCreate","allowsEdit","allowsDelete","new","view","edit"],[3,"risk","demand","item","formEnabled","type","backEvent","saveEvent"]],template:function(e,t){1&e&&(n.Fc(0,nt,1,5,"app-actions-plans-list",0),n.Fc(1,st,1,5,"app-actions-plans-form",1)),2&e&&(n.lc("ngIf",t.showList),n.Bb(1),n.lc("ngIf",!t.showList))},directives:[c.l,We,at],styles:[""]}),e})();function rt(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",10),n.bc("click",function(){return n.xc(e),n.fc().new.emit()}),n.Tb(1,"mat-icon"),n.Hc(2,"add_circle_outline"),n.Sb(),n.Hc(3," NOVO SEGUIMENTO "),n.Sb()}}function lt(e,t){1&e&&n.Ob(0,"th",24)}function dt(e,t){if(1&e){const e=n.Ub();n.Tb(0,"td",25),n.Tb(1,"button",26),n.bc("click",function(i){n.xc(e);const o=t.$implicit;return n.fc(2).onContextMenu(i,o)}),n.Tb(2,"mat-icon"),n.Hc(3,"more_vert"),n.Sb(),n.Sb(),n.Sb()}}function ut(e,t){1&e&&(n.Tb(0,"th",24),n.Hc(1,"#"),n.Sb())}function mt(e,t){if(1&e&&(n.Tb(0,"td",25),n.Hc(1),n.Sb()),2&e){const e=t.index;n.Bb(1),n.Jc(" ",e+1," ")}}function bt(e,t){1&e&&(n.Tb(0,"th",24),n.Hc(1,"Registro"),n.Sb())}function ft(e,t){if(1&e&&(n.Tb(0,"td",27),n.Hc(1),n.gc(2,"date"),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",n.ic(2,1,e.dtRegistro,"dd/MM/yy")," ")}}function pt(e,t){1&e&&(n.Tb(0,"th",24),n.Hc(1,"A\xe7\xe3o"),n.Sb())}function ht(e,t){if(1&e&&(n.Tb(0,"td",25),n.Tb(1,"span",28),n.Hc(2),n.gc(3,"maxLength"),n.Sb(),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.lc("matTooltip",e.acao),n.Bb(1),n.Jc(" ",n.ic(3,2,e.acao,50)," ")}}function gt(e,t){1&e&&(n.Tb(0,"th",24),n.Hc(1,"Respons\xe1vel"),n.Sb())}function vt(e,t){if(1&e&&(n.Tb(0,"td",25),n.Hc(1),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Jc(" ",e.responsavel.nome," ")}}function St(e,t){1&e&&(n.Tb(0,"th",24),n.Hc(1,"Resultado"),n.Sb())}function wt(e,t){if(1&e&&(n.Tb(0,"td",25),n.Tb(1,"span",28),n.Hc(2),n.gc(3,"maxLength"),n.Sb(),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.lc("matTooltip",e.resultado),n.Bb(1),n.Jc(" ",n.ic(3,2,e.resultado,50)," ")}}function Tt(e,t){1&e&&(n.Tb(0,"th",24),n.Hc(1,"Custo"),n.Sb())}function yt(e,t){if(1&e&&(n.Tb(0,"td",25),n.Hc(1),n.gc(2,"decimalNumber"),n.Sb()),2&e){const e=t.$implicit;n.Bb(1),n.Ic(n.hc(2,1,e.custo))}}function Et(e,t){1&e&&n.Ob(0,"tr",29)}function Nt(e,t){if(1&e){const e=n.Ub();n.Tb(0,"tr",30),n.bc("contextmenu",function(i){n.xc(e);const o=t.$implicit;return n.fc(2).onContextMenu(i,o)}),n.Sb()}}function kt(e,t){if(1&e&&(n.Tb(0,"table",11),n.Rb(1,12),n.Fc(2,lt,1,0,"th",13),n.Fc(3,dt,4,0,"td",14),n.Qb(),n.Rb(4,15),n.Fc(5,ut,2,0,"th",13),n.Fc(6,mt,2,1,"td",14),n.Qb(),n.Rb(7,16),n.Fc(8,bt,2,0,"th",13),n.Fc(9,ft,3,4,"td",17),n.Qb(),n.Rb(10,18),n.Fc(11,pt,2,0,"th",13),n.Fc(12,ht,4,5,"td",14),n.Qb(),n.Rb(13,19),n.Fc(14,gt,2,0,"th",13),n.Fc(15,vt,2,1,"td",14),n.Qb(),n.Rb(16,20),n.Fc(17,St,2,0,"th",13),n.Fc(18,wt,4,5,"td",14),n.Qb(),n.Rb(19,21),n.Fc(20,Tt,2,0,"th",13),n.Fc(21,yt,3,3,"td",14),n.Qb(),n.Fc(22,Et,1,0,"tr",22),n.Fc(23,Nt,1,0,"tr",23),n.Sb()),2&e){const e=n.fc();n.lc("dataSource",e.dataSource),n.Bb(22),n.lc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),n.Bb(1),n.lc("matRowDefColumns",e.displayedColumns)}}function Dt(e,t){1&e&&n.Ob(0,"app-loading-spinner")}function Ct(e,t){if(1&e&&n.Ob(0,"app-simple-message",31),2&e){const e=n.fc();n.lc("message",e.getMessageNoItem())}}function It(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",34),n.bc("click",function(){n.xc(e);const t=n.fc(2).item;return n.fc().edit.emit(t)}),n.Tb(1,"mat-icon"),n.Hc(2,"edit"),n.Sb(),n.Hc(3," Editar seguimento "),n.Sb()}}function Rt(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",34),n.bc("click",function(){n.xc(e);const t=n.fc(2).item;return n.fc().confirmRemove(t)}),n.Tb(1,"mat-icon"),n.Hc(2,"delete_outline"),n.Sb(),n.Hc(3," Remover seguimento "),n.Sb()}}function Bt(e,t){if(1&e){const e=n.Ub();n.Rb(0),n.Tb(1,"button",34),n.bc("click",function(){n.xc(e);const t=n.fc().item;return n.fc().view.emit(t)}),n.Tb(2,"mat-icon"),n.Hc(3,"remove_red_eye"),n.Sb(),n.Hc(4," Visualizar seguimento "),n.Sb(),n.Fc(5,It,4,0,"button",32),n.Fc(6,Rt,4,0,"button",32),n.Ob(7,"mat-divider"),n.Qb()}if(2&e){const e=n.fc(2);n.Bb(5),n.lc("ngIf",e.showEditButton()),n.Bb(1),n.lc("ngIf",e.allowsDelete)}}function Mt(e,t){if(1&e){const e=n.Ub();n.Tb(0,"button",34),n.bc("click",function(){return n.xc(e),n.fc(2).new.emit()}),n.Tb(1,"mat-icon"),n.Hc(2,"add_circle_outline"),n.Sb(),n.Hc(3," Novo seguimento "),n.Sb()}}function Ft(e,t){1&e&&(n.Tb(0,"button",35),n.Hc(1," Nenhuma a\xe7\xe3o dispon\xedvel :/ "),n.Sb())}function xt(e,t){if(1&e&&(n.Fc(0,Bt,8,2,"ng-container",6),n.Fc(1,Mt,4,0,"button",32),n.Fc(2,Ft,2,0,"button",33)),2&e){const e=t.item,i=n.fc();n.lc("ngIf",e),n.Bb(1),n.lc("ngIf",i.showNewButton()),n.Bb(1),n.lc("ngIf",!e&&!i.showNewButton())}}let Ot=(()=>{class e{constructor(e,t,i,o,a){this.messageService=e,this.loadingService=t,this.errorHandlerService=i,this.utilsService=o,this.followUpsService=a,this.view=new n.o,this.edit=new n.o,this.new=new n.o,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsDelete=!0,this.displayedColumns=["actions","rowNumber","dtRegistro","acao","resultado","responsavel.nome","custo"],this.contextMenuPosition=new d.a,this.unsubscribeNotifier=new f.a}ngOnInit(){this.loadFollowUps()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onContextMenu(e,t){this.contextMenuPosition=this.utilsService.openContextMenu(e,this.contextMenu,{item:t})}loadFollowUps(){this.followUpsService.followUpsLoaded.next([]),this.risk?(this.isLoading=!0,this.followUpsService.getAllByRiskId(this.risk.risco_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.followUpsService.followUpsLoaded.next(e),this.isLoading=!1,this.dataSource=new u.k(e)},()=>{this.isLoading=!1,this.messageService.snackMessage("Erro ao carregar seguimentos!","error"),this.dataSource=new u.k([])})):this.dataSource=new u.k([])}confirmRemove(e){this.messageService.swalMessage("Deseja realmente excluir o seguimento?","Uma vez feito isso n\xe3o ser\xe1 poss\xedvel desfazer.","question").then(t=>{t.value&&this.remove(e)})}remove(e){this.loadingService.show(),this.followUpsService.delete(e.seguimento_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Seguimento removido com sucesso!","success"),this.loadFollowUps()},e=>this.errorHandlerService.handleError(e,"Erro ao excluir seguimento!")).add(()=>this.loadingService.hide())}getMessageNoItem(){return this.risk?"Nenhum seguimento cadastrado.":"Ainda n\xe3o \xe9 poss\xedvel criar um seguimento."}showEditButton(){return this.allowsEdit&&this.risk}showNewButton(){return this.allowsCreate&&this.risk}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(p.a),n.Nb(h.a),n.Nb(g.a),n.Nb(v.a),n.Nb(ge))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-follow-ups-list"]],viewQuery:function(e,t){if(1&e&&n.Lc(b.e,!0),2&e){let e;n.tc(e=n.cc())&&(t.contextMenu=e.first)}},inputs:{allowsCreate:"allowsCreate",allowsEdit:"allowsEdit",allowsDelete:"allowsDelete",risk:"risk"},outputs:{view:"view",edit:"edit",new:"new"},decls:12,vars:11,consts:[[3,"fxLayoutAlign"],["mat-button","","mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],[1,"table-count"],[1,"wrapper-table-scrolling",3,"contextmenu"],["mat-table","",3,"dataSource",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],[4,"ngIf"],[3,"message",4,"ngIf"],["contextMenu","matMenu"],["matMenuContent",""],["mat-button","","mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rowNumber"],["matColumnDef","dtRegistro"],["mat-cell","","class","font-weight-bold",4,"matCellDef"],["matColumnDef","acao"],["matColumnDef","responsavel.nome"],["matColumnDef","resultado"],["matColumnDef","custo"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"contextmenu",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-cell","",1,"font-weight-bold"],[3,"matTooltip"],["mat-header-row",""],["mat-row","",3,"contextmenu"],[3,"message"],["mat-menu-item","",3,"click",4,"ngIf"],["class","button-break-line","disabled","","mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click"],["disabled","","mat-menu-item","",1,"button-break-line"]],template:function(e,t){if(1&e&&(n.Tb(0,"div",0),n.Fc(1,rt,4,0,"button",1),n.Tb(2,"p",2),n.Hc(3),n.Sb(),n.Sb(),n.Tb(4,"div",3),n.bc("contextmenu",function(e){return t.onContextMenu(e)}),n.Fc(5,kt,24,4,"table",4),n.Sb(),n.Ob(6,"div",5),n.Fc(7,Dt,1,0,"app-loading-spinner",6),n.Fc(8,Ct,1,1,"app-simple-message",7),n.Tb(9,"mat-menu",null,8),n.Fc(11,xt,3,3,"ng-template",9),n.Sb()),2&e){const e=n.uc(10);n.mc("fxLayoutAlign","",t.showNewButton()?"space-between":"end"," center my-2"),n.Bb(1),n.lc("ngIf",t.showNewButton()),n.Bb(2),n.Jc("Total de registros: ",t.dataSource?t.dataSource.data.length:0,""),n.Bb(2),n.lc("ngIf",!t.isLoading&&(null==t.dataSource?null:t.dataSource.data.length)>0),n.Bb(1),n.Cc("left",t.contextMenuPosition.x)("top",t.contextMenuPosition.y),n.lc("matMenuTriggerFor",e),n.Bb(1),n.lc("ngIf",t.isLoading),n.Bb(1),n.lc("ngIf",0==(null==t.dataSource?null:t.dataSource.data.length)&&!t.isLoading)}},directives:[T.a,c.l,b.e,b.a,b.b,y.b,E.a,u.j,u.c,u.e,u.b,u.g,u.i,u.d,u.a,N.a,u.f,u.h,k.a,D.a,b.c,C.a],pipes:[c.e,I.a,Ce.a],styles:[""]}),e})();const Yt=function(){return{prefix:"",thousands:".",decimal:","}};let _t=(()=>{class e{constructor(e,t,i,o,a,s,c){this.formBuilder=e,this.messageService=t,this.loadingService=i,this.errorHandlerService=o,this.utilsService=a,this.followUpsService=s,this.loggedUserService=c,this.saveEvent=new n.o,this.backEvent=new n.o,this.today=be().format("YYYY-MM-DD"),this.unsubscribeNotifier=new f.a}ngOnInit(){}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}ngOnChanges(){this.createForm(),this.item&&this.getItem()}createForm(){this.form=this.formBuilder.group({risco:this.formBuilder.group({risco_id:[this.risk.risco_id,[me.t.required]]}),tipo:[this.type,[me.t.required]],acao:[null,[me.t.required]],resultado:[null,[me.t.required]],responsavel:this.formBuilder.group({pessoa_id:[this.loggedUserService.isTechnical()?Number(this.loggedUserService.getPersonId()):null,[me.t.required]]}),custo:[null,[me.t.required]],dtRegistro:[this.today,[me.t.required]],ativo:[!0]}),this.formEnabled||this.form.disable()}getItem(){this.loadingService.show(),this.followUpsService.getById(this.item.seguimento_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>this.form.setValue({risco:{risco_id:e.risco.risco_id},tipo:e.tipo,acao:e.acao,responsavel:{pessoa_id:e.responsavel.pessoa_id},custo:e.custo,ativo:e.ativo,resultado:e.resultado,dtRegistro:e.dtRegistro}),()=>this.messageService.snackMessage("Erro ao visualizar seguimento!","error")).add(()=>this.loadingService.hide())}save(){this.utilsService.validForm(this.form)&&(this.item?this.update():this.create())}create(){this.loadingService.show(),this.followUpsService.create(this.form.value).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.messageService.snackMessage("Seguimento lan\xe7ado com sucesso!","success"),this.saveEvent.emit({action:l.a.CREATED,item:e})},e=>this.errorHandlerService.handleError(e,"N\xe3o foi poss\xedvel salvar seguimento!")).add(()=>this.loadingService.hide())}update(){const e=Object.assign({},this.form.value);e.seguimento_id=this.item.seguimento_id,this.loadingService.show(),this.followUpsService.update(this.item.seguimento_id,e).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.messageService.snackMessage("Seguimento atualizado com sucesso!","success"),this.saveEvent.emit({action:l.a.UPDATED,item:e})},e=>this.errorHandlerService.handleError(e,"N\xe3o foi poss\xedvel atualizar o seguimento!")).add(()=>this.loadingService.hide())}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(me.d),n.Nb(p.a),n.Nb(h.a),n.Nb(g.a),n.Nb(v.a),n.Nb(ge),n.Nb(ve.a))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-follow-ups-form"]],inputs:{item:"item",formEnabled:"formEnabled",risk:"risk",demand:"demand",type:"type"},outputs:{saveEvent:"saveEvent",backEvent:"backEvent"},features:[n.zb],decls:29,vars:12,consts:[[3,"formGroup"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["appearance","outline","color","primary"],["matInput","","formControlName","acao","appTrim",""],[3,"control"],[1,"col-lg-6"],["label","Respons\xe1vel implanta\xe7\xe3o",3,"control","idSquad"],[1,"col-lg-3"],["matInput","","formControlName","custo","currencyMask","",3,"options"],["label","Data do registro",3,"control","min","max"],["matInput","","formControlName","resultado","appTrim",""],["backButtonLabel","FECHAR",3,"showSaveButton","saveEvent","backEvent"]],template:function(e,t){1&e&&(n.Tb(0,"form",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"mat-form-field",4),n.Tb(5,"mat-label"),n.Hc(6,"A\xe7\xe3o"),n.Sb(),n.Ob(7,"input",5),n.Tb(8,"mat-error"),n.Ob(9,"app-input-errors",6),n.Sb(),n.Sb(),n.Sb(),n.Tb(10,"div",7),n.Ob(11,"app-select-allocation-dev-by-squad",8),n.Sb(),n.Tb(12,"div",9),n.Tb(13,"mat-form-field",4),n.Tb(14,"mat-label"),n.Hc(15,"Custo"),n.Sb(),n.Ob(16,"input",10),n.Tb(17,"mat-error"),n.Ob(18,"app-input-errors",6),n.Sb(),n.Sb(),n.Sb(),n.Tb(19,"div",9),n.Ob(20,"app-input-datepicker",11),n.Sb(),n.Tb(21,"div",3),n.Tb(22,"mat-form-field",4),n.Tb(23,"mat-label"),n.Hc(24,"Resultado"),n.Sb(),n.Ob(25,"input",12),n.Tb(26,"mat-error"),n.Ob(27,"app-input-errors",6),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(28,"app-footer-form-buttons",13),n.bc("saveEvent",function(){return t.save()})("backEvent",function(){return t.backEvent.emit()}),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.lc("formGroup",t.form),n.Bb(9),n.lc("control",t.form.get("acao")),n.Bb(2),n.lc("control",t.form.get("responsavel").get("pessoa_id"))("idSquad",null!=t.demand.squad&&t.demand.squad.squad_id?t.demand.squad.squad_id:t.demand.squad_id),n.Bb(5),n.lc("options",n.nc(11,Yt)),n.Bb(2),n.lc("control",t.form.get("custo")),n.Bb(2),n.lc("control",t.form.get("dtRegistro"))("min",t.risk.dtIdentificado)("max",t.today),n.Bb(7),n.lc("control",t.form.get("resultado")),n.Bb(1),n.lc("showSaveButton",t.formEnabled))},directives:[me.u,me.p,me.h,we.c,we.f,Te.b,me.c,me.o,me.g,ye.a,we.b,Ee.a,Ze.a,et.a,Ne.a,it.a],styles:[""]}),e})();function Ht(e,t){if(1&e){const e=n.Ub();n.Tb(0,"app-follow-ups-list",2),n.bc("new",function(){return n.xc(e),n.fc().create()})("view",function(t){return n.xc(e),n.fc().view(t)})("edit",function(t){return n.xc(e),n.fc().edit(t)}),n.Sb()}if(2&e){const e=n.fc();n.lc("risk",e.risk)("allowsCreate",e.allowsCreate)("allowsEdit",e.allowsEdit)("allowsDelete",e.allowsDelete)}}function At(e,t){if(1&e){const e=n.Ub();n.Tb(0,"app-follow-ups-form",3),n.bc("backEvent",function(){return n.xc(e),n.fc().back()})("saveEvent",function(){return n.xc(e),n.fc().back()}),n.Sb()}if(2&e){const e=n.fc();n.lc("risk",e.risk)("demand",e.demand)("item",e.item)("type",e.type)("formEnabled",e.formEnabled)}}let Lt=(()=>{class e extends a.a{constructor(){super(),this.allowsCreate=!0,this.allowsEdit=!0,this.allowsDelete=!0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["app-follow-ups"]],inputs:{risk:"risk",demand:"demand",type:"type",allowsCreate:"allowsCreate",allowsEdit:"allowsEdit",allowsDelete:"allowsDelete"},features:[n.yb],decls:2,vars:2,consts:[[3,"risk","allowsCreate","allowsEdit","allowsDelete","new","view","edit",4,"ngIf"],[3,"risk","demand","item","type","formEnabled","backEvent","saveEvent",4,"ngIf"],[3,"risk","allowsCreate","allowsEdit","allowsDelete","new","view","edit"],[3,"risk","demand","item","type","formEnabled","backEvent","saveEvent"]],template:function(e,t){1&e&&(n.Fc(0,Ht,1,4,"app-follow-ups-list",0),n.Fc(1,At,1,5,"app-follow-ups-form",1)),2&e&&(n.lc("ngIf",t.showList),n.Bb(1),n.lc("ngIf",!t.showList))},directives:[c.l,Ot,_t],styles:[""]}),e})();var Pt=i("azXh");function qt(e,t){if(1&e&&(n.Tb(0,"div",34),n.Ob(1,"app-select-risk",35),n.Sb()),2&e){const e=n.fc();n.Bb(1),n.lc("control",e.onlyRead.get("nivelRisco"))}}function Ut(e,t){if(1&e&&(n.Tb(0,"div",36),n.Ob(1,"app-select-intensity",37),n.Sb()),2&e){const e=n.fc();n.lc("formGroup",e.onlyRead),n.Bb(1),n.lc("control",e.form.get("criticidade").get("parametro_id"))("idLine",e.demand.linha_id)}}const Vt=function(){return{prefix:"",thousands:".",decimal:","}};let zt=(()=>{class e{constructor(e,t,i,o,a,s,c,r,l){this.formBuilder=e,this.messageService=t,this.loadingService=i,this.errorHandlerService=o,this.utilsService=a,this.risksService=s,this.actionsPlansService=c,this.followUpsService=r,this.loggedUserService=l,this.saveEvent=new n.o,this.backEvent=new n.o,this.actionPlanFeatureType=ue,this.followUpFeatureType=de,this.actionsPlans=[],this.followUps=[],this.contingencies=[],this.unsubscribeNotifier=new f.a,this.today=be().format("YYYY-MM-DD"),this.moment=be}ngOnInit(){}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}ngOnChanges(){this.createForm(),this.listenDtResolucaoControl(),this.listenActionsPlansLoaded(),this.listenContingenciesLoaded(),this.listenFollowUpsLoaded(),this.item&&this.getItem()}createForm(){this.form=this.formBuilder.group({demanda:this.formBuilder.group({demanda_id:[this.demand?this.demand.demanda_id:null,[me.t.required]]}),ativo:[!0],titulo:[null,[me.t.required,me.t.maxLength(100)]],dtIdentificado:[this.demand.sprint?this.today<be(this.demand.sprint.dtFim).format("YYYY-MM-DD")?this.today:be(this.demand.sprint.dtFim).format("YYYY-MM-DD"):this.today,[me.t.required]],consequencia:[null,[me.t.required]],ocorrencia:[null,[me.t.required]],finalidade:[null,[me.t.required]],identificador:this.formBuilder.group({pessoa_id:[this.loggedUserService.isTechnical()?Number(this.loggedUserService.getPersonId()):null,[me.t.required]]}),implantador:this.formBuilder.group({pessoa_id:[{value:null,disabled:!this.item}]}),probabilidade:this.formBuilder.group({parametro_id:[null,[me.t.required]]}),impacto:this.formBuilder.group({parametro_id:[null,[me.t.required]]}),dtResolucao:[{value:null,disabled:!this.item}],custo:[null],dtLimite:[null,[me.t.required]],descricaoPlanoAcao:[null],contingenciaDisparador:[null],contingenciaDescricao:[null]}),this.onlyRead=this.formBuilder.group({criticidade:this.formBuilder.group({parametro_id:[null]}),nivelRisco:[null]}),this.onlyRead.disable(),this.formEnabled||this.form.disable()}listenActionsPlansLoaded(){this.actionsPlansService.actionsPlansLoaded.pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>this.actionsPlans=e)}listenContingenciesLoaded(){this.actionsPlansService.contingenciesLoaded.pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.contingencies=e,0===this.contingencies.length?(this.form.get("contingenciaDisparador").markAsUntouched(),this.form.get("contingenciaDisparador").clearValidators(),this.form.get("contingenciaDescricao").markAsUntouched(),this.form.get("contingenciaDescricao").clearValidators()):(this.form.get("contingenciaDisparador").setValidators([me.t.required]),this.form.get("contingenciaDisparador").updateValueAndValidity(),this.form.get("contingenciaDisparador").markAsTouched(),this.form.get("contingenciaDescricao").setValidators([me.t.required]),this.form.get("contingenciaDescricao").updateValueAndValidity(),this.form.get("contingenciaDescricao").markAsTouched())})}listenFollowUpsLoaded(){this.followUpsService.followUpsLoaded.pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>this.followUps=e)}listenDtResolucaoControl(){this.form.get("dtResolucao").valueChanges.pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{e?(this.form.get("implantador").get("pessoa_id").setValidators([me.t.required]),this.form.get("custo").setValidators([me.t.required]),this.form.get("descricaoPlanoAcao").setValidators([me.t.required]),this.form.get("implantador").get("pessoa_id").updateValueAndValidity(),this.form.get("custo").updateValueAndValidity(),this.form.get("descricaoPlanoAcao").updateValueAndValidity(),this.form.get("implantador").get("pessoa_id").markAsTouched(),this.form.get("custo").markAsTouched(),this.form.get("descricaoPlanoAcao").markAsTouched()):(this.form.get("implantador").get("pessoa_id").clearValidators(),this.form.get("custo").clearValidators(),this.form.get("descricaoPlanoAcao").clearValidators(),this.form.get("implantador").get("pessoa_id").markAsUntouched(),this.form.get("custo").markAsUntouched(),this.form.get("descricaoPlanoAcao").markAsUntouched())})}getItem(){this.loadingService.show(),this.risksService.getById(this.item.risco_id).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.form.setValue({demanda:{demanda_id:e.demanda.demanda_id},ativo:e.ativo,titulo:e.titulo,consequencia:e.consequencia,ocorrencia:e.ocorrencia,finalidade:e.finalidade,identificador:{pessoa_id:e.identificador.pessoa_id},implantador:{pessoa_id:e.implantador?e.implantador.pessoa_id:null},probabilidade:{parametro_id:e.probabilidade.parametro_id},impacto:{parametro_id:e.impacto.parametro_id},dtIdentificado:e.dtIdentificado,dtResolucao:e.dtResolucao,custo:e.custo,dtLimite:e.dtLimite,descricaoPlanoAcao:e.descricaoPlanoAcao,contingenciaDisparador:e.contingenciaDisparador,contingenciaDescricao:e.contingenciaDescricao}),this.onlyRead.setValue({criticidade:{parametro_id:e.criticidade.parametro_id},nivelRisco:e.nivelRisco})},()=>this.messageService.snackMessage("Erro ao visualizar risco!","error")).add(()=>this.loadingService.hide())}save(){this.utilsService.validForm(this.form)&&(this.item?(this.loadingService.show(),this.form.get("dtResolucao").value?(this.loadingService.hide(),this.validateRiskToClose()&&this.confirmUpdate()):this.update()):this.create())}confirmUpdate(){this.messageService.swalMessage("Voc\xea est\xe1 adicionando uma data de resolu\xe7\xe3o ao risco, confirma o fechamento do risco?","Uma vez fechado n\xe3o ser\xe1 mais poss\xedvel altera-lo.","question").then(e=>{e.value&&this.update()})}validateRiskToClose(){return 0===this.actionsPlans.length?(this.messageService.snackMessage("Para fechar um risco \xe9 necess\xe1rio ter um plano de a\xe7\xe3o cadastrado em \u201cPlano de a\xe7\xe3o para Mitigar\u201d. Cadastre para prosseguir!","warning"),!1):0===this.followUps.length?(this.messageService.snackMessage("Para fechar um risco \xe9 necess\xe1rio ter um seguimento cadastrado na aba \u201cSeguimento\u201d. Cadastre para prosseguir!","warning"),!1):this.actionsPlans.length>0&&!this.actionsPlans.every(e=>null!=e.eficaz)?(this.messageService.snackMessage("Para fechar um risco \xe9 necess\xe1rio que todos planos de a\xe7\xe3o tenham a indica\xe7\xe3o se foi eficaz ou n\xe3o!","warning"),!1):this.contingencies.length>0&&!this.contingencies.every(e=>null!=e.eficaz)?(this.messageService.snackMessage("Para fechar um risco \xe9 necess\xe1rio que todas conting\xeancias tenham a indica\xe7\xe3o se foi eficaz ou n\xe3o!","warning"),!1):0===this.contingencies.length&&this.form.get("contingenciaDescricao").value?(this.messageService.snackMessage("Como os campos disparador e descri\xe7\xe3o da Conting\xeancia est\xe3o preenchidos, \xe9 necess\xe1rio ter uma conting\xeancia cadastrada.\n         Cadastre para prosseguir!","warning"),!1):0!==this.contingencies.length||!this.form.get("contingenciaDisparador").value||(this.messageService.snackMessage("Como o campo disparador est\xe1 preenchido, \xe9 necess\xe1rio ter conting\xeancia!","warning"),!1)}create(){this.loadingService.show(),this.risksService.create(this.form.getRawValue()).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.item=e,this.onlyRead.get("criticidade").get("parametro_id").setValue(e.criticidade.parametro_id),this.onlyRead.get("nivelRisco").setValue(e.nivelRisco),this.form.get("dtResolucao").enable(),this.form.get("implantador").get("pessoa_id").enable(),this.messageService.snackMessage("Risco criado com sucesso! Agora sim voc\xea pode criar planos de a\xe7\xe3o e seguimentos.","success"),this.saveEvent.emit({action:l.a.CREATED,item:e}),this.risksService.risksChanges.next({action:l.a.CREATED,item:e})},e=>this.errorHandlerService.handleError(e,"N\xe3o foi poss\xedvel salvar risco!")).add(()=>this.loadingService.hide())}update(){const e=Object.assign({},this.form.getRawValue());e.risco_id=this.item.risco_id,this.loadingService.show(),this.risksService.update(this.item.risco_id,e).pipe(Object(m.a)(this.unsubscribeNotifier)).subscribe(e=>{this.item=e,this.onlyRead.get("criticidade").get("parametro_id").setValue(e.criticidade.parametro_id),this.onlyRead.get("nivelRisco").setValue(e.nivelRisco),this.messageService.snackMessage(e.dtResolucao?"Risco fechado com sucesso!":"Risco atualizado com sucesso!","success"),this.saveEvent.emit({action:l.a.UPDATED,item:e}),this.risksService.risksChanges.next({action:l.a.UPDATED,item:e})},e=>this.errorHandlerService.handleError(e,"N\xe3o foi poss\xedvel atualizar o risco!")).add(()=>this.loadingService.hide())}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(me.d),n.Nb(p.a),n.Nb(h.a),n.Nb(g.a),n.Nb(v.a),n.Nb(S.a),n.Nb(he),n.Nb(ge),n.Nb(ve.a))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-risks-form"]],inputs:{item:"item",formEnabled:"formEnabled",demand:"demand"},outputs:{saveEvent:"saveEvent",backEvent:"backEvent"},features:[n.zb],decls:98,vars:65,consts:[["mat-align-tabs","start"],["label","Geral"],[1,"container-fluid","mt-4","mb-4"],[3,"formGroup"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["appearance","outline","color","primary"],["matInput","","formControlName","titulo","appTrim",""],[3,"control"],["label","Data de identifica\xe7\xe3o",3,"control","min","max"],["label","Data limite",3,"control","max","min"],["class","col-lg-4",4,"ngIf"],["title","Descri\xe7\xe3o"],["matInput","","formControlName","consequencia","appTrim",""],["matInput","","formControlName","ocorrencia","appTrim",""],["matInput","","formControlName","finalidade","appTrim",""],["label","Probabilidade",3,"control","idLine"],["label","Impacto",3,"control","idLine"],["class","col-lg-4",3,"formGroup",4,"ngIf"],["title","Plano de a\xe7\xe3o para mitigar"],["matInput","","formControlName","descricaoPlanoAcao","appTrim",""],[3,"risk","demand","type","allowsCreate","allowsEdit","allowsDelete"],["title","Conting\xeancia"],["matInput","","formControlName","contingenciaDisparador","appTrim",""],["matSuffix","","matTooltip","Evento que ap\xf3s ocorrido disparar\xe1 a necessidade de um plano de conting\xeancia."],["matInput","","formControlName","contingenciaDescricao","appTrim",""],[1,"col-lg-6"],["label","Identificado por",3,"control","idSquad"],["label","Respons\xe1vel implanta\xe7\xe3o",3,"control","idSquad"],["label","Data de resolu\xe7\xe3o",3,"control","min","max"],["matInput","","formControlName","custo","currencyMask","",3,"options"],["backButtonLabel","FECHAR",3,"showSaveButton","saveEvent","backEvent"],["label","Seguimento"],[1,"col-lg-4"],["types","with-risk",3,"control"],[1,"col-lg-4",3,"formGroup"],["label","Criticidade",3,"control","idLine"]],template:function(e,t){1&e&&(n.Tb(0,"mat-tab-group",0),n.Tb(1,"mat-tab",1),n.Tb(2,"div",2),n.Tb(3,"form",3),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"div",6),n.Tb(7,"mat-form-field",7),n.Tb(8,"mat-label"),n.Hc(9,"T\xedtulo"),n.Sb(),n.Ob(10,"input",8),n.Tb(11,"mat-error"),n.Ob(12,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Tb(13,"div"),n.Ob(14,"app-input-datepicker",10),n.Sb(),n.Tb(15,"div"),n.Ob(16,"app-input-datepicker",11),n.Sb(),n.Fc(17,qt,2,1,"div",12),n.Tb(18,"div",6),n.Tb(19,"app-container-inputs",13),n.Tb(20,"div",6),n.Tb(21,"mat-form-field",7),n.Tb(22,"mat-label"),n.Hc(23,"Como consequ\xeancia de"),n.Sb(),n.Ob(24,"input",14),n.Tb(25,"mat-error"),n.Ob(26,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Tb(27,"div",6),n.Tb(28,"mat-form-field",7),n.Tb(29,"mat-label"),n.Hc(30,"Pode ocorrer"),n.Sb(),n.Ob(31,"input",15),n.Tb(32,"mat-error"),n.Ob(33,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Tb(34,"div",6),n.Tb(35,"mat-form-field",7),n.Tb(36,"mat-label"),n.Hc(37,"O que levaria"),n.Sb(),n.Ob(38,"input",16),n.Tb(39,"mat-error"),n.Ob(40,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(41,"div"),n.Ob(42,"app-select-intensity",17),n.Sb(),n.Tb(43,"div"),n.Ob(44,"app-select-intensity",18),n.Sb(),n.Fc(45,Ut,2,3,"div",19),n.Tb(46,"div",6),n.Tb(47,"app-container-inputs",20),n.Tb(48,"div",4),n.Tb(49,"div",5),n.Tb(50,"div",6),n.Tb(51,"mat-form-field",7),n.Tb(52,"mat-label"),n.Hc(53,"Descri\xe7\xe3o"),n.Sb(),n.Ob(54,"input",21),n.Tb(55,"mat-error"),n.Ob(56,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(57,"hr"),n.Sb(),n.Ob(58,"app-actions-plans",22),n.Sb(),n.Sb(),n.Tb(59,"div",6),n.Tb(60,"app-container-inputs",23),n.Tb(61,"div",4),n.Tb(62,"div",5),n.Tb(63,"div",6),n.Tb(64,"mat-form-field",7),n.Tb(65,"mat-label"),n.Hc(66,"Disparador"),n.Sb(),n.Ob(67,"input",24),n.Tb(68,"mat-icon",25),n.Hc(69,"info"),n.Sb(),n.Tb(70,"mat-error"),n.Ob(71,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Tb(72,"div",6),n.Tb(73,"mat-form-field",7),n.Tb(74,"mat-label"),n.Hc(75,"Desri\xe7\xe3o"),n.Sb(),n.Ob(76,"input",26),n.Tb(77,"mat-error"),n.Ob(78,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(79,"hr"),n.Sb(),n.Ob(80,"app-actions-plans",22),n.Sb(),n.Sb(),n.Tb(81,"div",27),n.Ob(82,"app-select-allocation-dev-by-squad",28),n.Sb(),n.Tb(83,"div",27),n.Ob(84,"app-select-allocation-dev-by-squad",29),n.Sb(),n.Tb(85,"div",27),n.Ob(86,"app-input-datepicker",30),n.Sb(),n.Tb(87,"div",27),n.Tb(88,"mat-form-field",7),n.Tb(89,"mat-label"),n.Hc(90,"Custo"),n.Sb(),n.Ob(91,"input",31),n.Tb(92,"mat-error"),n.Ob(93,"app-input-errors",9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(94,"app-footer-form-buttons",32),n.bc("saveEvent",function(){return t.save()})("backEvent",function(){return t.backEvent.emit()}),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(95,"mat-tab",33),n.Tb(96,"div",2),n.Ob(97,"app-follow-ups",22),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.Bb(3),n.lc("formGroup",t.form),n.Bb(9),n.lc("control",t.form.get("titulo")),n.Bb(1),n.Fb("col-lg-4",t.item)("col-lg-6",!t.item),n.Bb(1),n.lc("control",t.form.get("dtIdentificado"))("min",t.demand.dtRecebimento)("max",t.demand.sprint?t.today<t.moment(t.form.get("dtLimite").value).format("YYYY-MM-DD")&&t.today<t.moment(t.form.get("dtResolucao").value).format("YYYY-MM-DD")&&t.today<t.moment(t.demand.sprint.dtFim).format("YYYY-MM-DD")?t.today:t.moment(t.form.get("dtLimite").value).format("YYYY-MM-DD")<t.moment(t.form.get("dtResolucao").value).format("YYYY-MM-DD")&&t.moment(t.form.get("dtLimite").value).format("YYYY-MM-DD")<t.moment(t.demand.sprint.dtFim).format("YYYY-MM-DD")?t.moment(t.form.get("dtLimite").value).format("YYYY-MM-DD"):t.moment(t.form.get("dtResolucao").value).format("YYYY-MM-DD")<t.moment(t.demand.sprint.dtFim).format("YYYY-MM-DD")?t.moment(t.form.get("dtResolucao").value).format("YYYY-MM-DD"):t.moment(t.demand.sprint.dtFim).format("YYYY-MM-DD"):t.today<t.moment(t.form.get("dtLimite").value).format("YYYY-MM-DD")&&t.today<t.moment(t.form.get("dtResolucao").value).format("YYYY-MM-DD")?t.today:t.moment(t.form.get("dtLimite").value).format("YYYY-MM-DD")<t.moment(t.form.get("dtResolucao").value).format("YYYY-MM-DD")?t.moment(t.form.get("dtLimite").value).format("YYYY-MM-DD"):t.moment(t.form.get("dtResolucao").value).format("YYYY-MM-DD")),n.Bb(1),n.Fb("col-lg-4",t.item)("col-lg-6",!t.item),n.Bb(1),n.lc("control",t.form.get("dtLimite"))("max",t.demand.sprint?t.moment(t.demand.sprint.dtFim).format("YYYY-MM-DD"):null)("min",t.form.get("dtIdentificado").value),n.Bb(1),n.lc("ngIf",t.item),n.Bb(9),n.lc("control",t.form.get("titulo")),n.Bb(7),n.lc("control",t.form.get("ocorrencia")),n.Bb(7),n.lc("control",t.form.get("finalidade")),n.Bb(1),n.Fb("col-lg-4",t.item)("col-lg-6",!t.item),n.Bb(1),n.lc("control",t.form.get("probabilidade").get("parametro_id"))("idLine",t.demand.linha_id),n.Bb(1),n.Fb("col-lg-4",t.item)("col-lg-6",!t.item),n.Bb(1),n.lc("control",t.form.get("impacto").get("parametro_id"))("idLine",t.demand.linha_id),n.Bb(1),n.lc("ngIf",t.item),n.Bb(11),n.lc("control",t.form.get("descricaoPlanoAcao")),n.Bb(2),n.lc("risk",t.item)("demand",t.demand)("type",t.actionPlanFeatureType.ACTION_PLAN)("allowsCreate",t.formEnabled&&t.item&&!t.item.dtResolucao)("allowsEdit",t.formEnabled&&t.item&&!t.item.dtResolucao)("allowsDelete",t.formEnabled&&t.item&&!t.item.dtResolucao),n.Bb(13),n.lc("control",t.form.get("contingenciaDisparador")),n.Bb(7),n.lc("control",t.form.get("contingenciaDescricao")),n.Bb(2),n.lc("risk",t.item)("demand",t.demand)("type",t.actionPlanFeatureType.CONTINGENCY)("allowsCreate",t.formEnabled&&t.item&&!t.item.dtResolucao)("allowsEdit",t.formEnabled&&t.item&&!t.item.dtResolucao)("allowsDelete",t.formEnabled&&t.item&&!t.item.dtResolucao),n.Bb(2),n.lc("control",t.form.get("identificador").get("pessoa_id"))("idSquad",null!=t.demand&&null!=t.demand.alocacao&&null!=t.demand.alocacao.squad&&t.demand.alocacao.squad.squad_id?t.demand.alocacao.squad.squad_id:null!=t.demand.squad&&t.demand.squad.squad_id?t.demand.squad.squad_id:t.demand.squad_id),n.Bb(2),n.lc("control",t.form.get("implantador").get("pessoa_id"))("idSquad",null!=t.demand&&null!=t.demand.alocacao&&null!=t.demand.alocacao.squad&&t.demand.alocacao.squad.squad_id?t.demand.alocacao.squad.squad_id:null!=t.demand.squad&&t.demand.squad.squad_id?t.demand.squad.squad_id:t.demand.squad_id),n.Bb(2),n.lc("control",t.form.get("dtIdentificado"))("min",t.form.get("dtIdentificado").value)("max",t.demand.sprint?t.today<t.moment(t.demand.sprint.dtFim).format("YYYY-MM-DD")?t.today:t.moment(t.demand.sprint.dtFim).format("YYYY-MM-DD"):t.today),n.Bb(5),n.lc("options",n.nc(64,Vt)),n.Bb(2),n.lc("control",t.form.get("custo")),n.Bb(1),n.lc("showSaveButton",t.formEnabled),n.Bb(3),n.lc("risk",t.item)("demand",t.demand)("type",t.followUpFeatureType.RISK)("allowsCreate",t.formEnabled&&t.item&&!t.item.dtResolucao)("allowsEdit",t.formEnabled&&t.item&&!t.item.dtResolucao)("allowsDelete",t.formEnabled&&t.item&&!t.item.dtResolucao))},directives:[Se.c,Se.a,me.u,me.p,me.h,we.c,we.f,Te.b,me.c,me.o,me.g,ye.a,we.b,Ee.a,Ne.a,c.l,ke.a,De.a,ct,E.a,we.g,N.a,Ze.a,et.a,it.a,Lt,Pt.a],styles:["app-actions-plans[_ngcontent-%COMP%], app-follow-ups[_ngcontent-%COMP%]{width:100%}"]}),e})();function jt(e,t){if(1&e){const e=n.Ub();n.Tb(0,"app-risks-list",5),n.bc("new",function(){return n.xc(e),n.fc().create()})("view",function(t){return n.xc(e),n.fc().view(t)})("edit",function(t){return n.xc(e),n.fc().edit(t)}),n.Sb()}if(2&e){const e=n.fc();n.lc("demand",e.demand)}}function $t(e,t){if(1&e){const e=n.Ub();n.Tb(0,"app-risks-form",6),n.bc("backEvent",function(){return n.xc(e),n.fc().back()})("saveEvent",function(t){n.xc(e);const i=n.fc();return t.item.dtResolucao?i.back():null}),n.Sb()}if(2&e){const e=n.fc();n.lc("demand",e.demand)("item",e.item)("formEnabled",e.formEnabled)}}let Jt=(()=>{class e extends a.a{constructor(e,t){super(),this.data=e,this.dialogRef=t}ngOnInit(){this.demand=this.data.demand,this.formEnabled=this.data.formEnabled,this.item=this.data.item,this.data.hasOwnProperty("showList")&&(this.showList=this.data.showList),this.data.modeCreated&&this.create()}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(o.a),n.Nb(o.e))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-risks"]],features:[n.yb],decls:5,vars:3,consts:[["subTitle","Riscos",3,"title","closeEvent"],[1,"row"],[1,"col-12"],[3,"demand","new","view","edit",4,"ngIf"],[3,"demand","item","formEnabled","backEvent","saveEvent",4,"ngIf"],[3,"demand","new","view","edit"],[3,"demand","item","formEnabled","backEvent","saveEvent"]],template:function(e,t){1&e&&(n.Tb(0,"app-modal-layout",0),n.bc("closeEvent",function(){return t.dialogRef.close()}),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Fc(3,jt,1,1,"app-risks-list",3),n.Fc(4,$t,1,3,"app-risks-form",4),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.lc("title",t.demand.titulo),n.Bb(3),n.lc("ngIf",t.showList),n.Bb(1),n.lc("ngIf",!t.showList))},directives:[s.a,c.l,le,zt],styles:[""]}),e})()},Tl06:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("PCNd"),a=i("ofXK"),n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a]]}),e})(),c=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(t){return new(t||e)},providers:[{provide:Window,useValue:window}],imports:[[a.c,o.a,s],s]}),e})()}}]);