(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"JK/P":function(t,e,i){"use strict";i.d(e,"a",function(){return a});var o=i("fXoL"),n=i("0IaG");let a=(()=>{class t{constructor(t){this.dialog=t}open(t,e,i){return this.dialog.open(t,{data:e,height:(null==i?void 0:i.height)?i.height:"auto",maxHeight:(null==i?void 0:i.maxHeight)?i.maxHeight:"80vh",width:(null==i?void 0:i.width)?i.width:"90vw",maxWidth:(null==i?void 0:i.maxWidth)?i.maxWidth:"90vw",panelClass:(null==i?void 0:i.customClass)?i.customClass:""})}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(n.b))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},VQGR:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var o=function(t){return t[t.BACKLOG=1]="BACKLOG",t[t.READY_TO_START=2]="READY_TO_START",t[t.DOING=3]="DOING",t[t.CANCELLED=4]="CANCELLED",t[t.BLOCKED=5]="BLOCKED",t[t.DELIVERED=6]="DELIVERED",t[t.DONE=7]="DONE",t}({})},"b5/5":function(t,e,i){"use strict";i.d(e,"a",function(){return O});var o=i("VQGR"),n=i("Xgew"),a=i("1G5W"),s=i("fXoL"),c=i("3Pt+"),r=i("wd/R"),l=i("XNiG");const d=t=>t&&t.value?{mustBeEmpty:!0}:null;var u=i("kRIO"),m=i("QLLi"),b=i("CW9h"),f=i("nAk8"),h=i("kh7C"),p=i("PS72"),v=i("kmnG"),g=i("qFsG"),w=i("DJTy"),S=i("RTbq"),T=i("/LKV"),D=i("83k4"),E=i("qjBN"),C=i("QNEd"),y=i("TT0I"),F=i("1jcm"),I=i("Xwk/");const B=function(){return{prefix:"",thousands:".",decimal:","}};let O=(()=>{class t{constructor(t,e,i,o,n,a,c){this.formBuilder=t,this.defectsService=e,this.messageService=i,this.loadingService=o,this.errorHandlerService=n,this.utilsService=a,this.loggedUserService=c,this.formWithOneColumn=!1,this.saveEvent=new s.o,this.backEvent=new s.o,this.today=r().format("YYYY-MM-DD"),this.moment=r,this.unsubscribeNotifier=new l.a}ngOnInit(){}ngOnChanges(){this.createForm(),this.listenStatusDemandaIdControl(),this.item&&this.getItem()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}createForm(){this.form=this.formBuilder.group({demanda:this.formBuilder.group({demanda_id:[this.demand?this.demand.demanda_id:null,[c.t.required]]}),ativo:[!0],descricao:[null],statusDefeito:this.formBuilder.group({status_demanda_id:[null,[c.t.required]]}),titulo:[null,[c.t.required,c.t.maxLength(200)]],horas:[null,[c.t.required,c.t.min(0)]],dtInicio:[this.sprint?r(this.sprint.dtFim).format("YYYY-MM-DD")>this.today?this.today:null:this.today],dtFim:[null],dtAbertura:[this.sprint?r(this.sprint.dtFim).format("YYYY-MM-DD")>this.today?this.today:null:this.today,[c.t.required]],tipoDefeito:[null,[c.t.required]],procedente:[null],responsavel:this.formBuilder.group({pessoa_id:[this.loggedUserService.isTechnical()?this.loggedUserService.getPersonId():null,[c.t.required]]})}),this.formEnabled||this.form.disable()}listenStatusDemandaIdControl(){const t=()=>{this.form.get("dtInicio").setValidators([d]),this.form.get("dtInicio").updateValueAndValidity(),this.form.get("dtInicio").markAllAsTouched()},e=()=>{this.form.get("dtInicio").setValidators([c.t.required]),this.form.get("dtInicio").updateValueAndValidity(),this.form.get("dtInicio").markAllAsTouched()},i=()=>{this.form.get("dtFim").setValidators([d]),this.form.get("dtFim").updateValueAndValidity(),this.form.get("dtFim").markAllAsTouched()},n=()=>{this.form.get("dtFim").setValidators([c.t.required]),this.form.get("dtFim").updateValueAndValidity(),this.form.get("dtFim").markAllAsTouched()},s=()=>{this.form.get("dtInicio").clearValidators(),this.form.get("dtInicio").markAsUntouched(),this.form.get("dtFim").clearValidators(),this.form.get("dtFim").markAsUntouched()};this.form.get("statusDefeito").get("status_demanda_id").valueChanges.pipe(Object(a.a)(this.unsubscribeNotifier)).subscribe(a=>(s(),a===o.a.BACKLOG||a===o.a.READY_TO_START?(t(),void i()):a===o.a.DOING||a===o.a.BLOCKED?(i(),void(a===o.a.DOING&&e())):a===o.a.DONE||a===o.a.DELIVERED?(e(),void n()):void 0))}getItem(){this.loadingService.show(),this.defectsService.getById(this.item.defeito_id).pipe(Object(a.a)(this.unsubscribeNotifier)).subscribe(t=>this.form.setValue({demanda:{demanda_id:t.demanda.demanda_id},ativo:t.ativo,descricao:t.descricao,statusDefeito:{status_demanda_id:t.statusDefeito.status_demanda_id},titulo:t.titulo,horas:t.horas,dtInicio:t.dtInicio,dtFim:t.dtFim,dtAbertura:t.dtAbertura,tipoDefeito:t.tipoDefeito,procedente:t.procedente,responsavel:{pessoa_id:t.responsavel.pessoa_id}}),()=>this.messageService.snackMessage("Erro ao visualizar defeito!","error")).add(()=>this.loadingService.hide())}save(){this.utilsService.validForm(this.form)&&(this.item?this.update():this.create())}create(){this.loadingService.show(),this.defectsService.create(this.form.value).pipe(Object(a.a)(this.unsubscribeNotifier)).subscribe(t=>{this.messageService.snackMessage("Defeito cadastrado com sucesso!","success"),this.saveEvent.emit({action:n.a.CREATED,item:t})},t=>this.errorHandlerService.handleError(t,"N\xe3o foi poss\xedvel cadastrar o defeito!")).add(()=>this.loadingService.hide())}update(){const t=Object.assign({},this.form.value);t.defeito_id=this.item.defeito_id,this.loadingService.show(),this.defectsService.update(this.item.defeito_id,t).pipe(Object(a.a)(this.unsubscribeNotifier)).subscribe(t=>{this.messageService.snackMessage("Defeito atualizado com sucesso!","success"),this.saveEvent.emit({action:n.a.UPDATED,item:t})},t=>this.errorHandlerService.handleError(t,"N\xe3o foi poss\xedvel atualizar o defeito!")).add(()=>this.loadingService.hide())}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(c.d),s.Nb(u.a),s.Nb(m.a),s.Nb(b.a),s.Nb(f.a),s.Nb(h.a),s.Nb(p.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-defects-form"]],inputs:{item:"item",formEnabled:"formEnabled",demand:"demand",formWithOneColumn:"formWithOneColumn",sprint:"sprint"},outputs:{saveEvent:"saveEvent",backEvent:"backEvent"},features:[s.zb],decls:42,vars:50,consts:[[3,"formGroup"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["appearance","outline","color","primary"],["matInput","","formControlName","titulo","appTrim",""],[3,"control"],["label","Respons\xe1vel",3,"control","idSquad","formEnabled"],["label","Data Abertura",3,"control","min","max"],["label","Data In\xedcio",3,"control","min","max"],["label","Data Fim",3,"control","min","max"],["matInput","","formControlName","horas","currencyMask","",3,"options"],["matInput","","formControlName","descricao","appTrim",""],["formControlName","procedente","color","primary"],["backButtonLabel","FECHAR",3,"showSaveButton","saveEvent","backEvent"]],template:function(t,e){1&t&&(s.Tb(0,"form",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"div",3),s.Tb(4,"mat-form-field",4),s.Tb(5,"mat-label"),s.Hc(6,"T\xedtulo"),s.Sb(),s.Ob(7,"input",5),s.Tb(8,"mat-error"),s.Ob(9,"app-input-errors",6),s.Sb(),s.Sb(),s.Sb(),s.Tb(10,"div"),s.Ob(11,"app-select-allocation-dev-by-squad",7),s.Sb(),s.Tb(12,"div"),s.Ob(13,"app-select-demand-status",6),s.Sb(),s.Tb(14,"div"),s.Ob(15,"app-select-type-defect",6),s.Sb(),s.Tb(16,"div"),s.Ob(17,"app-input-datepicker",8),s.Sb(),s.Tb(18,"div"),s.Ob(19,"app-input-datepicker",9),s.Sb(),s.Tb(20,"div"),s.Ob(21,"app-input-datepicker",10),s.Sb(),s.Tb(22,"div"),s.Tb(23,"mat-form-field",4),s.Tb(24,"mat-label"),s.Hc(25,"Dura\xe7\xe3o em Horas"),s.Sb(),s.Ob(26,"input",11),s.Tb(27,"mat-error"),s.Ob(28,"app-input-errors",6),s.Sb(),s.Sb(),s.Sb(),s.Tb(29,"div",3),s.Tb(30,"mat-form-field",4),s.Tb(31,"mat-label"),s.Hc(32,"Descri\xe7\xe3o"),s.Sb(),s.Ob(33,"textarea",12),s.Tb(34,"mat-error"),s.Ob(35,"app-input-errors",6),s.Sb(),s.Sb(),s.Sb(),s.Tb(36,"div",3),s.Tb(37,"mat-slide-toggle",13),s.Hc(38,"Procedente"),s.Sb(),s.Tb(39,"mat-error"),s.Ob(40,"app-input-errors",6),s.Sb(),s.Sb(),s.Sb(),s.Tb(41,"app-footer-form-buttons",14),s.bc("saveEvent",function(){return e.save()})("backEvent",function(){return e.backEvent.emit()}),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.lc("formGroup",e.form),s.Bb(9),s.lc("control",e.form.get("titulo")),s.Bb(1),s.Fb("col-lg-6",!e.formWithOneColumn)("col-12",e.formWithOneColumn),s.Bb(1),s.lc("control",e.form.get("responsavel").get("pessoa_id"))("idSquad",null!=e.demand&&null!=e.demand.alocacao&&null!=e.demand.alocacao.squad&&e.demand.alocacao.squad.squad_id?e.demand.alocacao.squad.squad_id:null!=e.demand.squad&&e.demand.squad.squad_id?e.demand.squad.squad_id:e.demand.squad_id)("formEnabled",e.formEnabled),s.Bb(1),s.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),s.Bb(1),s.lc("control",e.form.get("statusDefeito").get("status_demanda_id")),s.Bb(1),s.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),s.Bb(1),s.lc("control",e.form.get("tipoDefeito")),s.Bb(1),s.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),s.Bb(1),s.lc("control",e.form.get("dtAbertura"))("min",e.sprint&&e.moment(null==e.sprint?null:e.sprint.dtInicio).format("YYYY-DD-MM")>e.moment(e.demand.dtRecebimento).format("YYYY-DD-MM")?null==e.sprint?null:e.sprint.dtInicio:e.demand.dtRecebimento)("max",e.sprint?"E"==e.form.get("tipoDefeito").value?e.today:e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.today?null==e.sprint?null:e.sprint.dtFim:e.today:e.form.get("dtInicio").value?e.form.get("dtInicio").value:e.today),s.Bb(1),s.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),s.Bb(1),s.lc("control",e.form.get("dtInicio"))("min",e.form.get("dtAbertura").value?e.form.get("dtAbertura").value:null==e.sprint?null:e.sprint.dtInicio)("max",e.sprint?"E"==e.form.get("tipoDefeito").value?e.today:e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.today&&e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.moment(e.form.get("dtFim").value).format("YYYY-MM-DD")?null==e.sprint?null:e.sprint.dtFim:e.moment(e.form.get("dtFim").value).format("YYYY-MM-DD")<e.today?e.moment(e.form.get("dtFim").value).format("YYYY-MM-DD"):e.today:e.moment(e.form.get("dtFim").value).format("YYYY-MM-DD")<e.today?e.form.get("dtFim").value:e.today),s.Bb(1),s.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),s.Bb(1),s.lc("control",e.form.get("dtFim"))("min",e.form.get("dtInicio").value||e.form.get("dtInicio").value?e.form.get("dtInicio").value:null==e.sprint?null:e.sprint.dtInicio)("max",e.sprint?"E"==e.form.get("tipoDefeito").value?e.today:e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.today?null==e.sprint?null:e.sprint.dtFim:e.today:e.today),s.Bb(1),s.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),s.Bb(4),s.lc("options",s.nc(49,B)),s.Bb(2),s.lc("control",e.form.get("horas")),s.Bb(7),s.lc("control",e.form.get("descricao")),s.Bb(5),s.lc("control",e.form.get("procedente")),s.Bb(1),s.lc("showSaveButton",e.formEnabled))},directives:[c.u,c.p,c.h,v.c,v.f,g.b,c.c,c.o,c.g,w.a,v.b,S.a,T.a,D.a,E.a,C.a,y.a,F.a,I.a],styles:[""]}),t})()},e7wf:function(t,e,i){"use strict";i.d(e,"a",function(){return nt});var o=i("VQGR"),n=i("0IaG"),a=i("e3yB"),s=i("fXoL"),c=i("TXJc"),r=i("ofXK"),l=i("z/S5"),d=i("1G5W"),u=i("+0xr"),m=i("STbY"),b=i("XNiG"),f=i("pxkN"),h=i("QLLi"),p=i("CW9h"),v=i("kh7C"),g=i("nAk8"),w=i("XiUz"),S=i("bTqV"),T=i("NFeN"),D=i("Qu3c"),E=i("hh1q"),C=i("zoH9"),y=i("zGX+"),F=i("f0Cb"),I=i("9Ovz");function B(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",10),s.bc("click",function(){return s.xc(t),s.fc().new.emit()}),s.Tb(1,"mat-icon"),s.Hc(2,"add_circle_outline"),s.Sb(),s.Hc(3," NOVO BLOQUEIO "),s.Sb()}}function O(t,e){1&t&&s.Ob(0,"th",24)}function k(t,e){if(1&t){const t=s.Ub();s.Tb(0,"td",25),s.Tb(1,"button",26),s.bc("click",function(i){s.xc(t);const o=e.$implicit;return s.fc(2).onContextMenu(i,o)}),s.Tb(2,"mat-icon"),s.Hc(3,"more_vert"),s.Sb(),s.Sb(),s.Sb()}}function N(t,e){1&t&&(s.Tb(0,"th",24),s.Hc(1,"#"),s.Sb())}function M(t,e){if(1&t&&(s.Tb(0,"td",25),s.Hc(1),s.Sb()),2&t){const t=e.index;s.Bb(1),s.Jc(" ",t+1," ")}}function x(t,e){1&t&&(s.Tb(0,"th",24),s.Hc(1,"Data Abertura"),s.Sb())}function H(t,e){if(1&t&&(s.Tb(0,"td",25),s.Hc(1),s.gc(2,"date"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",s.ic(2,1,t.dtAbertura,"dd/MM/yy")," ")}}function R(t,e){1&t&&(s.Tb(0,"th",24),s.Hc(1,"T\xedtulo"),s.Sb())}function Y(t,e){if(1&t&&(s.Tb(0,"td",27),s.Tb(1,"span",28),s.Hc(2),s.Sb(),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.lc("matTooltip",t.titulo)("appNumberOfLine",3),s.Bb(1),s.Jc(" ",t.titulo," ")}}function _(t,e){1&t&&(s.Tb(0,"th",24),s.Hc(1,"Data In\xedcio"),s.Sb())}function A(t,e){if(1&t&&(s.Tb(0,"td",25),s.Hc(1),s.gc(2,"date"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",s.ic(2,1,t.dtInicio,"dd/MM/yy")," ")}}function L(t,e){1&t&&(s.Tb(0,"th",24),s.Hc(1,"Data Final"),s.Sb())}function q(t,e){if(1&t&&(s.Tb(0,"td",25),s.Hc(1),s.gc(2,"date"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",s.ic(2,1,t.dtFim,"dd/MM/yy")," ")}}function P(t,e){1&t&&(s.Tb(0,"th",24),s.Hc(1,"Horas"),s.Sb())}function Q(t,e){if(1&t&&(s.Tb(0,"td",25),s.Hc(1),s.gc(2,"decimalNumber"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",s.hc(2,1,t.horasBloqueio)," ")}}function G(t,e){1&t&&s.Ob(0,"tr",29)}function W(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr",30),s.bc("contextmenu",function(i){s.xc(t);const o=e.$implicit,n=s.fc(2);return n.allowsActions?n.onContextMenu(i,o):null}),s.Sb()}}function U(t,e){if(1&t&&(s.Tb(0,"table",11),s.Rb(1,12),s.Fc(2,O,1,0,"th",13),s.Fc(3,k,4,0,"td",14),s.Qb(),s.Rb(4,15),s.Fc(5,N,2,0,"th",13),s.Fc(6,M,2,1,"td",14),s.Qb(),s.Rb(7,16),s.Fc(8,x,2,0,"th",13),s.Fc(9,H,3,4,"td",14),s.Qb(),s.Rb(10,17),s.Fc(11,R,2,0,"th",13),s.Fc(12,Y,3,3,"td",18),s.Qb(),s.Rb(13,19),s.Fc(14,_,2,0,"th",13),s.Fc(15,A,3,4,"td",14),s.Qb(),s.Rb(16,20),s.Fc(17,L,2,0,"th",13),s.Fc(18,q,3,4,"td",14),s.Qb(),s.Rb(19,21),s.Fc(20,P,2,0,"th",13),s.Fc(21,Q,3,3,"td",14),s.Qb(),s.Fc(22,G,1,0,"tr",22),s.Fc(23,W,1,0,"tr",23),s.Sb()),2&t){const t=s.fc();s.lc("dataSource",t.dataSource),s.Bb(22),s.lc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),s.Bb(1),s.lc("matRowDefColumns",t.displayedColumns)}}function $(t,e){1&t&&s.Ob(0,"app-loading-spinner")}function V(t,e){1&t&&s.Ob(0,"app-simple-message",31)}function X(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",34),s.bc("click",function(){s.xc(t);const e=s.fc(2).item;return s.fc().edit.emit(e)}),s.Tb(1,"mat-icon"),s.Hc(2,"edit"),s.Sb(),s.Hc(3," Editar bloqueio "),s.Sb()}}function J(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",34),s.bc("click",function(){s.xc(t);const e=s.fc(2).item;return s.fc().confirmRemove(e)}),s.Tb(1,"mat-icon"),s.Hc(2,"delete_outline"),s.Sb(),s.Hc(3," Remover bloqueio "),s.Sb()}}function z(t,e){if(1&t){const t=s.Ub();s.Rb(0),s.Tb(1,"button",34),s.bc("click",function(){s.xc(t);const e=s.fc().item;return s.fc().view.emit(e)}),s.Tb(2,"mat-icon"),s.Hc(3,"remove_red_eye"),s.Sb(),s.Hc(4," Visualizar bloqueio "),s.Sb(),s.Fc(5,X,4,0,"button",32),s.Fc(6,J,4,0,"button",32),s.Ob(7,"mat-divider"),s.Qb()}if(2&t){const t=s.fc(2);s.Bb(5),s.lc("ngIf",t.showEditButton()),s.Bb(1),s.lc("ngIf",t.allowsRemove)}}function j(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",34),s.bc("click",function(){return s.xc(t),s.fc(2).new.emit()}),s.Tb(1,"mat-icon"),s.Hc(2,"add_circle_outline"),s.Sb(),s.Hc(3," Novo bloqueio "),s.Sb()}}function K(t,e){1&t&&(s.Tb(0,"button",35),s.Hc(1," Nenhuma a\xe7\xe3o dispon\xedvel :/ "),s.Sb())}function Z(t,e){if(1&t&&(s.Fc(0,z,8,2,"ng-container",6),s.Fc(1,j,4,0,"button",32),s.Fc(2,K,2,0,"button",33)),2&t){const t=e.item,i=s.fc();s.lc("ngIf",t),s.Bb(1),s.lc("ngIf",i.showNewButton()),s.Bb(1),s.lc("ngIf",!t&&!i.showNewButton())}}let tt=(()=>{class t{constructor(t,e,i,o,n){this.blocksService=t,this.messageService=e,this.loadingService=i,this.utilsService=o,this.errorHandlerService=n,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsRemove=!0,this.allowsActions=!0,this.view=new s.o,this.edit=new s.o,this.new=new s.o,this.displayedColumns=[],this.contextMenuPosition=new l.a,this.unsubscribeNotifier=new b.a}ngOnInit(){this.displayedColumns=this.allowsActions?["actions","rowNumber","dtAbertura","titulo","dtInicio","dtFim","horas"]:["rowNumber","dtAbertura","titulo","dtInicio","dtFim","horas"],this.loadBlocks()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onContextMenu(t,e){this.contextMenuPosition=this.utilsService.openContextMenu(t,this.contextMenu,{item:e})}loadBlocks(){this.isLoading=!0,this.blocksService.getAllByDemandId(this.demand.demanda_id).pipe(Object(d.a)(this.unsubscribeNotifier)).subscribe(t=>{this.isLoading=!1,this.dataSource=new u.k(t)},()=>{this.isLoading=!1,this.messageService.snackMessage("Erro ao carregar bloqueio!","error"),this.dataSource=new u.k([])})}confirmRemove(t){this.messageService.swalMessage("Deseja realmente excluir o bloqueio?","Uma vez feito isso n\xe3o ser\xe1 poss\xedvel desfazer.","question").then(e=>{e.value&&this.remove(t)})}remove(t){this.loadingService.show(),this.blocksService.delete(t.bloqueio_id).pipe(Object(d.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Bloqueio removido com sucesso!","success"),this.loadBlocks()},t=>this.errorHandlerService.handleError(t,"Erro ao excluir bloqueio!")).add(()=>this.loadingService.hide())}showNewButton(){var t;const e=(null===(t=this.demand.status_demanda)||void 0===t?void 0:t.status_demanda_id)?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id;return e!==o.a.CANCELLED&&e!==o.a.DONE&&e!==o.a.DELIVERED&&this.allowsCreate&&this.allowsActions}showEditButton(){var t;const e=(null===(t=this.demand.status_demanda)||void 0===t?void 0:t.status_demanda_id)?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id;return e!==o.a.DONE&&e!==o.a.DELIVERED&&this.allowsEdit}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(f.a),s.Nb(h.a),s.Nb(p.a),s.Nb(v.a),s.Nb(g.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-blocks-list"]],viewQuery:function(t,e){if(1&t&&s.Lc(m.e,!0),2&t){let t;s.tc(t=s.cc())&&(e.contextMenu=t.first)}},inputs:{demand:"demand",allowsCreate:"allowsCreate",allowsEdit:"allowsEdit",allowsRemove:"allowsRemove",allowsActions:"allowsActions"},outputs:{view:"view",edit:"edit",new:"new"},decls:12,vars:11,consts:[[3,"fxLayoutAlign"],["mat-button","","mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],[1,"table-count"],[1,"wrapper-table-scrolling",3,"contextmenu"],["mat-table","",3,"dataSource",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],[4,"ngIf"],["message","Nenhum bloqueio cadastrado.",4,"ngIf"],["contextMenu","matMenu"],["matMenuContent",""],["mat-button","","mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rowNumber"],["matColumnDef","dtAbertura"],["matColumnDef","titulo"],["mat-cell","","class","break-line",4,"matCellDef"],["matColumnDef","dtInicio"],["matColumnDef","dtFim"],["matColumnDef","horas"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"contextmenu",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-cell","",1,"break-line"],[1,"font-weight-bold",3,"matTooltip","appNumberOfLine"],["mat-header-row",""],["mat-row","",3,"contextmenu"],["message","Nenhum bloqueio cadastrado."],["mat-menu-item","",3,"click",4,"ngIf"],["class","button-break-line","disabled","","mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click"],["disabled","","mat-menu-item","",1,"button-break-line"]],template:function(t,e){if(1&t&&(s.Tb(0,"div",0),s.Fc(1,B,4,0,"button",1),s.Tb(2,"p",2),s.Hc(3),s.Sb(),s.Sb(),s.Tb(4,"div",3),s.bc("contextmenu",function(t){return e.allowsActions?e.onContextMenu(t):null}),s.Fc(5,U,24,4,"table",4),s.Ob(6,"div",5),s.Fc(7,$,1,0,"app-loading-spinner",6),s.Fc(8,V,1,0,"app-simple-message",7),s.Sb(),s.Tb(9,"mat-menu",null,8),s.Fc(11,Z,3,3,"ng-template",9),s.Sb()),2&t){const t=s.uc(10);s.mc("fxLayoutAlign","",e.showNewButton()?"space-between":"end"," center my-2"),s.Bb(1),s.lc("ngIf",e.showNewButton()),s.Bb(2),s.Jc("Total de registros: ",e.dataSource?e.dataSource.data.length:0,""),s.Bb(2),s.lc("ngIf",!e.isLoading&&(null==e.dataSource?null:e.dataSource.data.length)>0),s.Bb(1),s.Cc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),s.lc("matMenuTriggerFor",t),s.Bb(1),s.lc("ngIf",e.isLoading),s.Bb(1),s.lc("ngIf",0==(null==e.dataSource?null:e.dataSource.data.length)&&!e.isLoading)}},directives:[w.a,r.l,m.e,m.a,m.b,S.b,T.a,u.j,u.c,u.e,u.b,u.g,u.i,u.d,u.a,D.a,E.a,u.f,u.h,C.a,y.a,m.c,F.a],pipes:[r.e,I.a],styles:[".wrapper-table-scrolling[_ngcontent-%COMP%]{max-height:200px}.wrapper-table-scrolling[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]}),t})();var et=i("kmKX");function it(t,e){if(1&t){const t=s.Ub();s.Tb(0,"app-blocks-list",5),s.bc("new",function(){return s.xc(t),s.fc().create()})("view",function(e){return s.xc(t),s.fc().view(e)})("edit",function(e){return s.xc(t),s.fc().edit(e)}),s.Sb()}if(2&t){const t=s.fc();s.lc("demand",t.demand)("allowsCreate",t.allowsCreate)("allowsEdit",t.allowsEdit)("allowsRemove",t.allowsEdit)}}function ot(t,e){if(1&t){const t=s.Ub();s.Tb(0,"app-blocks-form",6),s.bc("saveEvent",function(){return s.xc(t),s.fc().back()})("backEvent",function(){return s.xc(t),s.fc().back()}),s.Sb()}if(2&t){const t=s.fc();s.lc("demand",t.demand)("item",t.item)("formEnabled",t.formEnabled)("sprint",t.demand.sprint)}}let nt=(()=>{class t extends a.a{constructor(t,e){super(),this.data=t,this.dialogRef=e,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsRemove=!0,this.demandStatus=o.a}ngOnInit(){this.demand=this.data.demand,this.data.hasOwnProperty("allowsCreate")&&(this.allowsCreate=this.data.allowsCreate),this.data.hasOwnProperty("allowsEdit")&&(this.allowsEdit=this.data.allowsEdit),this.data.hasOwnProperty("allowsRemove")&&(this.allowsRemove=this.data.allowsRemove)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(n.a),s.Nb(n.e))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-blocks"]],features:[s.yb],decls:5,vars:3,consts:[["subTitle","Bloqueios",3,"title","closeEvent"],[1,"row"],[1,"col-12"],[3,"demand","allowsCreate","allowsEdit","allowsRemove","new","view","edit",4,"ngIf"],[3,"demand","item","formEnabled","sprint","saveEvent","backEvent",4,"ngIf"],[3,"demand","allowsCreate","allowsEdit","allowsRemove","new","view","edit"],[3,"demand","item","formEnabled","sprint","saveEvent","backEvent"]],template:function(t,e){1&t&&(s.Tb(0,"app-modal-layout",0),s.bc("closeEvent",function(){return e.dialogRef.close()}),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Fc(3,it,1,4,"app-blocks-list",3),s.Fc(4,ot,1,4,"app-blocks-form",4),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.lc("title",e.demand.titulo),s.Bb(3),s.lc("ngIf",e.showList),s.Bb(1),s.lc("ngIf",!e.showList))},directives:[c.a,r.l,tt,et.a],styles:[""]}),t})()},kMJb:function(t,e,i){"use strict";i.d(e,"a",function(){return tt});var o=i("VQGR"),n=i("z/S5"),a=i("fXoL"),s=i("+0xr"),c=i("STbY"),r=i("wd/R"),l=i("lJxs"),d=i("1G5W"),u=i("XNiG"),m=i("xo4q"),b=i("QLLi"),f=i("CW9h"),h=i("nAk8"),p=i("kh7C"),v=i("G8zh"),g=i("XiUz"),w=i("ofXK"),S=i("bTqV"),T=i("NFeN"),D=i("hh1q"),E=i("Qu3c"),C=i("zoH9"),y=i("zGX+"),F=i("f0Cb"),I=i("9Ovz");function B(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",10),a.bc("click",function(){return a.xc(t),a.fc().new.emit()}),a.Tb(1,"mat-icon"),a.Hc(2,"add_circle_outline"),a.Sb(),a.Hc(3," NOVO DI\xc1RIO "),a.Sb()}}function O(t,e){1&t&&a.Ob(0,"th",25)}function k(t,e){if(1&t){const t=a.Ub();a.Tb(0,"td",26),a.Tb(1,"button",27),a.bc("click",function(i){a.xc(t);const o=e.$implicit;return a.fc(2).onContextMenu(i,o)}),a.Tb(2,"mat-icon"),a.Hc(3,"more_vert"),a.Sb(),a.Sb(),a.Sb()}}function N(t,e){1&t&&(a.Tb(0,"th",25),a.Hc(1,"#"),a.Sb())}function M(t,e){if(1&t&&(a.Tb(0,"td",26),a.Hc(1),a.Sb()),2&t){const t=e.index;a.Bb(1),a.Jc(" ",t+1," ")}}function x(t,e){1&t&&(a.Tb(0,"th",25),a.Hc(1,"Data"),a.Sb())}function H(t,e){if(1&t&&(a.Tb(0,"td",26),a.Hc(1),a.gc(2,"date"),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Jc(" ",a.ic(2,1,t.dtOcorrencia,"dd/MM/yy")," ")}}function R(t,e){1&t&&(a.Tb(0,"th",25),a.Hc(1,"Classe"),a.Sb())}function Y(t,e){if(1&t&&(a.Tb(0,"td",28),a.Hc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ic(t.classeServico.descricao)}}function _(t,e){1&t&&(a.Tb(0,"th",25),a.Hc(1,"Descri\xe7\xe3o"),a.Sb())}function A(t,e){if(1&t&&(a.Tb(0,"td",29),a.Tb(1,"span",30),a.Hc(2),a.Sb(),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.lc("appNumberOfLine",3)("matTooltip",t.descricao),a.Bb(1),a.Jc(" ",t.descricao," ")}}function L(t,e){1&t&&(a.Tb(0,"th",25),a.Hc(1,"Horas"),a.Sb())}function q(t,e){if(1&t&&(a.Tb(0,"td",26),a.Hc(1),a.gc(2,"decimalNumber"),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ic(a.hc(2,1,t.horas))}}function P(t,e){1&t&&(a.Tb(0,"th",25),a.Hc(1,"ETCm"),a.Sb())}function Q(t,e){if(1&t&&(a.Tb(0,"td",26),a.Hc(1),a.gc(2,"decimalNumber"),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ic(a.hc(2,1,t.etcm))}}function G(t,e){1&t&&a.Ob(0,"tr",31)}function W(t,e){if(1&t){const t=a.Ub();a.Tb(0,"tr",32),a.bc("contextmenu",function(i){a.xc(t);const o=e.$implicit,n=a.fc(2);return n.allowsActions?n.onContextMenu(i,o):null}),a.Sb()}}function U(t,e){if(1&t&&(a.Tb(0,"table",11),a.Rb(1,12),a.Fc(2,O,1,0,"th",13),a.Fc(3,k,4,0,"td",14),a.Qb(),a.Rb(4,15),a.Fc(5,N,2,0,"th",13),a.Fc(6,M,2,1,"td",14),a.Qb(),a.Rb(7,16),a.Fc(8,x,2,0,"th",13),a.Fc(9,H,3,4,"td",14),a.Qb(),a.Rb(10,17),a.Fc(11,R,2,0,"th",13),a.Fc(12,Y,2,1,"td",18),a.Qb(),a.Rb(13,19),a.Fc(14,_,2,0,"th",13),a.Fc(15,A,3,3,"td",20),a.Qb(),a.Rb(16,21),a.Fc(17,L,2,0,"th",13),a.Fc(18,q,3,3,"td",14),a.Qb(),a.Rb(19,22),a.Fc(20,P,2,0,"th",13),a.Fc(21,Q,3,3,"td",14),a.Qb(),a.Fc(22,G,1,0,"tr",23),a.Fc(23,W,1,0,"tr",24),a.Sb()),2&t){const t=a.fc();a.lc("dataSource",t.dataSource),a.Bb(22),a.lc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),a.Bb(1),a.lc("matRowDefColumns",t.displayedColumns)}}function $(t,e){1&t&&a.Ob(0,"app-loading-spinner")}function V(t,e){1&t&&a.Ob(0,"app-simple-message",33)}function X(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",36),a.bc("click",function(){a.xc(t);const e=a.fc(2).item;return a.fc().edit.emit(e)}),a.Tb(1,"mat-icon"),a.Hc(2,"edit"),a.Sb(),a.Hc(3," Editar di\xe1rio "),a.Sb()}}function J(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",36),a.bc("click",function(){a.xc(t);const e=a.fc(2).item;return a.fc().confirmRemove(e)}),a.Tb(1,"mat-icon"),a.Hc(2,"delete_outline"),a.Sb(),a.Hc(3," Remover di\xe1rio "),a.Sb()}}function z(t,e){if(1&t){const t=a.Ub();a.Rb(0),a.Tb(1,"button",36),a.bc("click",function(){a.xc(t);const e=a.fc().item;return a.fc().view.emit(e)}),a.Tb(2,"mat-icon"),a.Hc(3,"remove_red_eye"),a.Sb(),a.Hc(4," Visualizar di\xe1rio "),a.Sb(),a.Fc(5,X,4,0,"button",34),a.Fc(6,J,4,0,"button",34),a.Ob(7,"mat-divider"),a.Qb()}if(2&t){const t=a.fc(2);a.Bb(5),a.lc("ngIf",t.showEditButton()),a.Bb(1),a.lc("ngIf",t.allowsRemove)}}function j(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",36),a.bc("click",function(){return a.xc(t),a.fc(2).new.emit()}),a.Tb(1,"mat-icon"),a.Hc(2,"add_circle_outline"),a.Sb(),a.Hc(3," Novo di\xe1rio "),a.Sb()}}function K(t,e){1&t&&(a.Tb(0,"button",37),a.Hc(1," Nenhuma a\xe7\xe3o dispon\xedvel :/ "),a.Sb())}function Z(t,e){if(1&t&&(a.Fc(0,z,8,2,"ng-container",6),a.Fc(1,j,4,0,"button",34),a.Fc(2,K,2,0,"button",35)),2&t){const t=e.item,i=a.fc();a.lc("ngIf",t),a.Bb(1),a.lc("ngIf",i.showNewButton()),a.Bb(1),a.lc("ngIf",!t&&!i.showNewButton())}}let tt=(()=>{class t{constructor(t,e,i,o,s,c){this.diaryService=t,this.messageService=e,this.loadingService=i,this.errorHandlerService=o,this.utilsService=s,this.footerBarHoursService=c,this.justToday=!1,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsRemove=!0,this.allowsActions=!0,this.view=new a.o,this.edit=new a.o,this.new=new a.o,this.displayedColumns=["actions","rowNumber","dtOcorrencia","classeServico.descricao","descricao","horas","etcm"],this.contextMenuPosition=new n.a,this.unsubscribeNotifier=new u.a}ngOnInit(){this.loadDiary()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onContextMenu(t,e){this.contextMenuPosition=this.utilsService.openContextMenu(t,this.contextMenu,{item:e})}loadDiary(){this.isLoading=!0,this.diaryService.getAllByDemandId(this.demand.demanda_id).pipe(Object(l.a)(t=>t.filter(t=>this.justToday?r(t.dtOcorrencia).format("YYYY-MM-DD")===r().format("YYYY-MM-DD"):t))).pipe(Object(d.a)(this.unsubscribeNotifier)).subscribe(t=>{this.isLoading=!1,this.dataSource=new s.k(t)},()=>{this.isLoading=!1,this.messageService.snackMessage("Erro ao carregar di\xe1rio!","error"),this.dataSource=new s.k([])})}confirmRemove(t){this.messageService.swalMessage("Deseja realmente excluir o lan\xe7amento no di\xe1rio?","Uma vez feito isso n\xe3o ser\xe1 poss\xedvel desfazer.","question").then(e=>{e.value&&this.remove(t)})}remove(t){this.loadingService.show(),this.diaryService.delete(t.diario_bordo_id).pipe(Object(d.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Di\xe1rio removido com sucesso!","success"),this.loadDiary(),this.diaryService.diaryChanges.next(),this.footerBarHoursService.refresh()},t=>this.errorHandlerService.handleError(t,"Erro ao excluir lan\xe7amento no di\xe1rio!")).add(()=>this.loadingService.hide())}showEditButton(){var t;const e=(null===(t=this.demand.status_demanda)||void 0===t?void 0:t.status_demanda_id)?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id;return e!==o.a.BACKLOG&&e!==o.a.READY_TO_START&&e!==o.a.CANCELLED&&e!==o.a.DONE&&e!==o.a.DELIVERED&&this.allowsEdit}showNewButton(){var t;const e=(null===(t=this.demand.status_demanda)||void 0===t?void 0:t.status_demanda_id)?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id;return e!==o.a.BACKLOG&&e!==o.a.READY_TO_START&&e!==o.a.CANCELLED&&e!==o.a.DONE&&e!==o.a.DELIVERED&&this.allowsCreate&&this.allowsActions}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(m.a),a.Nb(b.a),a.Nb(f.a),a.Nb(h.a),a.Nb(p.a),a.Nb(v.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-diary-list"]],viewQuery:function(t,e){if(1&t&&a.Lc(c.e,!0),2&t){let t;a.tc(t=a.cc())&&(e.contextMenu=t.first)}},inputs:{demand:"demand",justToday:"justToday",allowsCreate:"allowsCreate",allowsEdit:"allowsEdit",allowsRemove:"allowsRemove",allowsActions:"allowsActions"},outputs:{view:"view",edit:"edit",new:"new"},decls:12,vars:11,consts:[[3,"fxLayoutAlign"],["mat-button","","mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],[1,"table-count"],[1,"wrapper-table-scrolling",3,"contextmenu"],["mat-table","",3,"dataSource",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],[4,"ngIf"],["message","Nenhum lan\xe7amento de di\xe1rio cadastrado.",4,"ngIf"],["contextMenu","matMenu"],["matMenuContent",""],["mat-button","","mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rowNumber"],["matColumnDef","dtOcorrencia"],["matColumnDef","classeServico.descricao"],["mat-cell","","class","font-weight-bold",4,"matCellDef"],["matColumnDef","descricao"],["mat-cell","","class","break-line",4,"matCellDef"],["matColumnDef","horas"],["matColumnDef","etcm"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"contextmenu",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-cell","",1,"font-weight-bold"],["mat-cell","",1,"break-line"],[3,"appNumberOfLine","matTooltip"],["mat-header-row",""],["mat-row","",3,"contextmenu"],["message","Nenhum lan\xe7amento de di\xe1rio cadastrado."],["mat-menu-item","",3,"click",4,"ngIf"],["class","button-break-line","disabled","","mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click"],["disabled","","mat-menu-item","",1,"button-break-line"]],template:function(t,e){if(1&t&&(a.Tb(0,"div",0),a.Fc(1,B,4,0,"button",1),a.Tb(2,"p",2),a.Hc(3),a.Sb(),a.Sb(),a.Tb(4,"div",3),a.bc("contextmenu",function(t){return e.allowsActions?e.onContextMenu(t):null}),a.Fc(5,U,24,4,"table",4),a.Ob(6,"div",5),a.Fc(7,$,1,0,"app-loading-spinner",6),a.Fc(8,V,1,0,"app-simple-message",7),a.Sb(),a.Tb(9,"mat-menu",null,8),a.Fc(11,Z,3,3,"ng-template",9),a.Sb()),2&t){const t=a.uc(10);a.mc("fxLayoutAlign","",e.showNewButton()?"space-between":"end"," center my-2"),a.Bb(1),a.lc("ngIf",e.showNewButton()),a.Bb(2),a.Jc("Total de registros: ",e.dataSource?e.dataSource.data.length:0,""),a.Bb(2),a.lc("ngIf",!e.isLoading&&(null==e.dataSource?null:e.dataSource.data.length)>0),a.Bb(1),a.Cc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),a.lc("matMenuTriggerFor",t),a.Bb(1),a.lc("ngIf",e.isLoading),a.Bb(1),a.lc("ngIf",0==(null==e.dataSource?null:e.dataSource.data.length)&&!e.isLoading)}},directives:[g.a,w.l,c.e,c.a,c.b,S.b,T.a,s.j,s.c,s.e,s.b,s.g,s.i,s.d,s.a,D.a,E.a,s.f,s.h,C.a,y.a,c.c,F.a],pipes:[w.e,I.a],styles:[".wrapper-table-scrolling[_ngcontent-%COMP%]{max-height:200px}.wrapper-table-scrolling[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]}),t})()},kRIO:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var o=i("fXoL"),n=i("tk/3"),a=i("yJW+");let s=(()=>{class t{constructor(t,e){this.http=t,this.environmentService=e}create(t){return this.http.post(this.environmentService.getAPI()+"/defeito",t)}update(t,e){return this.http.put(`${this.environmentService.getAPI()}/defeito/${t}`,e)}getById(t){return this.http.get(`${this.environmentService.getAPI()}/defeito/${t}`)}delete(t){return this.http.delete(`${this.environmentService.getAPI()}/defeito/${t}`)}getAllByDemandId(t){return this.http.get(`${this.environmentService.getAPI()}/defeito/demanda/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(n.b),o.Xb(a.a))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},kmKX:function(t,e,i){"use strict";i.d(e,"a",function(){return D});var o=i("Xgew"),n=i("1G5W"),a=i("fXoL"),s=i("3Pt+"),c=i("wd/R"),r=i("XNiG"),l=i("pxkN"),d=i("QLLi"),u=i("CW9h"),m=i("nAk8"),b=i("kh7C"),f=i("kmnG"),h=i("qFsG"),p=i("DJTy"),v=i("RTbq"),g=i("QNEd"),w=i("TT0I"),S=i("Xwk/");const T=function(){return{prefix:"",thousands:".",decimal:","}};let D=(()=>{class t{constructor(t,e,i,o,n,s){this.formBuilder=t,this.blocksService=e,this.messageService=i,this.loadingService=o,this.errorHandlerService=n,this.utilsService=s,this.formWithOneColumn=!1,this.saveEvent=new a.o,this.backEvent=new a.o,this.today=c().format("YYYY-MM-DD"),this.moment=c,this.unsubscribeNotifier=new r.a}ngOnInit(){}ngOnChanges(){this.createForm(),this.item&&this.getItem()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}createForm(){this.form=this.formBuilder.group({demanda:this.formBuilder.group({demanda_id:[this.demand?this.demand.demanda_id:null,[s.t.required]]}),ativo:[!0],descricao:[null],titulo:[null,[s.t.required,s.t.maxLength(200)]],horasBloqueio:[null,[s.t.min(0)]],dtInicio:[this.sprint?c(this.sprint.dtFim).format("YYYY-MM-DD")>this.today?this.today:null:this.today,[s.t.required]],dtFim:[null],dtAbertura:[this.sprint?c(this.sprint.dtFim).format("YYYY-MM-DD")>this.today?this.today:null:this.today,[s.t.required]]}),this.formEnabled||this.form.disable()}getItem(){this.loadingService.show(),this.blocksService.getById(this.item.bloqueio_id).pipe(Object(n.a)(this.unsubscribeNotifier)).subscribe(t=>{this.form.setValue({demanda:{demanda_id:t.demanda.demanda_id},ativo:t.ativo,descricao:t.descricao,titulo:t.titulo,horasBloqueio:t.horasBloqueio,dtInicio:t.dtInicio,dtFim:t.dtFim,dtAbertura:t.dtAbertura})},()=>this.messageService.snackMessage("Erro ao visualizar bloqueio!","error")).add(()=>this.loadingService.hide())}save(){this.utilsService.validForm(this.form)&&(this.item?this.update():this.create())}create(){this.loadingService.show(),this.blocksService.create(this.form.value).pipe(Object(n.a)(this.unsubscribeNotifier)).subscribe(t=>{this.messageService.snackMessage("Bloqueio cadastrado com sucesso!","success"),this.saveEvent.emit({action:o.a.CREATED,item:t})},t=>this.errorHandlerService.handleError(t,"N\xe3o foi poss\xedvel cadastrar o bloqueio!")).add(()=>this.loadingService.hide())}update(){const t=Object.assign({},this.form.value);t.bloqueio_id=this.item.bloqueio_id,this.loadingService.show(),this.blocksService.update(this.item.bloqueio_id,t).pipe(Object(n.a)(this.unsubscribeNotifier)).subscribe(t=>{this.messageService.snackMessage("Bloqueio atualizado com sucesso!","success"),this.saveEvent.emit({action:o.a.UPDATED,item:t})},t=>this.errorHandlerService.handleError(t,"N\xe3o foi poss\xedvel atualizar o bloqueio!")).add(()=>this.loadingService.hide())}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(s.d),a.Nb(l.a),a.Nb(d.a),a.Nb(u.a),a.Nb(m.a),a.Nb(b.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-blocks-form"]],inputs:{item:"item",formEnabled:"formEnabled",demand:"demand",formWithOneColumn:"formWithOneColumn",sprint:"sprint"},outputs:{saveEvent:"saveEvent",backEvent:"backEvent"},features:[a.zb],decls:31,vars:32,consts:[[3,"formGroup"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["appearance","outline","color","primary"],["matInput","","formControlName","titulo","appTrim",""],[3,"control"],["label","Aberto",3,"control","min","max"],["label","In\xedcio",3,"control","min","max"],["label","Fim",3,"control","min","max"],["matInput","","formControlName","horasBloqueio","currencyMask","",3,"options"],["matInput","","formControlName","descricao","appTrim",""],["backButtonLabel","FECHAR",3,"showSaveButton","saveEvent","backEvent"]],template:function(t,e){1&t&&(a.Tb(0,"form",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"div",3),a.Tb(4,"mat-form-field",4),a.Tb(5,"mat-label"),a.Hc(6,"T\xedtulo"),a.Sb(),a.Ob(7,"input",5),a.Tb(8,"mat-error"),a.Ob(9,"app-input-errors",6),a.Sb(),a.Sb(),a.Sb(),a.Tb(10,"div"),a.Ob(11,"app-input-datepicker",7),a.Sb(),a.Tb(12,"div"),a.Ob(13,"app-input-datepicker",8),a.Sb(),a.Tb(14,"div"),a.Ob(15,"app-input-datepicker",9),a.Sb(),a.Tb(16,"div"),a.Tb(17,"mat-form-field",4),a.Tb(18,"mat-label"),a.Hc(19,"Dura\xe7\xe3o em Horas"),a.Sb(),a.Ob(20,"input",10),a.Tb(21,"mat-error"),a.Ob(22,"app-input-errors",6),a.Sb(),a.Sb(),a.Sb(),a.Tb(23,"div",3),a.Tb(24,"mat-form-field",4),a.Tb(25,"mat-label"),a.Hc(26,"Descri\xe7\xe3o"),a.Sb(),a.Ob(27,"textarea",11),a.Tb(28,"mat-error"),a.Ob(29,"app-input-errors",6),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(30,"app-footer-form-buttons",12),a.bc("saveEvent",function(){return e.save()})("backEvent",function(){return e.backEvent.emit()}),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.lc("formGroup",e.form),a.Bb(9),a.lc("control",e.form.get("titulo")),a.Bb(1),a.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),a.Bb(1),a.lc("control",e.form.get("dtAbertura"))("min",e.sprint?e.moment(e.demand.dtRecebimento).format("YYYY-MM-DD")>e.moment(null==e.sprint?null:e.sprint.dtInicio).format("YYYY-MM-DD")?e.moment(e.demand.dtRecebimento).format("YYYY-MM-DD"):e.moment(null==e.sprint?null:e.sprint.dtInicio).format("YYYY-MM-DD"):e.demand.dtRecebimento)("max",e.sprint?e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.today?e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD"):e.today:e.moment(e.form.get("dtInicio").value).format("YYYY-MM-DD")<e.today?e.moment(e.form.get("dtInicio").value).format("YYYY-MM-DD"):e.today),a.Bb(1),a.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),a.Bb(1),a.lc("control",e.form.get("dtInicio"))("min",e.sprint?e.form.get("dtAbertura").value?e.form.get("dtAbertura").value:null==e.sprint?null:e.sprint.dtInicio:e.form.get("dtAbertura").value)("max",e.sprint?e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.today&&e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.moment(e.form.get("dtFim").value).format("YYYY-MM-DD")?e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD"):e.today<e.moment(e.form.get("dtFim").value).format("YYYY-MM-DD")?e.today:e.moment(e.form.get("dtFim").value).format("YYYY-MM-DD"):e.form.get("dtFim").value?e.form.get("dtFim").value:e.today),a.Bb(1),a.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),a.Bb(1),a.lc("control",e.form.get("dtFim"))("min",e.form.get("dtInicio").value?e.form.get("dtInicio").value:null==e.sprint?null:e.sprint.dtInicio)("max",e.sprint&&e.moment(null==e.sprint?null:e.sprint.dtFim).format("YYYY-MM-DD")<e.today?null==e.sprint?null:e.sprint.dtFim:e.today),a.Bb(1),a.Fb("col-lg-3",!e.formWithOneColumn)("col-12",e.formWithOneColumn),a.Bb(4),a.lc("options",a.nc(31,T)),a.Bb(2),a.lc("control",e.form.get("horasBloqueio")),a.Bb(7),a.lc("control",e.form.get("descricao")),a.Bb(1),a.lc("showSaveButton",e.formEnabled))},directives:[s.u,s.p,s.h,f.c,f.f,h.b,s.c,s.o,s.g,p.a,f.b,v.a,g.a,w.a,S.a],styles:[""]}),t})()},pxkN:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var o=i("fXoL"),n=i("tk/3"),a=i("yJW+");let s=(()=>{class t{constructor(t,e){this.http=t,this.environmentService=e}create(t){return this.http.post(this.environmentService.getAPI()+"/bloqueio",t)}update(t,e){return this.http.put(`${this.environmentService.getAPI()}/bloqueio/${t}`,e)}getById(t){return this.http.get(`${this.environmentService.getAPI()}/bloqueio/${t}`)}delete(t){return this.http.delete(`${this.environmentService.getAPI()}/bloqueio/${t}`)}getAllByDemandId(t){return this.http.get(`${this.environmentService.getAPI()}/bloqueio/demanda/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(n.b),o.Xb(a.a))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},tHDH:function(t,e,i){"use strict";i.d(e,"a",function(){return ut});var o=i("VQGR"),n=i("0IaG"),a=i("e3yB"),s=i("fXoL"),c=i("TXJc"),r=i("ofXK"),l=i("z/S5"),d=i("1G5W"),u=i("+0xr"),m=i("STbY"),b=i("XNiG"),f=i("kRIO"),h=i("QLLi"),p=i("CW9h"),v=i("nAk8"),g=i("kh7C"),w=i("LGGl"),S=i("XiUz"),T=i("bTqV"),D=i("NFeN"),E=i("Qu3c"),C=i("hh1q"),y=i("zoH9"),F=i("zGX+"),I=i("f0Cb"),B=i("9Ovz");function O(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",10),s.bc("click",function(){return s.xc(t),s.fc().new.emit()}),s.Tb(1,"mat-icon"),s.Hc(2,"add_circle_outline"),s.Sb(),s.Hc(3," NOVO DEFEITO "),s.Sb()}}function k(t,e){1&t&&s.Ob(0,"th",27)}function N(t,e){if(1&t){const t=s.Ub();s.Tb(0,"td",28),s.Tb(1,"button",29),s.bc("click",function(i){s.xc(t);const o=e.$implicit;return s.fc(2).onContextMenu(i,o)}),s.Tb(2,"mat-icon"),s.Hc(3,"more_vert"),s.Sb(),s.Sb(),s.Sb()}}function M(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"#"),s.Sb())}function x(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.Sb()),2&t){const t=e.index;s.Bb(1),s.Jc(" ",t+1," ")}}function H(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Data Abertura"),s.Sb())}function R(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.gc(2,"date"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",s.ic(2,1,t.dtAbertura,"dd/MM/yy")," ")}}function Y(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Titulo"),s.Sb())}function _(t,e){if(1&t&&(s.Tb(0,"td",30),s.Tb(1,"span",31),s.Hc(2),s.Sb(),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.lc("matTooltip",t.titulo)("appNumberOfLine",3),s.Bb(1),s.Jc(" ",t.titulo," ")}}function A(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Tipo"),s.Sb())}function L(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.Sb()),2&t){const t=e.$implicit,i=s.fc(2);s.Bb(1),s.Jc(" ",i.typeDefectsService.getDescriptionOfType(t.tipoDefeito)," ")}}function q(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Status"),s.Sb())}function P(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",t.statusDefeito.descricao," ")}}function Q(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Procedente"),s.Sb())}function G(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",t.procedente?"SIM":"N\xc3O"," ")}}function W(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Horas"),s.Sb())}function U(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.gc(2,"decimalNumber"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Ic(s.hc(2,1,t.horas))}}function $(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Data Inicio"),s.Sb())}function V(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.gc(2,"date"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",s.ic(2,1,t.dtInicio,"dd/MM/yy")," ")}}function X(t,e){1&t&&(s.Tb(0,"th",27),s.Hc(1,"Data Fim"),s.Sb())}function J(t,e){if(1&t&&(s.Tb(0,"td",28),s.Hc(1),s.gc(2,"date"),s.Sb()),2&t){const t=e.$implicit;s.Bb(1),s.Jc(" ",s.ic(2,1,t.dtFim,"dd/MM/yy")," ")}}function z(t,e){1&t&&s.Ob(0,"tr",32)}function j(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr",33),s.bc("contextmenu",function(i){s.xc(t);const o=e.$implicit,n=s.fc(2);return n.allowsActions?n.onContextMenu(i,o):null}),s.Sb()}}function K(t,e){if(1&t&&(s.Tb(0,"table",11),s.Rb(1,12),s.Fc(2,k,1,0,"th",13),s.Fc(3,N,4,0,"td",14),s.Qb(),s.Rb(4,15),s.Fc(5,M,2,0,"th",13),s.Fc(6,x,2,1,"td",14),s.Qb(),s.Rb(7,16),s.Fc(8,H,2,0,"th",13),s.Fc(9,R,3,4,"td",14),s.Qb(),s.Rb(10,17),s.Fc(11,Y,2,0,"th",13),s.Fc(12,_,3,3,"td",18),s.Qb(),s.Rb(13,19),s.Fc(14,A,2,0,"th",13),s.Fc(15,L,2,1,"td",14),s.Qb(),s.Rb(16,20),s.Fc(17,q,2,0,"th",13),s.Fc(18,P,2,1,"td",14),s.Qb(),s.Rb(19,21),s.Fc(20,Q,2,0,"th",13),s.Fc(21,G,2,1,"td",14),s.Qb(),s.Rb(22,22),s.Fc(23,W,2,0,"th",13),s.Fc(24,U,3,3,"td",14),s.Qb(),s.Rb(25,23),s.Fc(26,$,2,0,"th",13),s.Fc(27,V,3,4,"td",14),s.Qb(),s.Rb(28,24),s.Fc(29,X,2,0,"th",13),s.Fc(30,J,3,4,"td",14),s.Qb(),s.Fc(31,z,1,0,"tr",25),s.Fc(32,j,1,0,"tr",26),s.Sb()),2&t){const t=s.fc();s.lc("dataSource",t.dataSource),s.Bb(31),s.lc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),s.Bb(1),s.lc("matRowDefColumns",t.displayedColumns)}}function Z(t,e){1&t&&s.Ob(0,"app-loading-spinner")}function tt(t,e){1&t&&s.Ob(0,"app-simple-message",34)}function et(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",37),s.bc("click",function(){s.xc(t);const e=s.fc(2).item;return s.fc().edit.emit(e)}),s.Tb(1,"mat-icon"),s.Hc(2,"edit"),s.Sb(),s.Hc(3," Editar defeito "),s.Sb()}}function it(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",37),s.bc("click",function(){s.xc(t);const e=s.fc(2).item;return s.fc().confirmRemove(e)}),s.Tb(1,"mat-icon"),s.Hc(2,"delete_outline"),s.Sb(),s.Hc(3," Remover defeito "),s.Sb()}}function ot(t,e){if(1&t){const t=s.Ub();s.Rb(0),s.Tb(1,"button",37),s.bc("click",function(){s.xc(t);const e=s.fc().item;return s.fc().view.emit(e)}),s.Tb(2,"mat-icon"),s.Hc(3,"remove_red_eye"),s.Sb(),s.Hc(4," Visualizar defeito "),s.Sb(),s.Fc(5,et,4,0,"button",35),s.Fc(6,it,4,0,"button",35),s.Ob(7,"mat-divider"),s.Qb()}if(2&t){const t=s.fc().item,e=s.fc();s.Bb(5),s.lc("ngIf",e.showEditButton(t)),s.Bb(1),s.lc("ngIf",e.allowsRemove)}}function nt(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",37),s.bc("click",function(){return s.xc(t),s.fc(2).new.emit()}),s.Tb(1,"mat-icon"),s.Hc(2,"add_circle_outline"),s.Sb(),s.Hc(3," Novo defeito "),s.Sb()}}function at(t,e){1&t&&(s.Tb(0,"button",38),s.Hc(1," Nenhuma a\xe7\xe3o dispon\xedvel :/ "),s.Sb())}function st(t,e){if(1&t&&(s.Fc(0,ot,8,2,"ng-container",6),s.Fc(1,nt,4,0,"button",35),s.Fc(2,at,2,0,"button",36)),2&t){const t=e.item,i=s.fc();s.lc("ngIf",t),s.Bb(1),s.lc("ngIf",i.showNewButton()),s.Bb(1),s.lc("ngIf",!t&&!i.showNewButton())}}let ct=(()=>{class t{constructor(t,e,i,o,n,a){this.defectsService=t,this.messageService=e,this.loadingService=i,this.errorHandlerService=o,this.utilsService=n,this.typeDefectsService=a,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsRemove=!0,this.allowsActions=!0,this.view=new s.o,this.edit=new s.o,this.new=new s.o,this.displayedColumns=[],this.contextMenuPosition=new l.a,this.unsubscribeNotifier=new b.a}ngOnInit(){this.displayedColumns=this.allowsActions?["actions","rowNumber","dtAbertura","titulo","tipo_defeito","status","horas","dtInicio","dtFim","procedente"]:["rowNumber","dtAbertura","titulo","tipo_defeito","status","horas","dtInicio","dtFim","procedente"],this.loadDefects()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onContextMenu(t,e){this.contextMenuPosition=this.utilsService.openContextMenu(t,this.contextMenu,{item:e})}loadDefects(){this.isLoading=!0,this.defectsService.getAllByDemandId(this.demand.demanda_id).pipe(Object(d.a)(this.unsubscribeNotifier)).subscribe(t=>{this.isLoading=!1,this.dataSource=new u.k(t)},()=>{this.isLoading=!1,this.messageService.snackMessage("Erro ao listar defeitos!","error"),this.dataSource=new u.k([])})}confirmRemove(t){this.messageService.swalMessage("Deseja realmente excluir o defeito?","Uma vez feito isso n\xe3o ser\xe1 poss\xedvel desfazer.","question").then(e=>{e.value&&this.remove(t)})}remove(t){this.loadingService.show(),this.defectsService.delete(t.defeito_id).pipe(Object(d.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Defeito removido com sucesso!","success"),this.loadDefects()},t=>this.errorHandlerService.handleError(t,"Erro ao excluir defeito!")).add(()=>this.loadingService.hide())}showEditButton(t){var e;const i=(null===(e=this.demand.status_demanda)||void 0===e?void 0:e.status_demanda_id)?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id;return this.allowsEdit&&(t&&i!==o.a.DONE&&i!==o.a.DELIVERED||t&&"E"===t.tipoDefeito)}showNewButton(){var t;return((null===(t=this.demand.status_demanda)||void 0===t?void 0:t.status_demanda_id)?this.demand.status_demanda.status_demanda_id:this.demand.status_demanda_id)!==o.a.CANCELLED&&this.allowsCreate&&this.allowsActions}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(f.a),s.Nb(h.a),s.Nb(p.a),s.Nb(v.a),s.Nb(g.a),s.Nb(w.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-defects-list"]],viewQuery:function(t,e){if(1&t&&s.Lc(m.e,!0),2&t){let t;s.tc(t=s.cc())&&(e.contextMenu=t.first)}},inputs:{demand:"demand",allowsCreate:"allowsCreate",allowsEdit:"allowsEdit",allowsRemove:"allowsRemove",allowsActions:"allowsActions"},outputs:{view:"view",edit:"edit",new:"new"},decls:12,vars:11,consts:[[3,"fxLayoutAlign"],["mat-button","","mat-raised-button","","class","btn btn-success",3,"click",4,"ngIf"],[1,"table-count"],[1,"wrapper-table-scrolling",3,"contextmenu"],["mat-table","",3,"dataSource",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],[4,"ngIf"],["message","Nenhum defeito cadastrado.",4,"ngIf"],["contextMenu","matMenu"],["matMenuContent",""],["mat-button","","mat-raised-button","",1,"btn","btn-success",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rowNumber"],["matColumnDef","dtAbertura"],["matColumnDef","titulo"],["mat-cell","","class","break-line",4,"matCellDef"],["matColumnDef","tipo_defeito"],["matColumnDef","status"],["matColumnDef","procedente"],["matColumnDef","horas"],["matColumnDef","dtInicio"],["matColumnDef","dtFim"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"contextmenu",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-cell","",1,"break-line"],[1,"font-weight-bold",3,"matTooltip","appNumberOfLine"],["mat-header-row",""],["mat-row","",3,"contextmenu"],["message","Nenhum defeito cadastrado."],["mat-menu-item","",3,"click",4,"ngIf"],["class","button-break-line","disabled","","mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click"],["disabled","","mat-menu-item","",1,"button-break-line"]],template:function(t,e){if(1&t&&(s.Tb(0,"div",0),s.Fc(1,O,4,0,"button",1),s.Tb(2,"p",2),s.Hc(3),s.Sb(),s.Sb(),s.Tb(4,"div",3),s.bc("contextmenu",function(t){return e.allowsActions?e.onContextMenu(t):null}),s.Fc(5,K,33,4,"table",4),s.Ob(6,"div",5),s.Fc(7,Z,1,0,"app-loading-spinner",6),s.Fc(8,tt,1,0,"app-simple-message",7),s.Sb(),s.Tb(9,"mat-menu",null,8),s.Fc(11,st,3,3,"ng-template",9),s.Sb()),2&t){const t=s.uc(10);s.mc("fxLayoutAlign","",e.showNewButton()?"space-between":"end"," center my-2"),s.Bb(1),s.lc("ngIf",e.showNewButton()),s.Bb(2),s.Jc("Total de registros: ",e.dataSource?e.dataSource.data.length:0,""),s.Bb(2),s.lc("ngIf",!e.isLoading&&(null==e.dataSource?null:e.dataSource.data.length)>0),s.Bb(1),s.Cc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),s.lc("matMenuTriggerFor",t),s.Bb(1),s.lc("ngIf",e.isLoading),s.Bb(1),s.lc("ngIf",0==(null==e.dataSource?null:e.dataSource.data.length)&&!e.isLoading)}},directives:[S.a,r.l,m.e,m.a,m.b,T.b,D.a,u.j,u.c,u.e,u.b,u.g,u.i,u.d,u.a,E.a,C.a,u.f,u.h,y.a,F.a,m.c,I.a],pipes:[r.e,B.a],styles:[".wrapper-table-scrolling[_ngcontent-%COMP%]{max-height:200px}.wrapper-table-scrolling[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]}),t})();var rt=i("b5/5");function lt(t,e){if(1&t){const t=s.Ub();s.Tb(0,"app-defects-list",5),s.bc("new",function(){return s.xc(t),s.fc().create()})("view",function(e){return s.xc(t),s.fc().view(e)})("edit",function(e){return s.xc(t),s.fc().edit(e)}),s.Sb()}if(2&t){const t=s.fc();s.lc("demand",t.demand)("allowsCreate",t.allowsCreate)("allowsEdit",t.allowsEdit)("allowsRemove",t.allowsRemove)}}function dt(t,e){if(1&t){const t=s.Ub();s.Tb(0,"app-defects-form",6),s.bc("saveEvent",function(){return s.xc(t),s.fc().back()})("backEvent",function(){return s.xc(t),s.fc().back()}),s.Sb()}if(2&t){const t=s.fc();s.lc("demand",t.demand)("item",t.item)("sprint",t.demand.sprint)("formEnabled",t.formEnabled)}}let ut=(()=>{class t extends a.a{constructor(t,e){super(),this.data=t,this.dialogRef=e,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsRemove=!0,this.demandStatus=o.a}ngOnInit(){this.demand=this.data.demand,this.data.hasOwnProperty("allowsCreate")&&(this.allowsCreate=this.data.allowsCreate),this.data.hasOwnProperty("allowsEdit")&&(this.allowsEdit=this.data.allowsEdit),this.data.hasOwnProperty("allowsRemove")&&(this.allowsRemove=this.data.allowsRemove)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(n.a),s.Nb(n.e))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-defects"]],features:[s.yb],decls:5,vars:3,consts:[["subTitle","Defeitos",3,"title","closeEvent"],[1,"row"],[1,"col-12"],[3,"demand","allowsCreate","allowsEdit","allowsRemove","new","view","edit",4,"ngIf"],[3,"demand","item","sprint","formEnabled","saveEvent","backEvent",4,"ngIf"],[3,"demand","allowsCreate","allowsEdit","allowsRemove","new","view","edit"],[3,"demand","item","sprint","formEnabled","saveEvent","backEvent"]],template:function(t,e){1&t&&(s.Tb(0,"app-modal-layout",0),s.bc("closeEvent",function(){return e.dialogRef.close()}),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Fc(3,lt,1,4,"app-defects-list",3),s.Fc(4,dt,1,4,"app-defects-form",4),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.lc("title",e.demand.titulo),s.Bb(3),s.lc("ngIf",e.showList),s.Bb(1),s.lc("ngIf",!e.showList))},directives:[c.a,r.l,ct,rt.a],styles:[""]}),t})()},zeBE:function(t,e,i){"use strict";i.d(e,"a",function(){return m});var o=i("0IaG"),n=i("e3yB"),a=i("fXoL"),s=i("TXJc"),c=i("ofXK"),r=i("kMJb"),l=i("GdB0");function d(t,e){if(1&t){const t=a.Ub();a.Tb(0,"app-diary-list",5),a.bc("new",function(){return a.xc(t),a.fc().create()})("view",function(e){return a.xc(t),a.fc().view(e)})("edit",function(e){return a.xc(t),a.fc().edit(e)}),a.Sb()}if(2&t){const t=a.fc();a.lc("demand",t.demand)("allowsCreate",t.allowsCreate)("allowsEdit",t.allowsEdit)("allowsRemove",t.allowsRemove)}}function u(t,e){if(1&t){const t=a.Ub();a.Tb(0,"app-diary-form",6),a.bc("saveEvent",function(){return a.xc(t),a.fc().back()})("backEvent",function(){return a.xc(t),a.fc().back()}),a.Sb()}if(2&t){const t=a.fc();a.lc("demand",t.demand)("item",t.item)("formEnabled",t.formEnabled)("sprint",t.demand.sprint)}}let m=(()=>{class t extends n.a{constructor(t,e){super(),this.data=t,this.dialogRef=e,this.allowsCreate=!0,this.allowsEdit=!0,this.allowsRemove=!0}ngOnInit(){this.demand=this.data.demand,this.data.hasOwnProperty("allowsCreate")&&(this.allowsCreate=this.data.allowsCreate),this.data.hasOwnProperty("allowsEdit")&&(this.allowsEdit=this.data.allowsEdit),this.data.hasOwnProperty("allowsRemove")&&(this.allowsRemove=this.data.allowsRemove)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(o.a),a.Nb(o.e))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-diary"]],features:[a.yb],decls:5,vars:3,consts:[["subTitle","Di\xe1rios",3,"title","closeEvent"],[1,"row"],[1,"col-12"],[3,"demand","allowsCreate","allowsEdit","allowsRemove","new","view","edit",4,"ngIf"],[3,"demand","item","formEnabled","sprint","saveEvent","backEvent",4,"ngIf"],[3,"demand","allowsCreate","allowsEdit","allowsRemove","new","view","edit"],[3,"demand","item","formEnabled","sprint","saveEvent","backEvent"]],template:function(t,e){1&t&&(a.Tb(0,"app-modal-layout",0),a.bc("closeEvent",function(){return e.dialogRef.close()}),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Fc(3,d,1,4,"app-diary-list",3),a.Fc(4,u,1,4,"app-diary-form",4),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.lc("title",e.demand.titulo),a.Bb(3),a.lc("ngIf",e.showList),a.Bb(1),a.lc("ngIf",!e.showList))},directives:[s.a,c.l,r.a,l.a],styles:[""]}),t})()}}]);