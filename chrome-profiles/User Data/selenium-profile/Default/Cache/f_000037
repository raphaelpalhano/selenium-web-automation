(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{IAk5:function(e,t,i){"use strict";i.r(t),i.d(t,"DashboardModule",function(){return Nn});var n=i("qxEu"),s=i("ofXK"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})();var r=i("PCNd"),c=i("tyNb"),l=i("1G5W"),d=i("XNiG"),p=i("BzqV"),b=i("tk/3"),m=i("yJW+");let h=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t,this.onComponentRemoved=new d.a}listAllComponents(){return this.http.get(this.environmentService.getAPI()+"/componentes/all")}addComponentToPerson(e,t){const i={ativo:!0,componente:{componente_id:e},pessoa:{pessoa_id:t}};return this.http.post(this.environmentService.getAPI()+"/pessoa-componentes",i)}removeComponentOfPerson(e){return this.http.put(`${this.environmentService.getAPI()}/pessoa-componentes/${e}/ativo/false`,{})}listComponentsByPerson(e){return this.http.get(`${this.environmentService.getAPI()}/pessoa-componentes/${e}`)}getComponentParams(e){return this.http.get(this.environmentService.getAPI()+"/componente-parametros/"+e)}componentOnTheDashboard(e,t){return t?t.find(t=>t.componente.componente_id===e):null}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=i("PS72");const f=["*"];let g=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-blank-layout"]],ngContentSelectors:f,decls:4,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"]],template:function(e,t){1&e&&(o.kc(),o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.jc(3),o.Sb(),o.Sb(),o.Sb())},styles:[""]}),e})();var v=i("XhcP"),S=i("bTqV"),O=i("Qu3c"),I=i("NFeN"),C=function(e){return e[e.NUMBER_PROFESSIONALS_MY_CLIENT=1]="NUMBER_PROFESSIONALS_MY_CLIENT",e[e.NUMBER_PROFESSIONALS_MY_LINE=3]="NUMBER_PROFESSIONALS_MY_LINE",e[e.NUMBER_PROFESSIONALS_MY_CELL=2]="NUMBER_PROFESSIONALS_MY_CELL",e[e.HOUR_MAP=4]="HOUR_MAP",e[e.RISK_CALCULATED=5]="RISK_CALCULATED",e[e.DELAYED_DEMANDS=6]="DELAYED_DEMANDS",e[e.DASH_EXECUTIVE=7]="DASH_EXECUTIVE",e}({});let D=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}getNumberOfProfessionalsByClient(e){return this.http.get(`${this.environmentService.getAPI()}/dashboard/qtdProfissionais/cliente/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=i("QLLi"),T=i("nAk8"),w=i("CW9h"),y=i("JK/P"),x=i("AGUC");const E=["dialog"];function P(e,t){1&e&&o.Pb(0)}function A(e,t){if(1&e&&(o.Rb(0),o.Fc(1,P,1,0,"ng-container",3),o.Qb()),2&e){o.fc();const e=o.uc(4);o.Bb(1),o.lc("ngTemplateOutlet",e)}}function M(e,t){1&e&&o.Pb(0)}function L(e,t){if(1&e&&o.Fc(0,M,1,0,"ng-container",3),2&e){o.fc();const e=o.uc(4);o.lc("ngTemplateOutlet",e)}}function N(e,t){if(1&e){const e=o.Ub();o.Tb(0,"app-windows-actions",13),o.bc("closeEvent",function(){return o.xc(e),o.fc(2).confirmRemoveComponent()})("maximize",function(){return o.xc(e),o.fc(2).onMaximize()})("minimize",function(){return o.xc(e),o.fc(2).onMinimize()}),o.Sb()}if(2&e){const e=o.fc(2);o.lc("showMaximize",e.showMaximize&&!e.maximized)("showMinimize",e.maximized)("showClose",e.showClose&&!e.maximized)}}function F(e,t){if(1&e&&(o.Tb(0,"div",4),o.Tb(1,"div",5),o.Tb(2,"div",6),o.Tb(3,"h4",7),o.Hc(4),o.Sb(),o.Tb(5,"h6",8),o.Hc(6),o.Sb(),o.Sb(),o.Fc(7,N,1,3,"app-windows-actions",9),o.Sb(),o.Ob(8,"hr"),o.Tb(9,"div",10),o.Tb(10,"div",11),o.Tb(11,"div",12),o.jc(12),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e){const e=o.fc();o.Cc("margin-top",e.maximized?"0px":"16px")("margin-bottom",e.maximized?"0px":"16px"),o.Bb(4),o.Ic(e.title),o.Bb(2),o.Ic(e.subtitle),o.Bb(1),o.lc("ngIf",e.showActions)}}const R=["*"];let B=(()=>{class e{constructor(e,t,i,n,s){this.messageService=e,this.dashboardService=t,this.errorHandlerService=i,this.loadingService=n,this.modalService=s,this.showClose=!0,this.showMaximize=!0,this.showActions=!0,this.maximize=new o.o,this.minimize=new o.o,this.remove=new o.o,this.maximized=!1,this.unsubscribeNotifier=new d.a}ngOnInit(){}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onMaximize(){this.maximized=!0,this.maximize.emit(),this.modalRef=this.modalService.open(this.template,{},{height:"100%",width:"100%",maxHeight:"100%",maxWidth:"100%",customClass:"modal-without-padding"}),this.modalRef.afterClosed().pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>this.maximized=!1)}onMinimize(){this.maximized=!1,this.modalRef.close(),this.minimize.emit()}confirmRemoveComponent(){this.messageService.swalMessage("Confirma a exclus\xe3o desse indicador da sua dashboard?","","question").then(e=>{e.value&&this.removeComponent()})}removeComponent(){this.loadingService.show(),this.dashboardService.removeComponentOfPerson(this.person_component_id).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Indicador removido com sucesso!","success"),this.dashboardService.onComponentRemoved.next(),this.remove.emit()},e=>this.errorHandlerService.handleError(e,"Erro ao remover indicador!")).add(()=>this.loadingService.hide())}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(_.a),o.Nb(h),o.Nb(T.a),o.Nb(w.a),o.Nb(y.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-wrapper-dashboard-component"]],viewQuery:function(e,t){if(1&e&&o.Lc(E,!0),2&e){let e;o.tc(e=o.cc())&&(t.template=e.first)}},inputs:{person_component_id:"person_component_id",title:"title",subtitle:"subtitle",showClose:"showClose",showMaximize:"showMaximize",showActions:"showActions"},outputs:{maximize:"maximize",minimize:"minimize",remove:"remove"},ngContentSelectors:R,decls:5,vars:1,consts:[[4,"ngIf"],["dialog",""],["wrapper",""],[4,"ngTemplateOutlet"],[1,"wrapper-card"],[1,"d-flex","justify-content-between","align-content-center"],[1,"mr-2"],[1,"title"],[1,"subtitle"],[3,"showMaximize","showMinimize","showClose","closeEvent","maximize","minimize",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[3,"showMaximize","showMinimize","showClose","closeEvent","maximize","minimize"]],template:function(e,t){1&e&&(o.kc(),o.Fc(0,A,2,1,"ng-container",0),o.Fc(1,L,1,1,"ng-template",null,1,o.Gc),o.Fc(3,F,13,7,"ng-template",null,2,o.Gc)),2&e&&o.lc("ngIf",!t.maximized)},directives:[s.l,s.q,x.a],styles:[".wrapper-card[_ngcontent-%COMP%]{width:100%;height:auto;background:#fff;padding:12px 12px 18px;border-radius:1rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.wrapper-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;line-height:24px;font-weight:600;margin:0}.wrapper-card[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-weight:400;margin:0}"]}),e})();var H=i("ZRpM"),Y=i("zoH9");function z(e,t){if(1&e&&o.Ob(0,"app-card-info",3),2&e){const e=o.fc();o.lc("value",e.thereIsAnError?"ERRO":e.numberProfessionals)("description",e.thereIsAnError?"":"PROFISSIONAIS")}}function k(e,t){1&e&&o.Ob(0,"app-loading-spinner")}let U=(()=>{class e{constructor(e,t){this.loggedUserService=e,this.numberPeopleMyClientService=t,this.unsubscribeNotifier=new d.a}ngOnInit(){this.clientDescription=this.loggedUserService.getClientDescription(),this.clientId=this.loggedUserService.getClientId(),this.getNumberProfessionals()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}getNumberProfessionals(){this.isLoading=!0,this.thereIsAnError=null,this.numberPeopleMyClientService.getNumberOfProfessionalsByClient(this.clientId).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.numberProfessionals=e&&e[0]?e[0].quantidade_profissionais:0,()=>this.thereIsAnError=!0).add(()=>this.isLoading=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(u.a),o.Nb(D))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-number-people-my-client"]],inputs:{person_component_id:"person_component_id"},decls:3,vars:5,consts:[["subtitle","Quantidade de profissionais",3,"title","showMaximize","person_component_id"],[3,"value","description",4,"ngIf"],[4,"ngIf"],[3,"value","description"]],template:function(e,t){1&e&&(o.Tb(0,"app-wrapper-dashboard-component",0),o.Fc(1,z,1,2,"app-card-info",1),o.Fc(2,k,1,0,"app-loading-spinner",2),o.Sb()),2&e&&(o.lc("title","Cliente: "+t.clientDescription)("showMaximize",!1)("person_component_id",t.person_component_id),o.Bb(1),o.lc("ngIf",!t.isLoading),o.Bb(1),o.lc("ngIf",t.isLoading))},directives:[B,s.l,H.a,Y.a],styles:[""]}),e})(),j=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}getNumberOfProfessionalsByLine(e){return this.http.get(`${this.environmentService.getAPI()}/dashboard/qtdProfissionaisAtivosLinha/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function q(e,t){if(1&e&&o.Ob(0,"app-card-info",3),2&e){const e=o.fc();o.lc("value",e.thereIsAnError?"ERRO":e.numberProfessionals)("description",e.thereIsAnError?"":"PROFISSIONAIS")}}function X(e,t){1&e&&o.Ob(0,"app-loading-spinner")}let $=(()=>{class e{constructor(e,t){this.loggedUserService=e,this.numberPeopleMyLineService=t,this.unsubscribeNotifier=new d.a}ngOnInit(){this.lineDescription=this.loggedUserService.getLineDescription(),this.lineId=this.loggedUserService.getLineId(),this.getNumberProfessionals()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}getNumberProfessionals(){this.isLoading=!0,this.thereIsAnError=null,this.numberPeopleMyLineService.getNumberOfProfessionalsByLine(this.lineId).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.numberProfessionals=e&&e[0]?e[0].quantidade:0,()=>this.thereIsAnError=!0).add(()=>this.isLoading=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(u.a),o.Nb(j))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-number-people-my-line"]],inputs:{person_component_id:"person_component_id"},decls:3,vars:5,consts:[["subtitle","Quantidade de profissionais",3,"title","showMaximize","person_component_id"],[3,"value","description",4,"ngIf"],[4,"ngIf"],[3,"value","description"]],template:function(e,t){1&e&&(o.Tb(0,"app-wrapper-dashboard-component",0),o.Fc(1,q,1,2,"app-card-info",1),o.Fc(2,X,1,0,"app-loading-spinner",2),o.Sb()),2&e&&(o.lc("title","Linha: "+t.lineDescription)("showMaximize",!1)("person_component_id",t.person_component_id),o.Bb(1),o.lc("ngIf",!t.isLoading),o.Bb(1),o.lc("ngIf",t.isLoading))},directives:[B,s.l,H.a,Y.a],styles:[""]}),e})(),Q=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}getNumberOfProfessionalsByCell(e){return this.http.get(`${this.environmentService.getAPI()}/dashboard/qtdProfissionaisAtivosCelula/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function V(e,t){if(1&e&&o.Ob(0,"app-card-info",3),2&e){const e=o.fc();o.lc("value",e.thereIsAnError?"ERRO":e.numberProfessionals)("description",e.thereIsAnError?"":"PROFISSIONAIS")}}function J(e,t){1&e&&o.Ob(0,"app-loading-spinner")}let G=(()=>{class e{constructor(e,t){this.loggedUserService=e,this.numberPeopleMyCellService=t,this.unsubscribeNotifier=new d.a}ngOnInit(){this.cellDescription=this.loggedUserService.getCellDescription(),this.cellId=this.loggedUserService.getCellId(),this.getNumberProfessionals()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}getNumberProfessionals(){this.isLoading=!0,this.thereIsAnError=null,this.numberPeopleMyCellService.getNumberOfProfessionalsByCell(this.cellId).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.numberProfessionals=e&&e[0]?e[0].quantidade:0,()=>this.thereIsAnError=!0).add(()=>this.isLoading=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(u.a),o.Nb(Q))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-number-people-my-cell"]],inputs:{person_component_id:"person_component_id"},decls:3,vars:5,consts:[["subtitle","Quantidade de profissionais",3,"title","showMaximize","person_component_id"],[3,"value","description",4,"ngIf"],[4,"ngIf"],[3,"value","description"]],template:function(e,t){1&e&&(o.Tb(0,"app-wrapper-dashboard-component",0),o.Fc(1,V,1,2,"app-card-info",1),o.Fc(2,J,1,0,"app-loading-spinner",2),o.Sb()),2&e&&(o.lc("title","C\xe9lula: "+t.cellDescription)("showMaximize",!1)("person_component_id",t.person_component_id),o.Bb(1),o.lc("ngIf",!t.isLoading),o.Bb(1),o.lc("ngIf",t.isLoading))},directives:[B,s.l,H.a,Y.a],styles:[""]}),e})();var K=i("wd/R");let W=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}getDashExecutive(e,t){const i={};t.dtInicio&&(t.dtInicio=K(t.dtInicio).format("YYYY-MM-DD")),t.dtFim&&(t.dtFim=K(t.dtFim).format("YYYY-MM-DD"));for(const n in t)null!=t[n]&&""!==t[n]&&(i[n]=t[n]);return this.http.get(`${this.environmentService.getAPI()}/dashboard/${e}/dashboard-executivo`,{params:i})}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Z=i("3Pt+"),ee=i("7EHt"),te=i("DPZW"),ie=i("QNEd"),ne=i("83k4"),se=i("Qvf+"),oe=i("uqSV"),ae=i("/LKV"),re=i("C6S7"),ce=i("azXh"),le=i("YR47");const de=["matExpansionPanel"];let pe=(()=>{class e{constructor(e,t){this.formBuilder=e,this.loggedUserService=t,this.filterEvent=new o.o,this.matExpansionExpanded=!0}ngOnInit(){this.createForm(),this.form.valid&&(this.matExpansionExpanded=!1,this.filterEvent.emit(this.form.getRawValue()))}createForm(){const e=e=>this.componentsParams.find(t=>t.vr_chave===e);this.form=this.formBuilder.group({clienteId:[e("clienteId")?Number(e("clienteId").valor):this.loggedUserService.getClientId(),[Z.t.required]],linhaId:[e("linhaId")?Number(e("linhaId").valor):this.loggedUserService.getLineId(),[Z.t.required]],dtInicio:[e("dtInicio")?K(e("dtInicio").valor).format("YYYY-MM-DD"):null,[Z.t.required]],dtFim:[e("dtFim")?K(e("dtFim").valor).format("YYYY-MM-DD"):null,[Z.t.required]],statusDemandaId:[e("statusDemandaId")?Number(e("statusDemandaId").valor):null],liderId:[e("liderId")?Number(e("liderId").valor):null],squadId:[e("squadId")?Number(e("squadId").valor):null],desenvolvedorId:[e("desenvolvedorId")?Number(e("desenvolvedorId").valor):null],tecnologiaId:[e("tecnologiaId")?Number(e("tecnologiaId").valor):null],codigoRisco:[e("codigoRisco")?e("codigoRisco").valor:null]})}filter(){this.filterEvent.emit(this.form.getRawValue()),this.matExpansionPanel.close()}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(Z.d),o.Nb(u.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-dashboard-executive-filters"]],viewQuery:function(e,t){if(1&e&&o.Lc(de,!0),2&e){let e;o.tc(e=o.cc())&&(t.matExpansionPanel=e.first)}},inputs:{componentsParams:"componentsParams"},outputs:{filterEvent:"filterEvent"},decls:29,vars:20,consts:[[3,"expanded"],["matExpansionPanel",""],[3,"formGroup"],[1,"row"],["clientSize","col-lg-6","lineSize","col-lg-6",3,"clientControl","lineControl"],[1,"col-lg-4"],["label","Data in\xedcio",3,"control","max"],["label","Data fim",3,"control","min"],[3,"control"],[1,"col-lg-6"],["from","squads",3,"control","byLine","idLine"],[3,"control","idLine","idLeader"],[3,"control","idSquad"],[1,"col-lg-3"],[3,"form","filterEvent"]],template:function(e,t){1&e&&(o.Tb(0,"mat-accordion"),o.Tb(1,"mat-expansion-panel",0,1),o.Tb(3,"mat-expansion-panel-header"),o.Tb(4,"mat-panel-title"),o.Hc(5," Filtros "),o.Sb(),o.Tb(6,"mat-panel-description"),o.Tb(7,"mat-icon"),o.Hc(8,"filter_list"),o.Sb(),o.Sb(),o.Sb(),o.Tb(9,"form",2),o.Tb(10,"div",3),o.Ob(11,"app-select-client-and-line-from-allocation",4),o.Tb(12,"div",5),o.Ob(13,"app-input-datepicker",6),o.Sb(),o.Tb(14,"div",5),o.Ob(15,"app-input-datepicker",7),o.Sb(),o.Tb(16,"div",5),o.Ob(17,"app-select-demand-status",8),o.Sb(),o.Tb(18,"div",9),o.Ob(19,"app-select-leader",10),o.Sb(),o.Tb(20,"div",9),o.Ob(21,"app-select-squad",11),o.Sb(),o.Tb(22,"div",9),o.Ob(23,"app-select-allocation-dev-by-squad",12),o.Sb(),o.Tb(24,"div",13),o.Ob(25,"app-select-technology",8),o.Sb(),o.Tb(26,"div",13),o.Ob(27,"app-select-risk",8),o.Sb(),o.Sb(),o.Tb(28,"app-filters-buttons",14),o.bc("filterEvent",function(){return t.filter()}),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(1),o.lc("expanded",t.matExpansionExpanded),o.Bb(8),o.lc("formGroup",t.form),o.Bb(2),o.lc("clientControl",t.form.get("clienteId"))("lineControl",t.form.get("linhaId")),o.Bb(2),o.lc("control",t.form.get("dtInicio"))("max",t.form.get("dtFim").value),o.Bb(2),o.lc("control",t.form.get("dtFim"))("min",t.form.get("dtInicio").value),o.Bb(2),o.lc("control",t.form.get("statusDemandaId")),o.Bb(2),o.lc("control",t.form.get("liderId"))("byLine",!0)("idLine",t.form.get("linhaId").value),o.Bb(2),o.lc("control",t.form.get("squadId"))("idLine",t.form.get("linhaId").value)("idLeader",t.form.get("liderId").value),o.Bb(2),o.lc("control",t.form.get("desenvolvedorId"))("idSquad",t.form.get("squadId").value),o.Bb(2),o.lc("control",t.form.get("tecnologiaId")),o.Bb(2),o.lc("control",t.form.get("codigoRisco")),o.Bb(1),o.lc("form",t.form))},directives:[ee.a,ee.c,ee.f,ee.g,ee.e,I.a,Z.u,Z.p,Z.h,te.a,ie.a,ne.a,se.a,oe.a,ae.a,re.a,ce.a,le.a],styles:[".mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:flex-end;align-items:center}"]}),e})();var be=i("wnGv"),me=i("CV0D"),he=i("zGX+");function ue(e,t){if(1&e&&(o.Tb(0,"div"),o.Ob(1,"apx-chart",2),o.Sb()),2&e){const e=o.fc();o.Bb(1),o.lc("series",e.chartOptions.series)("chart",e.chartOptions.chart)("dataLabels",e.chartOptions.dataLabels)("plotOptions",e.chartOptions.plotOptions)("yaxis",e.chartOptions.yaxis)("xaxis",e.chartOptions.xaxis)("legend",e.chartOptions.legend)("grid",e.chartOptions.grid)("colors",e.chartOptions.colors)("tooltip",e.chartOptions.tooltip)}}function fe(e,t){1&e&&(o.Tb(0,"div",3),o.Ob(1,"app-simple-message",4),o.Sb())}let ge=(()=>{class e{constructor(){this.data=[],this.colors=["#0016d9","#007519","#ffac0d","#c90000","#71318c","#4d4d4d","#00e6d0","#e000bb"],this.horizontal=!1,this.clickEvent=new o.o}ngOnInit(){}ngOnChanges(){this.setChartOptions()}setChartOptions(){this.chartOptions={series:[{name:this.name,data:this.data}],chart:{height:350,type:"bar",toolbar:{show:!1},animations:{enabled:!1},events:{click:(e,t,i)=>this.clickEvent.emit(i.dataPointIndex)}},plotOptions:{bar:{horizontal:this.horizontal,columnWidth:"24px",distributed:!0,dataLabels:{position:this.horizontal?"center":"top"}}},colors:this.colors,dataLabels:{enabled:!0,formatter:(e,t)=>{const i=t.w.config.series[0].data[t.dataPointIndex];return this.horizontal?i>=5?i.toFixed(0):"":i.toFixed(0)},offsetY:this.horizontal?0:-15,style:{fontSize:"9px",colors:this.horizontal?["#fff"]:["#000"]}},legend:{show:!1},grid:{show:!1},xaxis:{categories:this.labels,labels:{style:{fontSize:"9px",colors:"black"}}},yaxis:{min:0,tickAmount:10,forceNiceScale:!0,labels:this.horizontal?{}:{formatter:e=>e.toFixed(0)}},tooltip:{enabled:!0,intersect:!1,shared:!0,marker:{show:!1}}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-dashboard-bar-chart"]],inputs:{name:"name",data:"data",labels:"labels",colors:"colors",horizontal:"horizontal"},outputs:{clickEvent:"clickEvent"},features:[o.zb],decls:2,vars:2,consts:[[4,"ngIf"],["class","d-flex align-items-center mt-5",4,"ngIf"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","legend","grid","colors","tooltip"],[1,"d-flex","align-items-center","mt-5"],["message","Nada para mostrar! N\xe3o foi encontrado nada."]],template:function(e,t){1&e&&(o.Fc(0,ue,2,10,"div",0),o.Fc(1,fe,2,0,"div",1)),2&e&&(o.lc("ngIf",t.chartOptions.series[0].data.length>0),o.Bb(1),o.lc("ngIf",0==t.chartOptions.series[0].data.length))},directives:[s.l,me.a,he.a],styles:[""]}),e})(),ve=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.unsubscribeNotifier=new d.a,this.colorMatrix={"READY TO START":"#4d4d4d",BACKLOG:"#4d4d4d",DOING:"#0016d9",DONE:"#007519",DELIVERED:"#007519",BLOCKED:"#c90000",CANCELLED:"#ffac0d"},this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.inicializeShowedItemsOptions(),this.inicializeShowedItemsControl(),this.setDataAndLabelsChart(),this.setColors(),this.listenShowedItemsOptions()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}setDataAndLabelsChart(){this.chartData=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.valor),this.chartLabels=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.descricao)}setColors(){this.colors=this.chartLabels.map(e=>this.colorMatrix[e])}inicializeShowedItemsOptions(){this.showedItemsOptions=this.data.map((e,t)=>({value:t,description:e.descricao}))}inicializeShowedItemsControl(){this.showedItemsControl=new Z.e(this.showedItemsOptions.map(e=>e.value))}listenShowedItemsOptions(){this.showedItemsControl.valueChanges.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.setDataAndLabelsChart(),this.setColors()})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-execution-status-chart"]],inputs:{data:"data"},decls:5,vars:8,consts:[[1,"d-flex","align-items-center","justify-content-between"],["label","Mostrar...",3,"control","options","displayFn","valueFn","multiple"],["name","Damandas por status de execu\xe7\xe3o",3,"data","labels","colors"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Demandas por status de execu\xe7\xe3o"),o.Sb(),o.Ob(3,"app-select",1),o.Sb(),o.Ob(4,"app-dashboard-bar-chart",2)),2&e&&(o.Bb(3),o.lc("control",t.showedItemsControl)("options",t.showedItemsOptions)("displayFn",t.displayFn)("valueFn",t.valueFn)("multiple",!0),o.Bb(1),o.lc("data",t.chartData)("labels",t.chartLabels)("colors",t.colors))},directives:[be.a,ge],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0}  app-execution-status-chart app-select{min-width:50%}  app-execution-status-chart app-select .mat-form-field-wrapper{padding:0}"]}),e})();function Se(e,t){if(1&e&&(o.Tb(0,"div"),o.Ob(1,"apx-chart",2),o.Sb()),2&e){const e=o.fc();o.Bb(1),o.lc("series",e.chartOptions.series)("chart",e.chartOptions.chart)("dataLabels",e.chartOptions.dataLabels)("yaxis",e.chartOptions.yaxis)("xaxis",e.chartOptions.xaxis)("legend",e.chartOptions.legend)("grid",e.chartOptions.grid)("colors",e.chartOptions.colors)("tooltip",e.chartOptions.tooltip)}}function Oe(e,t){1&e&&(o.Tb(0,"div",3),o.Ob(1,"app-simple-message",4),o.Sb())}let Ie=(()=>{class e{constructor(){this.series=[],this.labels=[],this.colors=["#0016d9","#007519","#ffac0d","#c90000","#71318c","#4d4d4d","#00e6d0","#e000bb"]}ngOnInit(){}ngOnChanges(){this.setChartOptions()}setChartOptions(){this.chartOptions={series:this.series,chart:{height:350,type:"bar",stacked:!0,stackType:"100%",toolbar:{show:!1},animations:{enabled:!1}},colors:this.colors,dataLabels:{enabled:!0,style:{fontSize:"9px",colors:["#fff"]}},legend:{position:"right",offsetX:0,offsetY:50},grid:{show:!1},xaxis:{categories:this.labels,labels:{style:{fontSize:"9px",colors:"black"}}},yaxis:{min:0,tickAmount:10,forceNiceScale:!0},tooltip:{enabled:!0,intersect:!1,shared:!0,marker:{show:!1}}}}everythingIsZero(){return this.chartOptions.series.every(e=>e.data.every(e=>0===e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-dashboard-stacked-bar-chart"]],inputs:{series:"series",labels:"labels",colors:"colors"},features:[o.zb],decls:2,vars:2,consts:[[4,"ngIf"],["class","d-flex align-items-center mt-5",4,"ngIf"],[3,"series","chart","dataLabels","yaxis","xaxis","legend","grid","colors","tooltip"],[1,"d-flex","align-items-center","mt-5"],["message","Nada para mostrar! N\xe3o foi encontrado nada."]],template:function(e,t){1&e&&(o.Fc(0,Se,2,9,"div",0),o.Fc(1,Oe,2,0,"div",1)),2&e&&(o.lc("ngIf",t.chartOptions.series.length>0&&!t.everythingIsZero()),o.Bb(1),o.lc("ngIf",0==t.chartOptions.series.length||t.everythingIsZero()))},directives:[s.l,me.a,he.a],styles:[""]}),e})(),Ce=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.chartSeries=[],this.colors=["#007519","#ffac0d"]}ngOnInit(){this.setSeriesAndLabelsChart()}setSeriesAndLabelsChart(){const e=this.data.find(e=>"EM DIA"===e.descricao.toUpperCase()),t=this.data.find(e=>"ATRASO"===e.descricao.toUpperCase()),i=this.data.find(e=>"ENTREGUE EM DIA"===e.descricao.toUpperCase()),n=this.data.find(e=>"ENTREGA COM ATRASO"===e.descricao.toUpperCase());this.chartSeries=[{name:"Em dia",data:[e?e.valor:0,i?i.valor:0]},{name:"Atrasado",data:[t?t.valor:0,n?n.valor:0]}],this.chartLabels=["Em andamento","Entregue"]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-deadline-status-chart"]],inputs:{data:"data"},decls:3,vars:3,consts:[[3,"series","labels","colors"]],template:function(e,t){1&e&&(o.Tb(0,"h6"),o.Hc(1,"Demandas por status do prazo"),o.Sb(),o.Ob(2,"app-dashboard-stacked-bar-chart",0)),2&e&&(o.Bb(2),o.lc("series",t.chartSeries)("labels",t.chartLabels)("colors",t.colors))},directives:[Ie],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0;line-height:51px}"]}),e})();function De(e,t){if(1&e&&(o.Tb(0,"div"),o.Ob(1,"apx-chart",2),o.Sb()),2&e){const e=o.fc();o.Bb(1),o.lc("series",e.chartOptions.series)("chart",e.chartOptions.chart)("colors",e.chartOptions.colors)("labels",e.chartOptions.labels)("legend",e.chartOptions.legend)}}function _e(e,t){1&e&&(o.Tb(0,"div",3),o.Ob(1,"app-simple-message",4),o.Sb())}let Te=(()=>{class e{constructor(){this.data=[],this.colors=["#0016d9","#007519","#ffac0d","#c90000","#71318c","#4d4d4d","#00e6d0","#e000bb"]}ngOnInit(){}ngOnChanges(){this.setChartOptions()}setChartOptions(){this.chartOptions={series:this.data,chart:{height:350,type:"pie",toolbar:{show:!1},animations:{enabled:!1}},labels:this.labels,colors:this.colors,legend:{position:"bottom",offsetX:0,offsetY:0}}}everythingIsZero(){return this.chartOptions.series.every(e=>0===e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-dashboard-pie-chart"]],inputs:{data:"data",labels:"labels",colors:"colors"},features:[o.zb],decls:2,vars:2,consts:[[4,"ngIf"],["class","d-flex align-items-center mt-5",4,"ngIf"],[3,"series","chart","colors","labels","legend"],[1,"d-flex","align-items-center","mt-5"],["message","Nada para mostrar! N\xe3o foi encontrado nada."]],template:function(e,t){1&e&&(o.Fc(0,De,2,5,"div",0),o.Fc(1,_e,2,0,"div",1)),2&e&&(o.lc("ngIf",t.chartOptions.series.length>0&&!t.everythingIsZero()),o.Bb(1),o.lc("ngIf",0==t.chartOptions.series.length||t.everythingIsZero()))},directives:[s.l,me.a,he.a],styles:[""]}),e})(),we=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.colorMatrix={PRODUTIVO:"#007519","N\xc3O PRODUTIVO":"#ffac0d",OCIOSIDADE:"#c90000"}}ngOnInit(){this.setDataAndLabelsChart(),this.setColors()}setDataAndLabelsChart(){this.chartData=this.data.map(e=>e.valor),this.chartLabels=this.data.map(e=>e.descricao)}setColors(){this.colors=this.chartLabels.map(e=>this.colorMatrix[e.toUpperCase()])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-spent-by-type-chart"]],inputs:{data:"data"},decls:6,vars:3,consts:[[1,"d-flex","align-items-center","justify-content-between"],["matTooltip","Horas produtivas s\xe3o todas lan\xe7adas em demandas. Horas n\xe3o produtivas todas lan\xe7adas em eventos, exceto DISPONIBILIDADE CLIENTE e INDISPONIBILIDADE CENTRO. Por fim, ociosidade s\xe3o, por l\xf3gica, DISPONIBILIDADE CLIENTE e INDISPONIBILIDADE CENTRO"],[3,"data","labels","colors"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Horas por tipo"),o.Sb(),o.Tb(3,"mat-icon",1),o.Hc(4," info "),o.Sb(),o.Sb(),o.Ob(5,"app-dashboard-pie-chart",2)),2&e&&(o.Bb(5),o.lc("data",t.chartData)("labels",t.chartLabels)("colors",t.colors))},directives:[I.a,O.a,Te],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0;line-height:51px}"]}),e})(),ye=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[]}ngOnInit(){this.setDataAndLabelsChart()}setDataAndLabelsChart(){this.chartData=this.data.map(e=>e.valor),this.chartLabels=this.data.map(e=>e.descricao)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-estimated-and-incurred-hours-chart"]],inputs:{data:"data"},decls:6,vars:2,consts:[[1,"d-flex","align-items-center","justify-content-between"],["matTooltip","Neste indicador \xe9 contabilizado somente as demandas em DOING e BLOCKED."],["name","Horas estimadas x horas incurridas",3,"data","labels"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Horas estimadas x horas incurridas"),o.Sb(),o.Tb(3,"mat-icon",1),o.Hc(4," info "),o.Sb(),o.Sb(),o.Ob(5,"app-dashboard-bar-chart",2)),2&e&&(o.Bb(5),o.lc("data",t.chartData)("labels",t.chartLabels))},directives:[I.a,O.a,ge],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0;line-height:51px}"]}),e})();var xe=i("Pu89");let Ee=(()=>{class e{constructor(e){this.risksTypesService=e,this.chartData=[],this.chartLabels=[],this.colorMatrix={"N\xc3O INICIADA OU N/A":"#4d4d4d","TUDO OK":"#007519","RISCO M\xc9DIO DE ATRASO":"#ffac0d","RISCO ALTO DE ATRASO":"#c90000","DELIVERY IMPACTADO":"#000"},this.unsubscribeNotifier=new d.a,this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.inicializeShowedItemsOptions(),this.inicializeShowedItemsControl(),this.setDataAndLabelsChart(),this.setColors(),this.listenShowedItemsOptions()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}setDataAndLabelsChart(){this.chartData=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.valor),this.chartLabels=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>this.risksTypesService.getDescriptionOfRisk(e.descricao))}setColors(){this.colors=this.chartLabels.map(e=>this.colorMatrix[e])}inicializeShowedItemsOptions(){this.showedItemsOptions=this.data.map((e,t)=>({value:t,description:this.risksTypesService.getDescriptionOfRisk(e.descricao)}))}inicializeShowedItemsControl(){this.showedItemsControl=new Z.e(this.showedItemsOptions.map(e=>e.value))}listenShowedItemsOptions(){this.showedItemsControl.valueChanges.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.setDataAndLabelsChart(),this.setColors()})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(xe.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-by-risk-chart"]],inputs:{data:"data"},decls:5,vars:8,consts:[[1,"d-flex","align-items-center","justify-content-between"],["label","Mostrar...",3,"control","options","displayFn","valueFn","multiple"],["name","Demandas por risco informado",3,"data","labels","colors"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Demandas por risco informado"),o.Sb(),o.Ob(3,"app-select",1),o.Sb(),o.Ob(4,"app-dashboard-bar-chart",2)),2&e&&(o.Bb(3),o.lc("control",t.showedItemsControl)("options",t.showedItemsOptions)("displayFn",t.displayFn)("valueFn",t.valueFn)("multiple",!0),o.Bb(1),o.lc("data",t.chartData)("labels",t.chartLabels)("colors",t.colors))},directives:[be.a,ge],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0}  app-by-risk-chart app-select{min-width:50%}  app-by-risk-chart app-select .mat-form-field-wrapper{padding:0}"]}),e})(),Pe=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.colorMatrix={"TUDO OK":"#007519","RISCO M\xc9DIO DE ATRASO":"#ffac0d","RISCO ALTO DE ATRASO":"#c90000"},this.unsubscribeNotifier=new d.a,this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.inicializeDashboardData(),this.inicializeShowedItemsOptions(),this.inicializeShowedItemsControl(),this.setDataAndLabelsChart(),this.setColors(),this.listenShowedItemsOptions()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}inicializeDashboardData(){this.dashboardData=[{descricao:"TUDO OK",valor:this.data.totalSemRisco},{descricao:"RISCO M\xc9DIO DE ATRASO",valor:this.data.totalMedioRisco},{descricao:"RISCO ALTO DE ATRASO",valor:this.data.totalAltoRisco}]}setDataAndLabelsChart(){this.chartData=this.dashboardData.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.valor),this.chartLabels=this.dashboardData.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.descricao)}setColors(){this.colors=this.chartLabels.map(e=>this.colorMatrix[e])}inicializeShowedItemsOptions(){this.showedItemsOptions=this.dashboardData.map((e,t)=>({value:t,description:e.descricao}))}inicializeShowedItemsControl(){this.showedItemsControl=new Z.e(this.showedItemsOptions.map(e=>e.value))}listenShowedItemsOptions(){this.showedItemsControl.valueChanges.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.setDataAndLabelsChart(),this.setColors()})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-by-risk-calculated-chart"]],inputs:{data:"data"},decls:5,vars:8,consts:[[1,"d-flex","align-items-center","justify-content-between"],["label","Mostrar...",3,"control","options","displayFn","valueFn","multiple"],["name","Demandas por risco prov\xe1vel",3,"data","labels","colors"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Demandas por risco prov\xe1vel"),o.Sb(),o.Ob(3,"app-select",1),o.Sb(),o.Ob(4,"app-dashboard-bar-chart",2)),2&e&&(o.Bb(3),o.lc("control",t.showedItemsControl)("options",t.showedItemsOptions)("displayFn",t.displayFn)("valueFn",t.valueFn)("multiple",!0),o.Bb(1),o.lc("data",t.chartData)("labels",t.chartLabels)("colors",t.colors))},directives:[be.a,ge],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0}  app-by-risk-calculated-chart app-select{min-width:50%}  app-by-risk-calculated-chart app-select .mat-form-field-wrapper{padding:0}"]}),e})(),Ae=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.unsubscribeNotifier=new d.a,this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.inicializeShowedItemsOptions(),this.inicializeShowedItemsControl(),this.setDataAndLabelsChart(),this.listenShowedItemsOptions()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}setDataAndLabelsChart(){this.chartData=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.valor),this.chartLabels=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.descricao)}inicializeShowedItemsOptions(){this.showedItemsOptions=this.data.map((e,t)=>({value:t,description:e.descricao}))}inicializeShowedItemsControl(){this.showedItemsControl=new Z.e(this.showedItemsOptions.map(e=>e.value))}listenShowedItemsOptions(){this.showedItemsControl.valueChanges.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>this.setDataAndLabelsChart())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-by-technology-chart"]],inputs:{data:"data"},decls:5,vars:8,consts:[[1,"d-flex","align-items-center","justify-content-between"],["label","Mostrar...",3,"control","options","displayFn","valueFn","multiple"],["name","Demandas por tecnologia",3,"data","labels","horizontal"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Demandas por tecnologia"),o.Sb(),o.Ob(3,"app-select",1),o.Sb(),o.Ob(4,"app-dashboard-bar-chart",2)),2&e&&(o.Bb(3),o.lc("control",t.showedItemsControl)("options",t.showedItemsOptions)("displayFn",t.displayFn)("valueFn",t.valueFn)("multiple",!0),o.Bb(1),o.lc("data",t.chartData)("labels",t.chartLabels)("horizontal",!0))},directives:[be.a,ge],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0}  app-by-technology-chart app-select{min-width:50%}  app-by-technology-chart app-select .mat-form-field-wrapper{padding:0}"]}),e})(),Me=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.unsubscribeNotifier=new d.a,this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.inicializeShowedItemsOptions(),this.inicializeShowedItemsControl(),this.setDataAndLabelsChart(),this.listenShowedItemsOptions()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}setDataAndLabelsChart(){this.chartData=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.valor),this.chartLabels=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.descricao)}inicializeShowedItemsOptions(){this.showedItemsOptions=this.data.map((e,t)=>({value:t,description:e.descricao}))}inicializeShowedItemsControl(){this.showedItemsControl=new Z.e(this.showedItemsOptions.map(e=>e.value))}listenShowedItemsOptions(){this.showedItemsControl.valueChanges.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>this.setDataAndLabelsChart())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-by-productive-service-class-chart"]],inputs:{data:"data"},decls:5,vars:7,consts:[[1,"d-flex","align-items-center","justify-content-between"],["label","Mostrar...",3,"control","options","displayFn","valueFn","multiple"],["name","Horas produtivas por classe de servi\xe7o",3,"data","labels"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Horas produtivas por classe de servi\xe7o"),o.Sb(),o.Ob(3,"app-select",1),o.Sb(),o.Ob(4,"app-dashboard-bar-chart",2)),2&e&&(o.Bb(3),o.lc("control",t.showedItemsControl)("options",t.showedItemsOptions)("displayFn",t.displayFn)("valueFn",t.valueFn)("multiple",!0),o.Bb(1),o.lc("data",t.chartData)("labels",t.chartLabels))},directives:[be.a,ge],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0}  app-by-productive-service-class-chart app-select{min-width:50%}  app-by-productive-service-class-chart app-select .mat-form-field-wrapper{padding:0}"]}),e})(),Le=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.unsubscribeNotifier=new d.a,this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.inicializeShowedItemsOptions(),this.inicializeShowedItemsControl(),this.setDataAndLabelsChart(),this.listenShowedItemsOptions()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}setDataAndLabelsChart(){this.chartData=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.valor),this.chartLabels=this.data.filter((e,t)=>this.showedItemsControl.value.includes(t)).map(e=>e.descricao)}inicializeShowedItemsOptions(){this.showedItemsOptions=this.data.map((e,t)=>({value:t,description:e.descricao}))}inicializeShowedItemsControl(){this.showedItemsControl=new Z.e(this.showedItemsOptions.map(e=>e.value))}listenShowedItemsOptions(){this.showedItemsControl.valueChanges.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>this.setDataAndLabelsChart())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-by-non-productive-service-class-chart"]],inputs:{data:"data"},decls:5,vars:7,consts:[[1,"d-flex","align-items-center","justify-content-between"],["label","Mostrar...",3,"control","options","displayFn","valueFn","multiple"],["name","Horas n\xe3o produtivas e ociosidade por classe de servi\xe7o",3,"data","labels"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Horas n\xe3o produtivas e ociosidade por classe de servi\xe7o"),o.Sb(),o.Ob(3,"app-select",1),o.Sb(),o.Ob(4,"app-dashboard-bar-chart",2)),2&e&&(o.Bb(3),o.lc("control",t.showedItemsControl)("options",t.showedItemsOptions)("displayFn",t.displayFn)("valueFn",t.valueFn)("multiple",!0),o.Bb(1),o.lc("data",t.chartData)("labels",t.chartLabels))},directives:[be.a,ge],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0}  app-by-non-productive-service-class-chart app-select{min-width:50%}  app-by-non-productive-service-class-chart app-select .mat-form-field-wrapper{padding:0}"]}),e})(),Ne=(()=>{class e{constructor(){this.chartData=[],this.chartLabels=[],this.colorMatrix={"SEM BLOQUEIO":"#007519","COM BLOQUEIO":"#c90000"}}ngOnInit(){this.setDataAndLabelsChart(),this.setColors()}setDataAndLabelsChart(){this.chartData=this.data.map(e=>e.valor),this.chartLabels=this.data.map(e=>e.descricao)}setColors(){this.colors=this.chartLabels.map(e=>this.colorMatrix[e.toUpperCase()])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-block-view-chart"]],inputs:{data:"data"},decls:6,vars:3,consts:[[1,"d-flex","align-items-center","justify-content-between"],["matTooltip","Neste indicador \xe9 contabilizado somente as demandas em DOING e BLOCKED."],[3,"data","labels","colors"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h6"),o.Hc(2,"Vis\xe3o de bloqueios"),o.Sb(),o.Tb(3,"mat-icon",1),o.Hc(4," info "),o.Sb(),o.Sb(),o.Ob(5,"app-dashboard-pie-chart",2)),2&e&&(o.Bb(5),o.lc("data",t.chartData)("labels",t.chartLabels)("colors",t.colors))},directives:[I.a,O.a,Te],styles:["h6[_ngcontent-%COMP%]{font-size:14px;margin:0;line-height:51px}"]}),e})();function Fe(e,t){if(1&e&&(o.Tb(0,"div",5),o.Tb(1,"div",6),o.Tb(2,"div",7),o.Ob(3,"app-execution-status-chart",8),o.Sb(),o.Sb(),o.Tb(4,"div",6),o.Tb(5,"div",7),o.Ob(6,"app-deadline-status-chart",8),o.Sb(),o.Sb(),o.Tb(7,"div",6),o.Tb(8,"div",7),o.Ob(9,"app-spent-by-type-chart",8),o.Sb(),o.Sb(),o.Tb(10,"div",6),o.Tb(11,"div",7),o.Ob(12,"app-estimated-and-incurred-hours-chart",8),o.Sb(),o.Sb(),o.Tb(13,"div",6),o.Tb(14,"div",7),o.Ob(15,"app-by-risk-chart",8),o.Sb(),o.Sb(),o.Tb(16,"div",6),o.Tb(17,"div",7),o.Ob(18,"app-by-risk-calculated-chart",8),o.Sb(),o.Sb(),o.Tb(19,"div",6),o.Tb(20,"div",7),o.Ob(21,"app-by-technology-chart",8),o.Sb(),o.Sb(),o.Tb(22,"div",9),o.Tb(23,"div",7),o.Ob(24,"app-by-productive-service-class-chart",8),o.Sb(),o.Sb(),o.Tb(25,"div",9),o.Tb(26,"div",7),o.Ob(27,"app-by-non-productive-service-class-chart",8),o.Sb(),o.Sb(),o.Tb(28,"div",6),o.Tb(29,"div",7),o.Ob(30,"app-block-view-chart",8),o.Sb(),o.Sb(),o.Sb()),2&e){const e=o.fc(2);o.Bb(3),o.lc("data",e.dashboardExecutiveData.statusDemanda),o.Bb(3),o.lc("data",e.dashboardExecutiveData.statusPrazo),o.Bb(3),o.lc("data",e.dashboardExecutiveData.produtividade),o.Bb(3),o.lc("data",e.dashboardExecutiveData.estimadasIncurridas),o.Bb(3),o.lc("data",e.dashboardExecutiveData.riscos),o.Bb(3),o.lc("data",e.dashboardExecutiveData.riscoProvavel),o.Bb(3),o.lc("data",e.dashboardExecutiveData.tecnologias),o.Bb(3),o.lc("data",e.dashboardExecutiveData.diarioClasseServico),o.Bb(3),o.lc("data",e.dashboardExecutiveData.eventosClasseServico),o.Bb(3),o.lc("data",e.dashboardExecutiveData.bloqueios)}}function Re(e,t){1&e&&(o.Tb(0,"div",10),o.Ob(1,"app-loading-spinner"),o.Sb())}function Be(e,t){1&e&&(o.Tb(0,"div",10),o.Ob(1,"app-simple-message",11),o.Sb())}function He(e,t){if(1&e){const e=o.Ub();o.Rb(0),o.Tb(1,"app-dashboard-executive-filters",3),o.bc("filterEvent",function(t){return o.xc(e),o.fc().onFilter(t)}),o.Sb(),o.Fc(2,Fe,31,10,"div",4),o.Fc(3,Re,2,0,"div",2),o.Fc(4,Be,2,0,"div",2),o.Qb()}if(2&e){const e=o.fc();o.Bb(1),o.lc("componentsParams",e.componentsParams),o.Bb(1),o.lc("ngIf",!e.isLoadingDash&&!e.thereIsAnError&&e.dashboardExecutiveData),o.Bb(1),o.lc("ngIf",e.isLoadingDash&&!e.thereIsAnError),o.Bb(1),o.lc("ngIf",e.thereIsAnError)}}function Ye(e,t){1&e&&(o.Tb(0,"div",10),o.Ob(1,"app-loading-spinner"),o.Sb())}let ze=(()=>{class e{constructor(e,t,i){this.dashboardService=e,this.dashboardExecutiveService=t,this.messageService=i,this.componentsParamsLoaded=!1,this.isLoadingDash=!1,this.thereIsAnError=!1,this.unsubscribeNotifier=new d.a}ngOnInit(){this.getComponentParams()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}getComponentParams(){this.componentsParamsLoaded=!1,this.dashboardService.getComponentParams(this.person_component_id).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.componentsParams=e,()=>this.componentsParams=[]).add(()=>this.componentsParamsLoaded=!0)}onFilter(e){this.getDashExecutive(e)}getDashExecutive(e){this.isLoadingDash=!0,this.thereIsAnError=!1,this.dashboardExecutiveService.getDashExecutive(this.person_component_id,e).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.dashboardExecutiveData=e,()=>{this.thereIsAnError=!0,this.messageService.snackMessage("Erro ao carregar Dashboard executivo!","error")}).add(()=>this.isLoadingDash=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(h),o.Nb(W),o.Nb(_.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-dashboard-executive"]],inputs:{person_component_id:"person_component_id"},decls:3,vars:3,consts:[["title","Dashboard executivo","subtitle","Visualize um retrato executivo atrav\xe9s de um \xfanico componente",3,"person_component_id"],[4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"componentsParams","filterEvent"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-lg-4","p-2"],[1,"chart-item"],[3,"data"],[1,"col-lg-8","p-2"],[1,"mt-3"],["message","Erro ao carregar!"]],template:function(e,t){1&e&&(o.Tb(0,"app-wrapper-dashboard-component",0),o.Fc(1,He,5,4,"ng-container",1),o.Fc(2,Ye,2,0,"div",2),o.Sb()),2&e&&(o.lc("person_component_id",t.person_component_id),o.Bb(1),o.lc("ngIf",t.componentsParamsLoaded),o.Bb(1),o.lc("ngIf",!t.componentsParamsLoaded))},directives:[B,s.l,pe,ve,Ce,we,ye,Ee,Pe,Ae,Me,Le,Ne,Y.a,he.a],styles:[".chart-item[_ngcontent-%COMP%]{border:1px solid #dcdcdc;border-radius:1rem;padding:8px;height:420px}"]}),e})();var ke=i("PqYM"),Ue=function(e){return e.CROSS="C",e.NORMAL="N",e}({}),je=function(e){return e[e.LAST_30_DAYS=1]="LAST_30_DAYS",e[e.LAST_15_DAYS=2]="LAST_15_DAYS",e[e.LAST_7_DAYS=3]="LAST_7_DAYS",e[e.LAST_30_DAYS_AND_NEXT_30_DAYS=4]="LAST_30_DAYS_AND_NEXT_30_DAYS",e[e.LAST_15_DAYS_AND_NEXT_15_DAYS=5]="LAST_15_DAYS_AND_NEXT_15_DAYS",e[e.LAST_7_DAYS_AND_NEXT_7_DAYS=6]="LAST_7_DAYS_AND_NEXT_7_DAYS",e[e.CURRENT_MONTH=7]="CURRENT_MONTH",e}({}),qe=i("+0xr"),Xe=i("VRyK"),$e=i("Kj3r");let Qe=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}getMap(e,t,i,n){const s={size:String(i),page:String(t)};n.conforme&&delete n.conforme,n.dtInicio&&(n.dtInicio=K(n.dtInicio).format("YYYY-MM-DD")),n.dtFim&&(n.dtFim=K(n.dtFim).format("YYYY-MM-DD"));for(const o in n)null!=n[o]&&""!==n[o]&&(s[o]=n[o]);return this.http.get(`${this.environmentService.getAPI()}/dashboard/${e}/mapaHorasLancadas`,{params:s})}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ve=(()=>{class e{constructor(){this.PERIOD=[{value:je.LAST_30_DAYS,description:"\xdaLTIMOS 30 DIAS"},{value:je.LAST_15_DAYS,description:"\xdaLTIMOS 15 DIAS"},{value:je.LAST_7_DAYS,description:"\xdaLTIMOS 7 DIAS"},{value:je.LAST_30_DAYS_AND_NEXT_30_DAYS,description:"\xdaLTIMOS 30 DIAS E PR\xd3XIMOS 30 DIAS"},{value:je.LAST_15_DAYS_AND_NEXT_15_DAYS,description:"\xdaLTIMOS 15 DIAS E PR\xd3XIMOS 15 DIAS"},{value:je.LAST_7_DAYS_AND_NEXT_7_DAYS,description:"\xdaLTIMOS 7 DIAS E PR\xd3XIMOS 7 DIAS"},{value:je.CURRENT_MONTH,description:"M\xcaS ATUAL"}]}getAll(){return[...this.PERIOD]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Je=i("YVyJ"),Ge=i("kh7C"),Ke=i("dlKe"),We=i("j/YD"),Ze=i("znSr"),et=i("FySs");const tt=function(e,t,i,n,s,o){return{gray:e,white:t,red:i,yellow:n,green:s,black:o}};let it=(()=>{class e{constructor(e){this.utilsService=e,this.viewEntries=new o.o}ngOnInit(){}isWeekend(){return this.utilsService.isWeekend(this.day)}isFutureDate(){return this.utilsService.isFutureDate(this.day)}isGray(){return this.isFutureDate()&&!this.isWeekend()&&0===this.item[this.day]&&this.item[this.day+"-status"]!==We.a.FREE}isWhite(){return this.isWeekend()&&this.item[this.day+"-status"]!==We.a.FREE}isRed(){return this.item[this.day+"-status"]===We.a.NOT_OK&&!this.isWeekend()}isYellow(){return this.item[this.day]>8&&!this.isWeekend()&&this.item[this.day+"-status"]!==We.a.FREE}isGreen(){return this.item[this.day+"-status"]===We.a.OK}isBlack(){return this.item[this.day+"-status"]===We.a.FREE}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(Ge.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-indicator-hour"]],inputs:{item:"item",day:"day"},outputs:{viewEntries:"viewEntries"},decls:3,vars:11,consts:[["matTooltip","Clique para visualizar os lan\xe7amentos",1,"indicator",3,"ngClass","click"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.bc("click",function(){return t.viewEntries.emit({item:t.item,day:t.day})}),o.Hc(1),o.gc(2,"integerNumber"),o.Sb()),2&e&&(o.lc("ngClass",o.rc(4,tt,t.isGray(),t.isWhite(),t.isRed(),t.isYellow(),t.isGreen(),t.isBlack())),o.Bb(1),o.Jc(" ",o.hc(2,2,t.item[t.day]),"\n"))},directives:[O.a,s.j,Ze.a],pipes:[et.a],styles:[".indicator[_ngcontent-%COMP%]{height:24px;width:24px;margin:0 auto;border-radius:100px;cursor:pointer;line-height:24px}.indicator.green[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.indicator.red[_ngcontent-%COMP%]{background:#b30909;color:#fff}.indicator.yellow[_ngcontent-%COMP%]{background:#feb019;color:#fff}.indicator.gray[_ngcontent-%COMP%]{background:#999;color:#fff}.indicator.black[_ngcontent-%COMP%]{background:#000;color:#fff}.indicator.white[_ngcontent-%COMP%]{background:#fff;color:#000;border:1px solid #dcdcdc}"],changeDetection:0}),e})();var nt=i("ig0m"),st=i("/eTB");function ot(e,t){if(1&e&&o.Ob(0,"app-select-client-and-line-from-allocation",9),2&e){const e=o.fc(2);o.lc("clientControl",e.filters.get("cliente_id"))("lineControl",e.filters.get("linha_id"))}}function at(e,t){if(1&e){const e=o.Ub();o.Tb(0,"form",1),o.Tb(1,"div",2),o.Tb(2,"div",3),o.Tb(3,"h1",4),o.Hc(4,"Outros filtros"),o.Sb(),o.Tb(5,"div",4),o.Ob(6,"app-select",5),o.Sb(),o.Fc(7,ot,1,2,"app-select-client-and-line-from-allocation",6),o.Tb(8,"div",4),o.Ob(9,"app-select-cell",7),o.Sb(),o.Sb(),o.Tb(10,"app-filters-buttons",8),o.bc("filterEvent",function(){o.xc(e);const t=o.fc();return t.filterEvent.emit(t.filters.getRawValue())})("clearEvent",function(){return o.xc(e),o.fc().onFilterClear()}),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.lc("formGroup",e.filters),o.Bb(6),o.lc("control",e.filters.get("conforme"))("options",e.conformeOptions)("displayFn",e.displayFn)("valueFn",e.valueFn),o.Bb(1),o.lc("ngIf",e.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")),o.Bb(2),o.lc("byLine",!0)("idLine",e.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")?e.filters.get("linha_id").value:e.loggedUserService.getLineId())("control",e.filters.get("celula_id")),o.Bb(1),o.lc("form",e.filters)}}let rt=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.permissionsService=t,this.loggedUserService=i,this.filterEvent=new o.o,this.conformeOptions=[{description:"TODOS",value:!0},{description:"N\xc3O CONFORMES",value:!1}],this.unsubscribeNotifier=new d.a,this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.createFormFilter(),this.filterEvent.emit(this.filters.getRawValue())}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}createFormFilter(){const e=e=>this.componentsParams.find(t=>t.vr_chave===e);this.filters=this.formBuilder.group({cliente_id:[e("cliente_id")?Number(e("cliente_id").valor):this.loggedUserService.getClientId()],linha_id:[e("linha_id")?Number(e("linha_id").valor):this.loggedUserService.getLineId()],celula_id:[e("celula_id")?Number(e("celula_id").valor):null],conforme:[e("conforme")?"true"===e("conforme").valor:null,[Z.t.required]]})}onFilterClear(){this.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")&&this.filters.get("cliente_id").enable()}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(Z.d),o.Nb(Je.a),o.Nb(u.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-other-filters"]],inputs:{componentsParams:"componentsParams"},outputs:{filterEvent:"filterEvent"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["label","Listar",3,"control","options","displayFn","valueFn"],[3,"clientControl","lineControl",4,"ngIf"],["label","C\xe9lula origem",3,"byLine","idLine","control"],[3,"form","filterEvent","clearEvent"],[3,"clientControl","lineControl"]],template:function(e,t){1&e&&o.Fc(0,at,11,10,"form",0),2&e&&o.lc("ngIf",t.filters)},directives:[s.l,Z.u,Z.p,Z.h,be.a,st.a,le.a,te.a],styles:["h1[_ngcontent-%COMP%]{font-size:18px;font-weight:lighter;margin:8px 0 18px}"]}),e})();var ct=i("3DMK"),lt=i("Xwk/"),dt=i("nW2y");const pt=function(){return[]};function bt(e,t){if(1&e&&o.Ob(0,"app-popover-hours",4),2&e){const e=o.fc();o.lc("events",e.entries[0]?e.entries[0].eventos:o.nc(9,pt))("diaries",e.entries[0]?e.entries[0].diariosBordo:o.nc(10,pt))("totalHours",e.entries[0]?e.entries[0].horas:null)("day",e.entries[0]?e.entries[0].dia:null)("month",e.moment(e.day).format("M"))("year",e.moment(e.day).format("YYYY"))("allowModifier",!1)("disableShadow",!0)("hasMaxHeight",!1)}}function mt(e,t){1&e&&o.Ob(0,"app-loading-spinner")}let ht=(()=>{class e{constructor(e,t,i){this.scheduleService=e,this.changeDetectionRef=t,this.messageService=i,this.moment=K,this.unsubscribeNotifier=new d.a}ngOnInit(){this.listEntries()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}listEntries(){this.isLoading=!0,this.changeDetectionRef.detectChanges();const e=Number(K(this.day).format("M")),t=Number(K(this.day).format("YYYY")),i=Number(K(this.day).format("DD"));this.scheduleService.listMonthEntries(this.item.pessoa_id,e,t,i).subscribe(e=>this.entries=e,()=>{this.messageService.snackMessage("Houve um erro ao carregar lan\xe7amentos!","error"),this.entries=[]}).add(()=>{this.isLoading=!1,this.changeDetectionRef.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(ct.a),o.Nb(o.h),o.Nb(_.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-diaries-and-events"]],inputs:{sidenav:"sidenav",item:"item",day:"day"},decls:6,vars:4,consts:[["matMenuPositionType","fixed",3,"events","diaries","totalHours","day","month","year","allowModifier","disableShadow","hasMaxHeight",4,"ngIf"],[4,"ngIf"],[1,"mt-2"],["backButtonLabel","FECHAR",3,"showSaveButton","backEvent"],["matMenuPositionType","fixed",3,"events","diaries","totalHours","day","month","year","allowModifier","disableShadow","hasMaxHeight"]],template:function(e,t){1&e&&(o.Tb(0,"h1"),o.Hc(1),o.Sb(),o.Fc(2,bt,1,11,"app-popover-hours",0),o.Fc(3,mt,1,0,"app-loading-spinner",1),o.Tb(4,"div",2),o.Tb(5,"app-footer-form-buttons",3),o.bc("backEvent",function(){return t.sidenav.close()}),o.Sb(),o.Sb()),2&e&&(o.Bb(1),o.Ic(t.item.pessoa_nome),o.Bb(1),o.lc("ngIf",!t.isLoading),o.Bb(1),o.lc("ngIf",t.isLoading),o.Bb(2),o.lc("showSaveButton",!1))},directives:[s.l,lt.a,dt.a,Y.a],styles:["h1[_ngcontent-%COMP%]{margin-left:16px;margin-bottom:8px}"],changeDetection:0}),e})();var ut=i("9Ovz");const ft=["sidenavEnd"];function gt(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",23),o.Tb(1,"button",24),o.bc("click",function(){return o.xc(e),o.fc(2),o.uc(13).toggle()}),o.Tb(2,"mat-icon"),o.Hc(3,"filter_list"),o.Sb(),o.Sb(),o.Sb()}}function vt(e,t){if(1&e&&(o.Tb(0,"form",17),o.Tb(1,"div",4),o.Tb(2,"div",5),o.Fc(3,gt,4,0,"div",18),o.Tb(4,"div",19),o.Ob(5,"app-select",20),o.Sb(),o.Tb(6,"div"),o.Ob(7,"app-input-datepicker",21),o.Sb(),o.Tb(8,"div"),o.Ob(9,"app-input-datepicker",22),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e){const e=o.fc(),t=o.uc(1);o.lc("formGroup",e.filters),o.Bb(3),o.lc("ngIf",t.maximized&&e.permissionsService.hasPermission("ROLE_MAPA_HORAS_LINHA")),o.Bb(2),o.lc("control",e.filters.get("periodoDatas"))("options",e.periodDates)("displayFn",e.displayFn)("valueFn",e.valueFn),o.Bb(1),o.Fb("col-lg-3",t.maximized&&e.permissionsService.hasPermission("ROLE_MAPA_HORAS_LINHA"))("col-lg-4",t.maximized&&!e.permissionsService.hasPermission("ROLE_MAPA_HORAS_LINHA"))("col-lg-4",!t.maximized),o.Bb(1),o.lc("control",e.filters.get("dtInicio"))("max",e.filters.get("dtFim").value),o.Bb(1),o.Fb("col-lg-3",t.maximized&&e.permissionsService.hasPermission("ROLE_MAPA_HORAS_LINHA"))("col-lg-4",t.maximized&&!e.permissionsService.hasPermission("ROLE_MAPA_HORAS_LINHA"))("col-lg-4",!t.maximized),o.Bb(1),o.lc("control",e.filters.get("dtFim"))("min",e.filters.get("dtInicio").value)}}function St(e,t){1&e&&(o.Tb(0,"th",36),o.Hc(1,"#"),o.Sb())}function Ot(e,t){if(1&e&&(o.Tb(0,"td",37),o.Hc(1),o.Sb()),2&e){const e=t.index;o.Bb(1),o.Jc(" ",e+1," ")}}function It(e,t){1&e&&(o.Tb(0,"th",36),o.Hc(1,"Nome"),o.Sb())}function Ct(e,t){if(1&e&&(o.Tb(0,"td",38),o.Hc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",e.pessoa_nome," ")}}function Dt(e,t){1&e&&(o.Tb(0,"th",36),o.Hc(1,"Tipo"),o.Sb())}function _t(e,t){if(1&e&&(o.Tb(0,"td",37),o.Tb(1,"span",39),o.Hc(2),o.Sb(),o.Sb()),2&e){const e=t.$implicit,i=o.fc(2);o.Bb(1),o.lc("matTooltip","C\xe9lula Origem: "+e.celula_nome),o.Bb(1),o.Jc(" ",e.tipo==i.allocationTypeEnum.CROSS?"CROSS":"NORMAL"," ")}}function Tt(e,t){if(1&e&&(o.Tb(0,"th",36),o.Hc(1),o.Sb()),2&e){const e=o.fc().$implicit,t=o.fc(2);o.Fb("isToday",e==t.today),o.Bb(1),o.Jc(" ",t.moment(e).format("DD/MM/YY")," ")}}function wt(e,t){if(1&e){const e=o.Ub();o.Tb(0,"td",37),o.Tb(1,"app-indicator-hour",43),o.bc("viewEntries",function(t){return o.xc(e),o.fc(3).viewEntriesDay(t)}),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit,i=o.fc().$implicit,n=o.fc(2);o.Fb("isToday",i==n.today),o.Bb(1),o.lc("item",e)("day",i)}}function yt(e,t){1&e&&(o.Rb(0,40),o.Fc(1,Tt,2,3,"th",41),o.Fc(2,wt,2,4,"td",42),o.Qb()),2&e&&o.lc("matColumnDef",t.$implicit)}function xt(e,t){1&e&&(o.Tb(0,"th",36),o.Hc(1,"Total de horas no per\xedodo"),o.Sb())}function Et(e,t){if(1&e&&(o.Tb(0,"td",37),o.Hc(1),o.gc(2,"decimalNumber"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.hc(2,1,e.total)," horas ")}}function Pt(e,t){1&e&&o.Ob(0,"tr",44)}function At(e,t){1&e&&o.Ob(0,"tr",45)}function Mt(e,t){if(1&e&&(o.Tb(0,"table",25),o.Rb(1,26),o.Fc(2,St,2,0,"th",27),o.Fc(3,Ot,2,1,"td",28),o.Qb(),o.Rb(4,29),o.Fc(5,It,2,0,"th",27),o.Fc(6,Ct,2,1,"td",30),o.Qb(),o.Rb(7,31),o.Fc(8,Dt,2,0,"th",27),o.Fc(9,_t,3,2,"td",28),o.Qb(),o.Fc(10,yt,3,1,"ng-container",32),o.Rb(11,33),o.Fc(12,xt,2,0,"th",27),o.Fc(13,Et,3,3,"td",28),o.Qb(),o.Fc(14,Pt,1,0,"tr",34),o.Fc(15,At,1,0,"tr",35),o.Sb()),2&e){const e=o.fc();o.lc("dataSource",e.dataSource),o.Bb(10),o.lc("ngForOf",e.rangeOfDays),o.Bb(4),o.lc("matHeaderRowDef",e.getDisplayedColumns())("matHeaderRowDefSticky",!0),o.Bb(1),o.lc("matRowDefColumns",e.getDisplayedColumns())}}function Lt(e,t){1&e&&o.Ob(0,"app-small-loading-spinner")}function Nt(e,t){1&e&&o.Ob(0,"app-simple-message",46)}function Ft(e,t){1&e&&o.Ob(0,"app-simple-message",47)}function Rt(e,t){if(1&e){const e=o.Ub();o.Tb(0,"app-other-filters",48),o.bc("filterEvent",function(t){o.xc(e);const i=o.fc(),n=o.uc(13);return i.getMap(0,t),n.close()}),o.Sb()}if(2&e){const e=o.fc();o.lc("componentsParams",e.componentsParams)}}function Bt(e,t){if(1&e&&o.Ob(0,"app-diaries-and-events",49),2&e){const e=o.fc(),t=o.uc(16);o.lc("day",e.selectedDay)("item",e.selectedItem)("sidenav",t)}}let Ht=(()=>{class e{constructor(e,t,i,n,s,o,a){this.hourMapService=e,this.formBuilder=t,this.dashboardService=i,this.periodDatesService=n,this.changeDetectionRef=s,this.permissionsService=o,this.utilsService=a,this.pageSize=20,this.pageIndex=0,this.isLoading=!0,this.otherFiltersValue={},this.rangeOfDays=[],this.periodDates=[],this.componentsParamsLoaded=!1,this.allocationTypeEnum=Ue,this.moment=K,this.today=K().format("YYYY-MM-DD"),this.unsubscribeNotifier=new d.a,this.displayFn=e=>e.description,this.valueFn=e=>e.value}ngOnInit(){this.periodDates=this.periodDatesService.getAll(),this.getComponentParams()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}getComponentParams(){this.componentsParamsLoaded=!1,this.dashboardService.getComponentParams(this.person_component_id).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.componentsParams=e,()=>this.componentsParams=[]).add(()=>{this.createFormFilter(),this.listenDates(),this.listenPeriodDates(),this.componentsParamsLoaded=!0,this.changeDetectionRef.detectChanges()})}createFormFilter(){const e=this.componentsParams.find(e=>"periodoDatas"===e.vr_chave),{startDate:t,endDate:i}=this.getStartDateAndEndDate(e&&e.valor?Number(e.valor):null);this.filters=this.formBuilder.group({dtInicio:[t,[Z.t.required]],dtFim:[i,[Z.t.required]],periodoDatas:[e&&e.valor?Number(e.valor):je.LAST_7_DAYS_AND_NEXT_7_DAYS,[Z.t.required]]})}listenDates(){Object(Xe.a)(this.filters.get("dtInicio").valueChanges,this.filters.get("dtFim").valueChanges).pipe(Object($e.a)(250),Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.filters.get("dtInicio").value&&this.filters.get("dtFim").value&&this.filters.get("periodoDatas").value&&(this.dataSource=null,this.rangeOfDays=[],this.getMap(0))})}getStartDateAndEndDate(e){let t,i;switch(e){case je.LAST_30_DAYS:t=K().subtract(30,"days").format("YYYY-MM-DD"),i=K().format("YYYY-MM-DD");break;case je.LAST_15_DAYS:t=K().subtract(15,"days").format("YYYY-MM-DD"),i=K().format("YYYY-MM-DD");break;case je.LAST_7_DAYS:t=K().subtract(7,"days").format("YYYY-MM-DD"),i=K().format("YYYY-MM-DD");break;case je.LAST_30_DAYS_AND_NEXT_30_DAYS:t=K().subtract(30,"days").format("YYYY-MM-DD"),i=K().add(30,"days").format("YYYY-MM-DD");break;case je.LAST_15_DAYS_AND_NEXT_15_DAYS:t=K().subtract(15,"days").format("YYYY-MM-DD"),i=K().add(15,"days").format("YYYY-MM-DD");break;case je.LAST_7_DAYS_AND_NEXT_7_DAYS:t=K().subtract(7,"days").format("YYYY-MM-DD"),i=K().add(7,"days").format("YYYY-MM-DD");break;case je.CURRENT_MONTH:t=K().clone().startOf("month").format("YYYY-MM-DD"),i=K().clone().endOf("month").format("YYYY-MM-DD");break;default:t=K().subtract(7,"days").format("YYYY-MM-DD"),i=K().add(7,"days").format("YYYY-MM-DD")}return{startDate:t,endDate:i}}listenPeriodDates(){this.filters.get("periodoDatas").valueChanges.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>{if(this.filters.get("periodoDatas").value){const{startDate:t,endDate:i}=this.getStartDateAndEndDate(e);this.filters.get("dtInicio").setValue(t),this.filters.get("dtFim").setValue(i)}})}getMap(e,t){this.isLoading=!0,this.thereIsAnError=null,t&&(this.otherFiltersValue=t),0===e&&(this.dataSource=new qe.k([])),this.pageIndex=e,this.changeDetectionRef.detectChanges();const i=Object.assign({},this.filters.value),n=Object.assign(i,t||this.otherFiltersValue);this.hourMapService.getMap(this.person_component_id,this.pageIndex,this.pageSize,n).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>{this.rangeOfDays=this.generateDatesBetweenDates(this.filters.value.dtInicio,this.filters.value.dtFim),e.content.forEach(e=>{let t=0;e.lancamentos.forEach(i=>{e[K(i.data_ocorrencia).format("YYYY-MM-DD")]=i.total_horas,e[K(i.data_ocorrencia).format("YYYY-MM-DD")+"-status"]=i.status,t+=i.total_horas}),e.total=t}),this.dataSource=new qe.k(this.dataSource.data.concat(e.content))},()=>this.thereIsAnError=!0).add(()=>{this.isLoading=!1,this.changeDetectionRef.detectChanges()})}getDisplayedColumns(){return["rowNumber","pessoa_nome","tipo",...this.rangeOfDays,"total"]}generateDatesBetweenDates(e,t){const i=[];let n=K(e);for(;K(n)<=K(t);)i.push(n.format("YYYY-MM-DD")),n=K(n).add(1,"day");return i}resetEntriesSidebarVars(){this.sidenavEnd.opened&&this.sidenavEnd.close(),this.selectedDay=null,this.selectedItem=null,this.changeDetectionRef.detectChanges()}viewEntriesDay(e){this.resetEntriesSidebarVars(),Object(ke.a)().pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.selectedDay=e.day,this.selectedItem=e.item,this.sidenavEnd.open(),this.changeDetectionRef.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(Qe),o.Nb(Z.d),o.Nb(h),o.Nb(Ve),o.Nb(o.h),o.Nb(Je.a),o.Nb(Ge.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-hour-map"]],viewQuery:function(e,t){if(1&e&&o.Lc(ft,!0),2&e){let e;o.tc(e=o.cc())&&(t.sidenavEnd=e.first)}},inputs:{person_component_id:"person_component_id"},decls:18,vars:17,consts:[["title","Mapa de horas","subtitle","Visualize todas as horas lan\xe7adas",3,"person_component_id","minimize"],["wrapperDashboardComponent",""],[1,"sidenav-container"],[3,"formGroup",4,"ngIf"],[1,"container-fluid"],[1,"row"],["infinite-scroll","",1,"wrapper-table-scrolling",3,"scrollWindow","scrolled"],["mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["message","Erro ao carregar!",4,"ngIf"],["message","Nada encontrado",4,"ngIf"],["position","start",3,"mode"],["sidenav",""],[3,"componentsParams","filterEvent",4,"ngIf"],["position","end",1,"entries-wrapper",3,"mode","closedStart"],["sidenavEnd",""],[3,"day","item","sidenav",4,"ngIf"],[3,"formGroup"],["class","col-lg-2 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"col-lg-4"],["label","Per\xedodo de datas",3,"control","options","displayFn","valueFn"],["label","Data in\xedcio",3,"control","max"],["label","Data fim",3,"control","min"],[1,"col-lg-2","d-flex","justify-content-center","align-items-center"],["mat-button","","mat-raised-button","","matTooltip","Mais filtros",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","rowNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","pessoa_nome","sticky",""],["mat-cell","","class","font-weight-bold",4,"matCellDef"],["matColumnDef","tipo"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"font-weight-bold"],[3,"matTooltip"],[3,"matColumnDef"],["mat-header-cell","",3,"isToday",4,"matHeaderCellDef"],["mat-cell","",3,"isToday",4,"matCellDef"],[3,"item","day","viewEntries"],["mat-header-row",""],["mat-row",""],["message","Erro ao carregar!"],["message","Nada encontrado"],[3,"componentsParams","filterEvent"],[3,"day","item","sidenav"]],template:function(e,t){if(1&e){const e=o.Ub();o.Tb(0,"app-wrapper-dashboard-component",0,1),o.bc("minimize",function(){return o.xc(e),o.uc(13).close()}),o.Tb(2,"mat-sidenav-container",2),o.Tb(3,"mat-sidenav-content"),o.Fc(4,vt,10,22,"form",3),o.Tb(5,"div",4),o.Tb(6,"div",5),o.Tb(7,"div",6),o.bc("scrolled",function(){return t.getMap(t.pageIndex+1)}),o.Fc(8,Mt,16,5,"table",7),o.Fc(9,Lt,1,0,"app-small-loading-spinner",8),o.Fc(10,Nt,1,0,"app-simple-message",9),o.Fc(11,Ft,1,0,"app-simple-message",10),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(12,"mat-sidenav",11,12),o.Fc(14,Rt,1,1,"app-other-filters",13),o.Sb(),o.Tb(15,"mat-sidenav",14,15),o.bc("closedStart",function(){return t.resetEntriesSidebarVars()}),o.Fc(17,Bt,1,3,"app-diaries-and-events",16),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.uc(1),i=o.uc(16);o.lc("person_component_id",t.person_component_id),o.Bb(4),o.lc("ngIf",t.filters),o.Bb(3),o.Cc("height",e.maximized?"calc(100vh - 255px)":"auto")("min-height",e.maximized?"calc(100vh - 255px)":"auto")("max-height",e.maximized?"calc(100vh - 255px)":"200px"),o.lc("scrollWindow",!1),o.Bb(1),o.lc("ngIf",t.dataSource&&!t.thereIsAnError),o.Bb(1),o.lc("ngIf",t.isLoading),o.Bb(1),o.lc("ngIf",t.thereIsAnError),o.Bb(1),o.lc("ngIf",0==(null==t.dataSource?null:t.dataSource.data.length)&&!t.isLoading),o.Bb(1),o.lc("mode",t.utilsService.isMobile()?"over":"side"),o.Bb(2),o.lc("ngIf",t.componentsParamsLoaded),o.Bb(1),o.lc("mode",t.utilsService.isMobile()?"over":"side"),o.Bb(2),o.lc("ngIf",i.opened&&t.selectedDay&&t.selectedItem)}},directives:[B,v.b,v.c,s.l,Ke.a,v.a,Z.u,Z.p,Z.h,be.a,ie.a,S.b,O.a,I.a,qe.j,qe.c,qe.e,qe.b,s.k,qe.g,qe.i,qe.d,qe.a,it,qe.f,qe.h,nt.a,he.a,rt,ht],pipes:[ut.a],styles:["mat-sidenav-container[_ngcontent-%COMP%]{background:#fff;margin-top:8px}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:16px}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   mat-icon.iconCross[_ngcontent-%COMP%], mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   mat-icon.iconCross[_ngcontent-%COMP%]{color:#ff8100;font-size:18px;height:20px;width:20px;margin-right:4px;cursor:pointer}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.isToday[_ngcontent-%COMP%], mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.isToday[_ngcontent-%COMP%]{background:#f5f5f5}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   .wrapper-table-scrolling[_ngcontent-%COMP%]{width:100%;max-width:100%}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:300px;padding:8px}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav.entries-wrapper[_ngcontent-%COMP%]{padding:0;width:618px}"],changeDetection:0}),e})();var Yt=i("STbY"),zt=i("z/S5"),kt=i("2JvD"),Ut=i("zeBE"),jt=i("tHDH"),qt=i("e7wf"),Xt=i("07+E");let $t=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}listCalculatedDemands(e,t,i,n){const s={page:String(t),size:String(i)};for(const o in n)null!=n[o]&&""!==n[o]&&(s[o]=n[o]);return this.http.get(`${this.environmentService.getAPI()}/dashboard/${e}/riscoCalculado`,{params:s})}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Qt=["matExpansionPanel"];function Vt(e,t){if(1&e&&o.Ob(0,"app-select-client-and-line-from-allocation",11),2&e){const e=o.fc();o.lc("clientControl",e.form.get("clienteId"))("lineControl",e.form.get("linhaId"))}}let Jt=(()=>{class e{constructor(e,t,i,n){this.formBuilder=e,this.messageService=t,this.permissionsService=i,this.loggedUserService=n,this.filterEvent=new o.o}ngOnInit(){this.createForm(),this.form.valid?(this.matExpansionExpanded=!1,this.filterEvent.emit(this.form.getRawValue())):this.matExpansionExpanded=!0}createForm(){const e=e=>this.componentsParams.find(t=>t.vr_chave===e);this.form=this.formBuilder.group({clienteId:[e("clienteId")?Number(e("clienteId").valor):this.loggedUserService.getClientId()],linhaId:[e("linhaId")?Number(e("linhaId").valor):this.loggedUserService.getLineId()],leaderId:[e("leaderId")?Number(e("leaderId").valor):null,[Z.t.required]],squadId:[e("squadId")?Number(e("squadId").valor):null],desenvolvedorId:[e("desenvolvedorId")?Number(e("desenvolvedorId").valor):null],tipo:[Xt.a.BY_ALLOCATIONS,[Z.t.required]]})}onResetFilters(){this.form.get("tipo").setValue(Xt.a.BY_ALLOCATIONS),this.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")&&this.form.get("clienteId").enable()}filter(){this.form.get("leaderId").value?(this.filterEvent.emit(this.form.getRawValue()),this.matExpansionPanel.close()):this.messageService.snackMessage("Preencha os filtros adequadamente!","warning")}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(Z.d),o.Nb(_.a),o.Nb(Je.a),o.Nb(u.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-risk-calculated-filters"]],viewQuery:function(e,t){if(1&e&&o.Lc(Qt,!0),2&e){let e;o.tc(e=o.cc())&&(t.matExpansionPanel=e.first)}},inputs:{componentsParams:"componentsParams"},outputs:{filterEvent:"filterEvent"},decls:19,vars:12,consts:[[3,"expanded"],["matExpansionPanel",""],[3,"formGroup"],[1,"row"],["clientSize","col-lg-6","lineSize","col-lg-6",3,"clientControl","lineControl",4,"ngIf"],[1,"col-lg-6"],["from","squads",3,"control","byLine","idLine"],[3,"control","idLine","idLeader"],[1,"col-12"],[3,"control","idSquad"],[3,"form","filterEvent","clearEvent"],["clientSize","col-lg-6","lineSize","col-lg-6",3,"clientControl","lineControl"]],template:function(e,t){1&e&&(o.Tb(0,"mat-accordion"),o.Tb(1,"mat-expansion-panel",0,1),o.Tb(3,"mat-expansion-panel-header"),o.Tb(4,"mat-panel-title"),o.Hc(5," Filtros "),o.Sb(),o.Tb(6,"mat-panel-description"),o.Tb(7,"mat-icon"),o.Hc(8,"filter_list"),o.Sb(),o.Sb(),o.Sb(),o.Tb(9,"form",2),o.Tb(10,"div",3),o.Fc(11,Vt,1,2,"app-select-client-and-line-from-allocation",4),o.Tb(12,"div",5),o.Ob(13,"app-select-leader",6),o.Sb(),o.Tb(14,"div",5),o.Ob(15,"app-select-squad",7),o.Sb(),o.Tb(16,"div",8),o.Ob(17,"app-select-allocation-dev-by-squad",9),o.Sb(),o.Sb(),o.Tb(18,"app-filters-buttons",10),o.bc("filterEvent",function(){return t.filter()})("clearEvent",function(){return t.onResetFilters()}),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(1),o.lc("expanded",t.matExpansionExpanded),o.Bb(8),o.lc("formGroup",t.form),o.Bb(2),o.lc("ngIf",t.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")),o.Bb(2),o.lc("control",t.form.get("leaderId"))("byLine",!0)("idLine",t.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")?t.form.get("linhaId").value:t.loggedUserService.getLineId()),o.Bb(2),o.lc("control",t.form.get("squadId"))("idLine",t.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")?t.form.get("linhaId").value:t.loggedUserService.getLineId())("idLeader",t.form.get("leaderId").value),o.Bb(2),o.lc("control",t.form.get("desenvolvedorId"))("idSquad",t.form.get("squadId").value),o.Bb(1),o.lc("form",t.form))},directives:[ee.a,ee.c,ee.f,ee.g,ee.e,I.a,Z.u,Z.p,Z.h,s.l,se.a,oe.a,ae.a,le.a,te.a],styles:[".mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:flex-end;align-items:center}"]}),e})();var Gt=i("XiUz"),Kt=i("+9r9");function Wt(e,t){if(1&e){const e=o.Ub();o.Tb(0,"app-risk-calculated-filters",12),o.bc("filterEvent",function(t){return o.xc(e),o.fc(2).onFilter(t)}),o.Sb()}if(2&e){const e=o.fc(2);o.lc("componentsParams",e.componentsParams)}}function Zt(e,t){if(1&e&&(o.Tb(0,"div",13),o.Tb(1,"p",14),o.Hc(2),o.Sb(),o.Sb()),2&e){const e=o.fc(2);o.Bb(2),o.Jc("Total de registros: ",e.totalElements,"")}}function ei(e,t){1&e&&o.Ob(0,"th",40)}function ti(e,t){if(1&e){const e=o.Ub();o.Tb(0,"td",41),o.Tb(1,"button",42),o.bc("click",function(i){o.xc(e);const n=t.$implicit;return o.fc(3).onContextMenu(i,n)}),o.Tb(2,"mat-icon"),o.Hc(3,"more_vert"),o.Sb(),o.Sb(),o.Sb()}}function ii(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1,"#"),o.Sb())}function ni(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.Sb()),2&e){const e=t.index;o.Bb(1),o.Jc(" ",e+1," ")}}function si(e,t){1&e&&(o.Tb(0,"th",43),o.Hc(1,"Risco"),o.Sb())}const oi=function(e,t,i){return{green:e,yellow:t,red:i}};function ai(e,t){if(1&e&&(o.Tb(0,"td",41),o.Tb(1,"div",44),o.Tb(2,"mat-icon",45),o.Hc(3," fiber_manual_record "),o.Sb(),o.Tb(4,"span",46),o.Hc(5,"("),o.Sb(),o.Tb(6,"div",47,48),o.Tb(9,"div",49),o.Tb(10,"span",50),o.Hc(11,"Desvio do prazo"),o.Sb(),o.Tb(12,"span",51),o.Hc(13),o.gc(14,"decimalNumber"),o.Sb(),o.Sb(),o.Tb(15,"mat-icon"),o.Hc(16,"info"),o.Sb(),o.Sb(),o.Tb(17,"mde-popover",52,53),o.Tb(19,"div",54,55),o.Tb(21,"div"),o.Tb(22,"h4"),o.Hc(23,"ETCc"),o.Sb(),o.Tb(24,"p"),o.Hc(25),o.gc(26,"decimalNumber"),o.Sb(),o.Sb(),o.Tb(27,"div"),o.Tb(28,"h4"),o.Hc(29,"Planejado"),o.Sb(),o.Tb(30,"p"),o.Hc(31),o.gc(32,"decimalNumber"),o.Sb(),o.Sb(),o.Tb(33,"div"),o.Tb(34,"h4"),o.Hc(35,"Fim plan."),o.Sb(),o.Tb(36,"p"),o.Hc(37),o.gc(38,"date"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(39,"div",56,57),o.Tb(42,"div",49),o.Tb(43,"span",50),o.Hc(44,"Desvio do esfor\xe7o"),o.Sb(),o.Tb(45,"span",51),o.Hc(46),o.gc(47,"decimalNumber"),o.Sb(),o.Sb(),o.Tb(48,"mat-icon"),o.Hc(49,"info"),o.Sb(),o.Sb(),o.Tb(50,"mde-popover",52,58),o.Tb(52,"div",54,59),o.Tb(54,"div"),o.Tb(55,"h4"),o.Hc(56,"ETCm"),o.Sb(),o.Tb(57,"p"),o.Hc(58),o.gc(59,"decimalNumber"),o.Sb(),o.Sb(),o.Tb(60,"div"),o.Tb(61,"h4"),o.Hc(62,"ETCc"),o.Sb(),o.Tb(63,"p"),o.Hc(64),o.gc(65,"decimalNumber"),o.Sb(),o.Sb(),o.Tb(66,"div"),o.Tb(67,"h4"),o.Hc(68,"Estimado"),o.Sb(),o.Tb(69,"p"),o.Hc(70),o.gc(71,"decimalNumber"),o.Sb(),o.Sb(),o.Tb(72,"div"),o.Tb(73,"h4"),o.Hc(74,"Incurrido"),o.Sb(),o.Tb(75,"p"),o.Hc(76),o.gc(77,"decimalNumber"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(78,"span",46),o.Hc(79,")"),o.Sb(),o.Sb(),o.Sb()),2&e){const e=t.$implicit,i=o.uc(7),n=o.uc(18),s=o.uc(20),a=o.uc(40),r=o.uc(51),c=o.uc(53),l=o.fc(3);o.Bb(2),o.Cc("color",l.risksTypesService.getColorOfRisk(e.nivelRisco)),o.lc("matTooltip",l.risksTypesService.getDescriptionOfRisk(e.nivelRisco)),o.Bb(4),o.lc("mdePopoverTriggerFor",n),o.Bb(6),o.lc("ngClass",o.qc(43,oi,e.desvioPrazo<=10,e.desvioPrazo>10&&e.desvioPrazo<=50,e.desvioPrazo>50)),o.Bb(1),o.Jc(" ",o.hc(14,24,e.desvioPrazo),"% "),o.Bb(4),o.lc("mdePopoverOverlapTrigger",!1)("mdePopoverCloseOnClick",!1)("mdePopoverOffsetX",l.utilsService.calcMdePopoverOffsetX(i,s))("mdePopoverOffsetY",l.utilsService.calcMdePopoverOffsetY(i,s)),o.Bb(8),o.Ic(o.hc(26,26,e.etcc)),o.Bb(6),o.Ic(o.hc(32,28,e.planejado)),o.Bb(6),o.Ic(o.ic(38,30,e.dtEntregaAcordada,"dd/MM/yy")),o.Bb(2),o.lc("mdePopoverTriggerFor",r),o.Bb(6),o.lc("ngClass",o.qc(47,oi,e.desvioEsforco<=10,e.desvioEsforco>10&&e.desvioEsforco<=50,e.desvioEsforco>50)),o.Bb(1),o.Jc(" ",o.hc(47,33,e.desvioEsforco),"% "),o.Bb(4),o.lc("mdePopoverOverlapTrigger",!1)("mdePopoverCloseOnClick",!1)("mdePopoverOffsetX",l.utilsService.calcMdePopoverOffsetX(a,c))("mdePopoverOffsetY",l.utilsService.calcMdePopoverOffsetY(a,c)),o.Bb(8),o.Ic(o.hc(59,35,e.etcm)),o.Bb(6),o.Ic(o.hc(65,37,e.etcc)),o.Bb(6),o.Ic(o.hc(71,39,e.horasEstimadas)),o.Bb(6),o.Ic(o.hc(77,41,e.incurrida))}}function ri(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1,"Status"),o.Sb())}function ci(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",e.statusDemanda," ")}}function li(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1,"Squad"),o.Sb())}function di(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",e.squadNome," ")}}function pi(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1,"Respons\xe1vel"),o.Sb())}function bi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",e.responsavelNome," ")}}function mi(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," T\xedtulo "),o.Sb())}function hi(e,t){if(1&e&&(o.Tb(0,"td",60),o.Hc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Ic(e.demandaTitulo)}}function ui(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," Tecnologia "),o.Sb())}function fi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Ic(e.tecnologiaNome)}}function gi(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," Estimativa "),o.Sb())}function vi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"decimalNumber"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.hc(2,1,e.horasEstimadas)," ")}}function Si(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," Incurrido "),o.Sb())}function Oi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"decimalNumber"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.hc(2,1,e.incurrida)," ")}}function Ii(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," ETCc "),o.Sb())}function Ci(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"decimalNumber"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Ic(o.hc(2,1,e.etcc))}}function Di(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," ETCm "),o.Sb())}function _i(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"decimalNumber"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Ic(o.hc(2,1,e.etcm))}}function Ti(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," Planejado "),o.Sb())}function wi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"decimalNumber"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.hc(2,1,e.planejado)," ")}}function yi(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," Recebimento "),o.Sb())}function xi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"date"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.ic(2,1,e.dtRecebimento,"dd/MM/yy")," ")}}function Ei(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," In\xedcio plan. "),o.Sb())}function Pi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"date"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.ic(2,1,e.dtEntrada,"dd/MM/yy")," ")}}function Ai(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," Fim plan. "),o.Sb())}function Mi(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"date"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.ic(2,1,e.dtEntregaAcordada,"dd/MM/yy")," ")}}function Li(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," In\xedcio real "),o.Sb())}function Ni(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"date"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.ic(2,1,e.dtInicioReal,"dd/MM/yy")," ")}}function Fi(e,t){1&e&&(o.Tb(0,"th",40),o.Hc(1," Entrega real "),o.Sb())}function Ri(e,t){if(1&e&&(o.Tb(0,"td",41),o.Hc(1),o.gc(2,"date"),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Jc(" ",o.ic(2,1,e.dtFimReal,"dd/MM/yy")," ")}}function Bi(e,t){1&e&&o.Ob(0,"tr",61)}function Hi(e,t){if(1&e){const e=o.Ub();o.Tb(0,"tr",62),o.bc("contextmenu",function(i){o.xc(e);const n=t.$implicit;return o.fc(3).onContextMenu(i,n)}),o.Sb()}}function Yi(e,t){if(1&e&&(o.Tb(0,"table",15),o.Rb(1,16),o.Fc(2,ei,1,0,"th",17),o.Fc(3,ti,4,0,"td",18),o.Qb(),o.Rb(4,19),o.Fc(5,ii,2,0,"th",17),o.Fc(6,ni,2,1,"td",18),o.Qb(),o.Rb(7,20),o.Fc(8,si,2,0,"th",21),o.Fc(9,ai,80,51,"td",18),o.Qb(),o.Rb(10,22),o.Fc(11,ri,2,0,"th",17),o.Fc(12,ci,2,1,"td",18),o.Qb(),o.Rb(13,23),o.Fc(14,li,2,0,"th",17),o.Fc(15,di,2,1,"td",18),o.Qb(),o.Rb(16,24),o.Fc(17,pi,2,0,"th",17),o.Fc(18,bi,2,1,"td",18),o.Qb(),o.Rb(19,25),o.Fc(20,mi,2,0,"th",17),o.Fc(21,hi,2,1,"td",26),o.Qb(),o.Rb(22,27),o.Fc(23,ui,2,0,"th",17),o.Fc(24,fi,2,1,"td",18),o.Qb(),o.Rb(25,28),o.Fc(26,gi,2,0,"th",17),o.Fc(27,vi,3,3,"td",18),o.Qb(),o.Rb(28,29),o.Fc(29,Si,2,0,"th",17),o.Fc(30,Oi,3,3,"td",18),o.Qb(),o.Rb(31,30),o.Fc(32,Ii,2,0,"th",17),o.Fc(33,Ci,3,3,"td",18),o.Qb(),o.Rb(34,31),o.Fc(35,Di,2,0,"th",17),o.Fc(36,_i,3,3,"td",18),o.Qb(),o.Rb(37,32),o.Fc(38,Ti,2,0,"th",17),o.Fc(39,wi,3,3,"td",18),o.Qb(),o.Rb(40,33),o.Fc(41,yi,2,0,"th",17),o.Fc(42,xi,3,4,"td",18),o.Qb(),o.Rb(43,34),o.Fc(44,Ei,2,0,"th",17),o.Fc(45,Pi,3,4,"td",18),o.Qb(),o.Rb(46,35),o.Fc(47,Ai,2,0,"th",17),o.Fc(48,Mi,3,4,"td",18),o.Qb(),o.Rb(49,36),o.Fc(50,Li,2,0,"th",17),o.Fc(51,Ni,3,4,"td",18),o.Qb(),o.Rb(52,37),o.Fc(53,Fi,2,0,"th",17),o.Fc(54,Ri,3,4,"td",18),o.Qb(),o.Fc(55,Bi,1,0,"tr",38),o.Fc(56,Hi,1,0,"tr",39),o.Sb()),2&e){const e=o.fc(2);o.lc("dataSource",e.dataSource),o.Bb(55),o.lc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),o.Bb(1),o.lc("matRowDefColumns",e.displayedColumns)}}function zi(e,t){1&e&&o.Ob(0,"app-loading-spinner")}function ki(e,t){1&e&&o.Ob(0,"app-simple-message",63)}function Ui(e,t){if(1&e){const e=o.Ub();o.Rb(0),o.Fc(1,Wt,1,1,"app-risk-calculated-filters",5),o.Tb(2,"div",6),o.Fc(3,Zt,3,1,"div",7),o.Tb(4,"div",8),o.bc("scrolled",function(){o.xc(e);const t=o.fc();return t.list(t.pageIndex+1)}),o.Fc(5,Yi,57,4,"table",9),o.Fc(6,zi,1,0,"app-loading-spinner",2),o.Ob(7,"div",10),o.Fc(8,ki,1,0,"app-simple-message",11),o.Sb(),o.Sb(),o.Qb()}if(2&e){const e=o.fc(),t=o.uc(1),i=o.uc(5);o.Bb(1),o.lc("ngIf",e.hasPermissionToFilter()),o.Bb(2),o.lc("ngIf",e.filters),o.Bb(1),o.Cc("height",t.maximized?e.hasPermissionToFilter()?"calc(100vh - 200px)":"calc(100vh - 140px)":"auto")("min-height",t.maximized?e.hasPermissionToFilter()?"calc(100vh - 200px)":"calc(100vh - 140px)":"auto")("max-height",t.maximized?e.hasPermissionToFilter()?"calc(100vh - 200px)":"calc(100vh - 140px)":"200px"),o.lc("scrollWindow",!1),o.Bb(1),o.lc("ngIf",e.dataSource),o.Bb(1),o.lc("ngIf",e.isLoading),o.Bb(1),o.Cc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),o.lc("matMenuTriggerFor",i),o.Bb(1),o.lc("ngIf",0==(null==e.dataSource?null:e.dataSource.data.length)&&!e.isLoading)}}function ji(e,t){1&e&&o.Ob(0,"app-small-loading-spinner")}function qi(e,t){if(1&e){const e=o.Ub();o.Tb(0,"button",64),o.bc("click",function(){o.xc(e);const i=t.item;return o.fc().openDiaryModal(i)}),o.Hc(1,"Di\xe1rios"),o.Sb(),o.Tb(2,"button",64),o.bc("click",function(){o.xc(e);const i=t.item;return o.fc().openBlockModal(i)}),o.Hc(3,"Bloqueios"),o.Sb(),o.Tb(4,"button",64),o.bc("click",function(){o.xc(e);const i=t.item;return o.fc().openDefectsModal(i)}),o.Hc(5,"Defeitos"),o.Sb(),o.Tb(6,"button",64),o.bc("click",function(){o.xc(e);const i=t.item;return o.fc().openRisksModal(i)}),o.Hc(7,"Riscos"),o.Sb()}}let Xi=(()=>{class e{constructor(e,t,i,n,s,o,a,r){this.dashboardService=e,this.messageService=t,this.modalService=i,this.riskCalculatedService=n,this.permissionsService=s,this.loggedUserService=o,this.utilsService=a,this.risksTypesService=r,this.componentsParamsLoaded=!1,this.pageSize=10,this.pageIndex=0,this.totalElements=0,this.displayedColumns=["actions","rowNumber","risco","statusDemanda","squadNome","responsavelNome","demandaTitulo","tecnologiaNome","horasEstimadas","incurrida","etcc","etcm","planejado","dtRecebimento","dtEntrada","dtEntregaAcordada","dtInicioReal","dtFimReal"],this.isLoading=!1,this.contextMenuPosition=new zt.a,this.unsubscribeNotifier=new d.a}ngOnInit(){this.hasPermissionToFilter()?this.getComponentParams():this.loggedUserService.isTechnical()&&(this.filters={clienteId:this.loggedUserService.getClientId(),linhaId:this.loggedUserService.getLineId(),desenvolvedorId:this.loggedUserService.getPersonId(),tipo:Xt.a.BY_ALLOCATIONS},this.list(0))}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}hasPermissionToFilter(){return this.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")}onContextMenu(e,t){this.contextMenuPosition=this.utilsService.openContextMenu(e,this.contextMenu,{item:t})}getComponentParams(){this.componentsParamsLoaded=!1,this.dashboardService.getComponentParams(this.person_component_id).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.componentsParams=e,()=>this.componentsParams=[]).add(()=>this.componentsParamsLoaded=!0)}onFilter(e){this.filters=e,this.list(0)}list(e){0===e&&(this.dataSource=new qe.k([])),this.pageIndex=e,this.isLoading=!0,this.riskCalculatedService.listCalculatedDemands(this.person_component_id,this.pageIndex,this.pageSize,this.filters).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>{this.dataSource=new qe.k(this.dataSource.data.concat(e.content)),this.totalElements=e.totalElements},()=>{this.messageService.snackMessage("Erro ao listar riscos prov\xe1veis!","error"),this.dataSource=new qe.k([])}).add(()=>this.isLoading=!1)}openBlockModal(e){this.modalService.open(qt.a,{demand:Object.assign(Object.assign({},e),{demanda_id:e.demandaId,titulo:e.demandaTitulo}),allowsCreate:!1,allowsEdit:!1,allowsRemove:!1},{width:"50vw",maxWidth:"50vw"})}openDefectsModal(e){this.modalService.open(jt.a,{demand:Object.assign(Object.assign({},e),{demanda_id:e.demandaId,titulo:e.demandaTitulo}),allowsCreate:!1,allowsEdit:!1,allowsRemove:!1},{width:"50vw",maxWidth:"50vw"})}openDiaryModal(e){this.modalService.open(Ut.a,{demand:Object.assign(Object.assign({},e),{demanda_id:e.demandaId,titulo:e.demandaTitulo}),allowsCreate:!1,allowsEdit:!1,allowsRemove:!1},{width:"50vw",maxWidth:"50vw"})}openRisksModal(e){this.modalService.open(kt.a,{demand:Object.assign(Object.assign({},e),{demanda_id:e.demandaId,titulo:e.demandaTitulo}),allowsCreate:!1,allowsEdit:!1,allowsRemove:!1},{width:"50vw",maxWidth:"50vw"})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(h),o.Nb(_.a),o.Nb(y.a),o.Nb($t),o.Nb(Je.a),o.Nb(u.a),o.Nb(Ge.a),o.Nb(xe.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-risk-calculated"]],viewQuery:function(e,t){if(1&e&&o.Lc(Yt.e,!0),2&e){let e;o.tc(e=o.cc())&&(t.contextMenu=e.first)}},inputs:{person_component_id:"person_component_id"},decls:7,vars:3,consts:[["title","Risco prov\xe1vel","subtitle","Visualize os riscos prov\xe1veis atrav\xe9s de c\xe1lculos de desvio a partir de cada demanda em andamento",3,"person_component_id"],["wrapperDashboardComponent",""],[4,"ngIf"],["contextMenu","matMenu"],["matMenuContent",""],[3,"componentsParams","filterEvent",4,"ngIf"],[1,"mt-1"],["fxLayoutAlign","end center mb-2",4,"ngIf"],["infinite-scroll","",1,"wrapper-table-scrolling",3,"scrollWindow","scrolled"],["mat-table","",3,"dataSource",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["message","Nenhuma demanda para estes filtros.",4,"ngIf"],[3,"componentsParams","filterEvent"],["fxLayoutAlign","end center mb-2"],[1,"table-count"],["mat-table","",3,"dataSource"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rowNumber"],["matColumnDef","risco"],["mat-header-cell","","class","align-center",4,"matHeaderCellDef"],["matColumnDef","statusDemanda"],["matColumnDef","squadNome"],["matColumnDef","responsavelNome"],["matColumnDef","demandaTitulo"],["mat-cell","","class","font-weight-bold",4,"matCellDef"],["matColumnDef","tecnologiaNome"],["matColumnDef","horasEstimadas"],["matColumnDef","incurrida"],["matColumnDef","etcc"],["matColumnDef","etcm"],["matColumnDef","planejado"],["matColumnDef","dtRecebimento"],["matColumnDef","dtEntrada"],["matColumnDef","dtEntregaAcordada"],["matColumnDef","dtInicioReal"],["matColumnDef","dtFimReal"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"contextmenu",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-cell","",1,"align-center"],["fxLayoutAlign","center center"],[3,"matTooltip"],[1,"symbol"],["matTooltip","Clique para visualizar os detalhes","mdePopoverTriggerOn","click",1,"pointer","info","mr-1",3,"mdePopoverTriggerFor"],["deadlineRef","","popoverTrigger","mdePopoverTrigger"],[1,"wrapper-text"],[1,"label"],[1,"value",3,"ngClass"],[3,"mdePopoverOverlapTrigger","mdePopoverCloseOnClick","mdePopoverOffsetX","mdePopoverOffsetY"],["deadlinePopover","mdePopover"],[1,"wrapper-popover-cross"],["popoverDeadlineRef",""],["matTooltip","Clique para visualizar os detalhes","mdePopoverTriggerOn","click",1,"pointer","info",3,"mdePopoverTriggerFor"],["effortRef","","popoverTrigger","mdePopoverTrigger"],["effortPopover","mdePopover"],["popoverEffortRef",""],["mat-cell","",1,"font-weight-bold"],["mat-header-row",""],["mat-row","",3,"contextmenu"],["message","Nenhuma demanda para estes filtros."],["mat-menu-item","",3,"click"]],template:function(e,t){1&e&&(o.Tb(0,"app-wrapper-dashboard-component",0,1),o.Fc(2,Ui,9,17,"ng-container",2),o.Fc(3,ji,1,0,"app-small-loading-spinner",2),o.Sb(),o.Tb(4,"mat-menu",null,3),o.Fc(6,qi,8,0,"ng-template",4),o.Sb()),2&e&&(o.lc("person_component_id",t.person_component_id),o.Bb(2),o.lc("ngIf",t.componentsParamsLoaded||!t.hasPermissionToFilter()),o.Bb(1),o.lc("ngIf",!t.componentsParamsLoaded&&t.hasPermissionToFilter()))},directives:[B,s.l,Yt.a,Yt.b,Ke.a,Yt.e,Jt,Gt.a,qe.j,qe.c,qe.e,qe.b,qe.g,qe.i,qe.d,qe.a,S.b,I.a,O.a,Kt.c,s.j,Ze.a,Kt.a,qe.f,qe.h,Y.a,he.a,nt.a,Yt.c],pipes:[ut.a,s.e],styles:[".wrapper-table-scrolling[_ngcontent-%COMP%]   .align-center[_ngcontent-%COMP%]{text-align:center}.pointer[_ngcontent-%COMP%]{cursor:pointer}.info[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid #dcdcdc;padding:4px;border-radius:6px}.info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:color;font-size:18px;height:16px;width:16px}.info[_ngcontent-%COMP%]   .wrapper-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:1px solid #dcdcdc;margin-right:4px;padding-right:4px}.info[_ngcontent-%COMP%]   .wrapper-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.info[_ngcontent-%COMP%]   .wrapper-text[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{font-size:10px;font-weight:500}.info[_ngcontent-%COMP%]   .wrapper-text[_ngcontent-%COMP%]   span.value[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.info[_ngcontent-%COMP%]   .wrapper-text[_ngcontent-%COMP%]   span.value.green[_ngcontent-%COMP%]{color:#4caf50}.info[_ngcontent-%COMP%]   .wrapper-text[_ngcontent-%COMP%]   span.value.yellow[_ngcontent-%COMP%]{color:#ff9800}.info[_ngcontent-%COMP%]   .wrapper-text[_ngcontent-%COMP%]   span.value.red[_ngcontent-%COMP%]{color:#b30909}.symbol[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin:0 4px}.wrapper-popover-cross[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem 1rem;border-radius:4px;box-shadow:8px 0 74px -15px rgba(0,0,0,.73);border-radius:6px;display:flex}.wrapper-popover-cross[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-child){margin-left:24px}.wrapper-popover-cross[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin-bottom:6px}.wrapper-popover-cross[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}"]}),e})();var $i=i("DVq8");const Qi=["matExpansionPanel"];function Vi(e,t){if(1&e&&(o.Tb(0,"div",5),o.Ob(1,"app-select-client-and-line-from-allocation",6),o.Tb(2,"div",7),o.Ob(3,"app-select-leader",8),o.Sb(),o.Tb(4,"div",7),o.Ob(5,"app-select-squad",9),o.Sb(),o.Sb()),2&e){const e=o.fc();o.Bb(1),o.lc("clientControl",e.form.get("clienteId"))("lineControl",e.form.get("linhaId")),o.Bb(2),o.lc("control",e.form.get("liderId"))("byLine",!0)("idLine",e.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")?e.form.get("linhaId").value:e.loggedUserService.getLineId()),o.Bb(2),o.lc("control",e.form.get("squadId"))("idLine",e.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")?e.form.get("linhaId").value:e.loggedUserService.getLineId())("idLeader",e.form.get("liderId").value)}}function Ji(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",5),o.Tb(1,"div",10),o.Tb(2,"app-select-allocation-squad",11),o.bc("allocationsLoaded",function(t){return o.xc(e),o.fc().onAllocationsSquadLoaded(t)}),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.Bb(2),o.lc("control",e.form.get("squadId"))("idDev",e.loggedUserService.getPersonId())}}let Gi=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.permissionsService=t,this.loggedUserService=i,this.filterEvent=new o.o,this.matExpansionExpanded=!0}ngOnInit(){this.createForm(),this.form.valid&&this.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")&&(this.matExpansionExpanded=!1,this.filterEvent.emit(this.form.getRawValue()))}createForm(){const e=e=>this.componentsParams.find(t=>t.vr_chave===e);this.form=this.formBuilder.group({clienteId:[e("clienteId")&&!this.loggedUserService.isTechnical()?Number(e("clienteId").valor):null],linhaId:[e("linhaId")&&!this.loggedUserService.isTechnical()?Number(e("linhaId").valor):null],liderId:[e("liderId")&&!this.loggedUserService.isTechnical()?Number(e("liderId").valor):null],squadId:[e("squadId")&&!this.loggedUserService.isTechnical()?Number(e("squadId").valor):null,this.loggedUserService.isTechnical()?[Z.t.required]:[]]})}onResetFilters(){this.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")&&this.form.get("clienteId").enable()}filter(){this.filterEvent.emit(this.form.getRawValue()),this.matExpansionPanel.close()}onAllocationsSquadLoaded(e){if(1===e.length){const t=e[0];t&&t.squad&&(this.form.get("squadId").setValue(t.squad.squad_id),this.filter())}}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(Z.d),o.Nb(Je.a),o.Nb(u.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-delayed-demands-filters"]],viewQuery:function(e,t){if(1&e&&o.Lc(Qi,!0),2&e){let e;o.tc(e=o.cc())&&(t.matExpansionPanel=e.first)}},inputs:{componentsParams:"componentsParams"},outputs:{filterEvent:"filterEvent"},decls:13,vars:5,consts:[[3,"expanded"],["matExpansionPanel",""],[3,"formGroup"],["class","row",4,"ngIf"],[3,"form","filterEvent","clearEvent"],[1,"row"],["clientSize","col-lg-6","lineSize","col-lg-6",3,"clientControl","lineControl"],[1,"col-lg-6"],["from","squads",3,"control","byLine","idLine"],[3,"control","idLine","idLeader"],[1,"col-12"],[3,"control","idDev","allocationsLoaded"]],template:function(e,t){1&e&&(o.Tb(0,"mat-accordion"),o.Tb(1,"mat-expansion-panel",0,1),o.Tb(3,"mat-expansion-panel-header"),o.Tb(4,"mat-panel-title"),o.Hc(5," Filtros "),o.Sb(),o.Tb(6,"mat-panel-description"),o.Tb(7,"mat-icon"),o.Hc(8,"filter_list"),o.Sb(),o.Sb(),o.Sb(),o.Tb(9,"form",2),o.Fc(10,Vi,6,8,"div",3),o.Fc(11,Ji,3,2,"div",3),o.Tb(12,"app-filters-buttons",4),o.bc("filterEvent",function(){return t.filter()})("clearEvent",function(){return t.onResetFilters()}),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(1),o.lc("expanded",t.matExpansionExpanded),o.Bb(8),o.lc("formGroup",t.form),o.Bb(1),o.lc("ngIf",t.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")),o.Bb(1),o.lc("ngIf",t.loggedUserService.isTechnical()),o.Bb(1),o.lc("form",t.form))},directives:[ee.a,ee.c,ee.f,ee.g,ee.e,I.a,Z.u,Z.p,Z.h,s.l,le.a,te.a,se.a,oe.a,$i.a],styles:[".mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:flex-end;align-items:center}"]}),e})(),Ki=(()=>{class e{constructor(e,t){this.http=e,this.environmentService=t}getDelayedDemands(e,t){const i={};for(const n in t)null!=t[n]&&""!==t[n]&&(i[n]=t[n]);return this.http.get(`${this.environmentService.getAPI()}/dashboard/${e}/atividadeAtrasada`,{params:i})}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(b.b),o.Xb(m.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Wi(e,t){if(1&e){const e=o.Ub();o.Tb(0,"button",9),o.bc("click",function(){return o.xc(e),o.fc(3).backChild()}),o.Tb(1,"mat-icon"),o.Hc(2,"arrow_back"),o.Sb(),o.Sb()}}function Zi(e,t){if(1&e&&(o.Tb(0,"div",6),o.Tb(1,"h4",7),o.Hc(2),o.Sb(),o.Fc(3,Wi,3,0,"button",8),o.Sb()),2&e){const e=o.fc(2);o.Bb(2),o.Ic(e.getTitle()),o.Bb(1),o.lc("ngIf",e.chainDelayedDemandsItems.length>1)}}function en(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",3),o.Fc(1,Zi,4,2,"div",4),o.Tb(2,"app-dashboard-bar-chart",5),o.bc("clickEvent",function(t){return o.xc(e),o.fc().onClickColumn(t)}),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.Bb(1),o.lc("ngIf",""==!e.getTitle()||e.chainDelayedDemandsItems.length>1),o.Bb(1),o.lc("data",e.chartData)("labels",e.chartLabels)}}function tn(e,t){1&e&&(o.Tb(0,"div",10),o.Ob(1,"app-small-loading-spinner"),o.Sb())}function nn(e,t){1&e&&o.Ob(0,"app-simple-message",11)}let sn=(()=>{class e{constructor(e,t,i){this.delayedDemandsService=e,this.permissionsService=t,this.loggedUserService=i,this.chartData=[],this.chartLabels=[],this.chainDelayedDemandsItems=[],this.unsubscribeNotifier=new d.a}ngOnInit(){}ngOnChanges(){this.getDelayedDemands()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}onClickColumn(e){this.currentDelayedDemandItem.children&&e>=0&&"Develop"!==this.currentDelayedDemandItem.children[0].tipo&&this.viewChild(this.currentDelayedDemandItem.children[e])}getDelayedDemands(){this.isLoading=!0,this.thereIsAnError=!1,this.delayedDemandsService.getDelayedDemands(this.person_component_id,this.filters).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>{var t,i,n,s,o,a,r,c,l,d,p,b,m,h,u,f;this.delayedDemandsData=(null===(t=this.filters)||void 0===t?void 0:t.clienteId)||!this.permissionsService.isAdmin()&&!this.permissionsService.isAdminLocale()?!(null===(i=this.filters)||void 0===i?void 0:i.clienteId)&&this.permissionsService.isAdminClient()&&(null==e?void 0:e.children[0])||(null===(n=this.filters)||void 0===n?void 0:n.clienteId)&&!this.filters.linhaId&&(null==e?void 0:e.children[0])&&(this.permissionsService.isAdmin()||this.permissionsService.isAdminLocale()||this.permissionsService.isAdminClient())?e.children[0]:!(null===(s=this.filters)||void 0===s?void 0:s.clienteId)&&this.permissionsService.isAdminClientLine()&&(null===(o=null==e?void 0:e.children[0])||void 0===o?void 0:o.children[0])||(null===(a=this.filters)||void 0===a?void 0:a.linhaId)&&!(null===(r=this.filters)||void 0===r?void 0:r.liderId)&&(null===(c=null==e?void 0:e.children[0])||void 0===c?void 0:c.children[0])&&(this.permissionsService.isAdmin()||this.permissionsService.isAdminLocale()||this.permissionsService.isAdminClient()||this.permissionsService.isAdminClientLine())?e.children[0].children[0]:(null===(l=this.filters)||void 0===l?void 0:l.liderId)&&!(null===(d=this.filters)||void 0===d?void 0:d.squadId)&&(null===(b=null===(p=null==e?void 0:e.children[0])||void 0===p?void 0:p.children[0])||void 0===b?void 0:b.children[0])&&(this.permissionsService.isAdmin()||this.permissionsService.isAdminLocale()||this.permissionsService.isAdminClient()||this.permissionsService.isAdminClientLine())?e.children[0].children[0].children[0]:(null===(m=this.filters)||void 0===m?void 0:m.squadId)&&(null===(f=null===(u=null===(h=null==e?void 0:e.children[0])||void 0===h?void 0:h.children[0])||void 0===u?void 0:u.children[0])||void 0===f?void 0:f.children[0])&&(this.permissionsService.isAdmin()||this.permissionsService.isAdminLocale()||this.permissionsService.isAdminClient()||this.permissionsService.isAdminClientLine()||this.loggedUserService.isTechnical())?e.children[0].children[0].children[0].children[0]:e:e,this.viewChild(this.delayedDemandsData)},()=>{this.thereIsAnError=!0,this.isLoading=!1})}viewChild(e){this.isLoading=!0,Object(ke.a)(500).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.currentDelayedDemandItem=e,this.chainDelayedDemandsItems.push(e),this.chartData=this.currentDelayedDemandItem.children.map(e=>e.qtdeAtrasada),this.chartLabels=this.currentDelayedDemandItem.children.map(e=>e.descricao),this.isLoading=!1})}backChild(){this.isLoading=!0,Object(ke.a)(500).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.currentDelayedDemandItem=this.chainDelayedDemandsItems[this.chainDelayedDemandsItems.length-2],this.chainDelayedDemandsItems.pop(),this.chartData=this.currentDelayedDemandItem.children.map(e=>e.qtdeAtrasada),this.chartLabels=this.currentDelayedDemandItem.children.map(e=>e.descricao),this.isLoading=!1})}getTitle(){var e;if(0===this.chartData.length)return"";switch(null===(e=this.currentDelayedDemandItem)||void 0===e?void 0:e.tipo.toUpperCase()){case"DIRETOR":return"Clientes";case"CLIENTE":return"Linhas: "+this.currentDelayedDemandItem.descricao;case"LINHA":return"L\xedderes: "+this.currentDelayedDemandItem.descricao;case"LIDER":return"Squads: "+this.currentDelayedDemandItem.descricao;case"SQUAD":return"Desenvolvedores: "+this.currentDelayedDemandItem.descricao;default:return""}}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(Ki),o.Nb(Je.a),o.Nb(u.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-delayed-demands-chart"]],inputs:{filters:"filters",person_component_id:"person_component_id"},features:[o.zb],decls:3,vars:3,consts:[["class","content-chart",4,"ngIf"],["class","d-flex align-items-center justify-content-center wrapper-loading",4,"ngIf"],["message","Erro ao carregar!",4,"ngIf"],[1,"content-chart"],["class","header d-flex justify-content-between align-items-center",4,"ngIf"],["name","Quantidade de demandas atrasadas",3,"data","labels","clickEvent"],[1,"header","d-flex","justify-content-between","align-items-center"],["ngif",""],["mat-button","","mat-raised-button","","matTooltip","Voltar um n\xedvel",3,"click",4,"ngIf"],["mat-button","","mat-raised-button","","matTooltip","Voltar um n\xedvel",3,"click"],[1,"d-flex","align-items-center","justify-content-center","wrapper-loading"],["message","Erro ao carregar!"]],template:function(e,t){1&e&&(o.Fc(0,en,3,3,"div",0),o.Fc(1,tn,2,0,"div",1),o.Fc(2,nn,1,0,"app-simple-message",2)),2&e&&(o.lc("ngIf",!t.isLoading&&!t.thereIsAnError),o.Bb(1),o.lc("ngIf",t.isLoading),o.Bb(1),o.lc("ngIf",t.thereIsAnError))},directives:[s.l,ge,S.b,O.a,I.a,nt.a,he.a],styles:[".header[_ngcontent-%COMP%]{background:#f5f5f5;padding:12px;margin-top:12px}.header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.wrapper-loading[_ngcontent-%COMP%]{min-height:400px}"]}),e})();function on(e,t){if(1&e){const e=o.Ub();o.Tb(0,"app-delayed-demands-filters",4),o.bc("filterEvent",function(t){return o.xc(e),o.fc(2).onFilter(t)}),o.Sb()}if(2&e){const e=o.fc(2);o.lc("componentsParams",e.componentsParams)}}function an(e,t){if(1&e&&(o.Tb(0,"div",5),o.Ob(1,"app-delayed-demands-chart",6),o.Sb()),2&e){const e=o.fc(2);o.Bb(1),o.lc("person_component_id",e.person_component_id)("filters",e.filters)}}function rn(e,t){if(1&e&&(o.Rb(0),o.Fc(1,on,1,1,"app-delayed-demands-filters",2),o.Fc(2,an,2,2,"div",3),o.Qb()),2&e){const e=o.fc();o.Bb(1),o.lc("ngIf",e.permissionsService.hasPermission("ROLE_ALOCACAO_CROSS")||e.loggedUserService.isTechnical()),o.Bb(1),o.lc("ngIf",e.filters)}}function cn(e,t){1&e&&o.Ob(0,"app-small-loading-spinner")}let ln=(()=>{class e{constructor(e,t,i){this.dashboardService=e,this.permissionsService=t,this.loggedUserService=i,this.componentsParamsLoaded=!1,this.unsubscribeNotifier=new d.a}ngOnInit(){this.getComponentParams()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}getComponentParams(){this.componentsParamsLoaded=!1,this.dashboardService.getComponentParams(this.person_component_id).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.componentsParams=e,()=>this.componentsParams=[]).add(()=>this.componentsParamsLoaded=!0)}onFilter(e){this.filters=e}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(h),o.Nb(Je.a),o.Nb(u.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-delayed-demands"]],inputs:{person_component_id:"person_component_id"},decls:3,vars:4,consts:[["title","Demandas atrasadas","subtitle","Visualize o n\xfamero de demandas que est\xe3o atrasadas",3,"person_component_id","showMaximize"],[4,"ngIf"],[3,"componentsParams","filterEvent",4,"ngIf"],["class","mt-1",4,"ngIf"],[3,"componentsParams","filterEvent"],[1,"mt-1"],[3,"person_component_id","filters"]],template:function(e,t){1&e&&(o.Tb(0,"app-wrapper-dashboard-component",0),o.Fc(1,rn,3,2,"ng-container",1),o.Fc(2,cn,1,0,"app-small-loading-spinner",1),o.Sb()),2&e&&(o.lc("person_component_id",t.person_component_id)("showMaximize",!1),o.Bb(1),o.lc("ngIf",t.componentsParamsLoaded),o.Bb(1),o.lc("ngIf",!t.componentsParamsLoaded))},directives:[B,s.l,Gi,sn,nt.a],styles:[""]}),e})();function dn(e,t){if(1&e&&o.Ob(0,"app-number-people-my-client",4),2&e){const e=o.fc();o.lc("person_component_id",e.hasComponent(e.dashboardComponentsEnum.NUMBER_PROFESSIONALS_MY_CLIENT).pessoa_componente_id)}}function pn(e,t){if(1&e&&o.Ob(0,"app-number-people-my-line",4),2&e){const e=o.fc();o.lc("person_component_id",e.hasComponent(e.dashboardComponentsEnum.NUMBER_PROFESSIONALS_MY_LINE).pessoa_componente_id)}}function bn(e,t){if(1&e&&o.Ob(0,"app-number-people-my-cell",4),2&e){const e=o.fc();o.lc("person_component_id",e.hasComponent(e.dashboardComponentsEnum.NUMBER_PROFESSIONALS_MY_CELL).pessoa_componente_id)}}function mn(e,t){if(1&e&&o.Ob(0,"app-dashboard-executive",5),2&e){const e=o.fc();o.lc("person_component_id",e.hasComponent(e.dashboardComponentsEnum.DASH_EXECUTIVE).pessoa_componente_id)}}function hn(e,t){if(1&e&&o.Ob(0,"app-hour-map",5),2&e){const e=o.fc();o.lc("person_component_id",e.hasComponent(e.dashboardComponentsEnum.HOUR_MAP).pessoa_componente_id)}}function un(e,t){if(1&e&&o.Ob(0,"app-risk-calculated",5),2&e){const e=o.fc();o.lc("person_component_id",e.hasComponent(e.dashboardComponentsEnum.RISK_CALCULATED).pessoa_componente_id)}}function fn(e,t){if(1&e&&o.Ob(0,"app-delayed-demands",5),2&e){const e=o.fc();o.lc("person_component_id",e.hasComponent(e.dashboardComponentsEnum.DELAYED_DEMANDS).pessoa_componente_id)}}let gn=(()=>{class e{constructor(){this.myComponents=[],this.dashboardComponentsEnum=C}ngOnInit(){}hasComponent(e){return this.myComponents.find(t=>t.componente.componente_id===e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-switch-components"]],inputs:{myComponents:"myComponents"},decls:9,vars:7,consts:[[1,"container-fluid"],[1,"row"],["class","col-lg-4",3,"person_component_id",4,"ngIf"],["class","col-12",3,"person_component_id",4,"ngIf"],[1,"col-lg-4",3,"person_component_id"],[1,"col-12",3,"person_component_id"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Fc(2,dn,1,1,"app-number-people-my-client",2),o.Fc(3,pn,1,1,"app-number-people-my-line",2),o.Fc(4,bn,1,1,"app-number-people-my-cell",2),o.Fc(5,mn,1,1,"app-dashboard-executive",3),o.Fc(6,hn,1,1,"app-hour-map",3),o.Fc(7,un,1,1,"app-risk-calculated",3),o.Fc(8,fn,1,1,"app-delayed-demands",3),o.Sb(),o.Sb()),2&e&&(o.Bb(2),o.lc("ngIf",t.hasComponent(t.dashboardComponentsEnum.NUMBER_PROFESSIONALS_MY_CLIENT)),o.Bb(1),o.lc("ngIf",t.hasComponent(t.dashboardComponentsEnum.NUMBER_PROFESSIONALS_MY_LINE)),o.Bb(1),o.lc("ngIf",t.hasComponent(t.dashboardComponentsEnum.NUMBER_PROFESSIONALS_MY_CELL)),o.Bb(1),o.lc("ngIf",t.hasComponent(t.dashboardComponentsEnum.DASH_EXECUTIVE)),o.Bb(1),o.lc("ngIf",t.hasComponent(t.dashboardComponentsEnum.HOUR_MAP)),o.Bb(1),o.lc("ngIf",t.hasComponent(t.dashboardComponentsEnum.RISK_CALCULATED)),o.Bb(1),o.lc("ngIf",t.hasComponent(t.dashboardComponentsEnum.DELAYED_DEMANDS)))},directives:[s.l,U,$,G,ze,Ht,Xi,ln],styles:[""]}),e})();var vn=i("A5z7");function Sn(e,t){1&e&&o.Ob(0,"app-simple-message",6)}function On(e,t){1&e&&o.Ob(0,"app-loading-spinner")}function In(e,t){1&e&&(o.Tb(0,"mat-chip-list"),o.Tb(1,"mat-chip"),o.Hc(2," J\xe1 est\xe1 na dashboard "),o.Sb(),o.Sb())}function Cn(e,t){if(1&e){const e=o.Ub();o.Tb(0,"button",13),o.bc("click",function(){o.xc(e);const t=o.fc().$implicit;return o.fc().chooseComponent(t.componente_id)}),o.Tb(1,"mat-icon"),o.Hc(2,"touch_app"),o.Sb(),o.Hc(3," SELECIONAR INDICADOR "),o.Sb()}}function Dn(e,t){if(1&e){const e=o.Ub();o.Tb(0,"button",14),o.bc("click",function(){o.xc(e);const t=o.fc().$implicit,i=o.fc();return i.confirmRemoveComponent(i.dashboardService.componentOnTheDashboard(t.componente_id,i.myComponents))}),o.Tb(1,"mat-icon"),o.Hc(2,"delete_outline"),o.Sb(),o.Hc(3," REMOVER DA DASHBOARD "),o.Sb()}}function _n(e,t){1&e&&o.Ob(0,"hr")}function Tn(e,t){if(1&e&&(o.Rb(0),o.Tb(1,"div",7),o.Tb(2,"div",8),o.Fc(3,In,3,0,"mat-chip-list",2),o.Tb(4,"h4",9),o.Hc(5),o.Sb(),o.Tb(6,"p",10),o.Hc(7),o.Sb(),o.Sb(),o.Fc(8,Cn,4,0,"button",11),o.Fc(9,Dn,4,0,"button",12),o.Sb(),o.Fc(10,_n,1,0,"hr",2),o.Qb()),2&e){const e=t.$implicit,i=t.last,n=o.fc();o.Bb(3),o.lc("ngIf",n.dashboardService.componentOnTheDashboard(e.componente_id,n.myComponents)),o.Bb(2),o.Ic(e.nome),o.Bb(2),o.Ic(e.descricao),o.Bb(1),o.lc("ngIf",!n.dashboardService.componentOnTheDashboard(e.componente_id,n.myComponents)),o.Bb(1),o.lc("ngIf",n.dashboardService.componentOnTheDashboard(e.componente_id,n.myComponents)),o.Bb(1),o.lc("ngIf",!i)}}let wn=(()=>{class e{constructor(e,t,i,n,s){this.loadingService=e,this.messageService=t,this.loggedUserService=i,this.errorHandlerService=n,this.dashboardService=s,this.refreshComponents=new o.o,this.closeEvent=new o.o,this.unsubscribeNotifier=new d.a}ngOnInit(){this.listAllDashboardComponents()}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}listAllDashboardComponents(){this.isLoading=!0,this.dashboardService.listAllComponents().pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.components=e,e=>{this.errorHandlerService.handleError(e,"Erro ao carregar indicadores!"),this.components=[]}).add(()=>this.isLoading=!1)}chooseComponent(e){this.loadingService.show(),this.dashboardService.addComponentToPerson(e,this.loggedUserService.getPersonId()).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Indicador selecionado com sucesso!","success"),this.refreshComponents.emit()},e=>this.errorHandlerService.handleError(e,"Erro ao selecionar indicador!")).add(()=>this.loadingService.hide())}confirmRemoveComponent(e){this.messageService.swalMessage("Confirma a exclus\xe3o desse indicador da sua dashboard?","","question").then(t=>{t.value&&this.removeComponent(e)})}removeComponent(e){this.loadingService.show(),this.dashboardService.removeComponentOfPerson(e.pessoa_componente_id).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>{this.messageService.snackMessage("Indicador removido com sucesso!","success"),this.refreshComponents.emit()},e=>this.errorHandlerService.handleError(e,"Erro ao remover indicador!")).add(()=>this.loadingService.hide())}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(w.a),o.Nb(_.a),o.Nb(u.a),o.Nb(T.a),o.Nb(h))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-all-dashboard-components"]],inputs:{myComponents:"myComponents"},outputs:{refreshComponents:"refreshComponents",closeEvent:"closeEvent"},decls:7,vars:4,consts:[[1,"mb-1"],["message","Nenhum indicador encontrado.",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-2"],["backButtonLabel","FECHAR",3,"showSaveButton","backEvent"],["message","Nenhum indicador encontrado."],[1,"item"],[1,"wrapper-info"],[1,"name"],[1,"description"],["mat-button","","mat-flat-button","","class","btn btn-info",3,"click",4,"ngIf"],["mat-button","","mat-flat-button","","class","btn btn-danger",3,"click",4,"ngIf"],["mat-button","","mat-flat-button","",1,"btn","btn-info",3,"click"],["mat-button","","mat-flat-button","",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(o.Tb(0,"h1",0),o.Hc(1,"TODOS INDICADORES"),o.Sb(),o.Fc(2,Sn,1,0,"app-simple-message",1),o.Fc(3,On,1,0,"app-loading-spinner",2),o.Fc(4,Tn,11,6,"ng-container",3),o.Tb(5,"div",4),o.Tb(6,"app-footer-form-buttons",5),o.bc("backEvent",function(){return t.closeEvent.emit()}),o.Sb(),o.Sb()),2&e&&(o.Bb(2),o.lc("ngIf",!t.isLoading&&0==(null==t.components?null:t.components.length)),o.Bb(1),o.lc("ngIf",t.isLoading),o.Bb(1),o.lc("ngForOf",t.components),o.Bb(2),o.lc("showSaveButton",!1))},directives:[s.l,s.k,lt.a,he.a,Y.a,vn.b,vn.a,S.b,I.a],styles:[".item[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{padding:12px}.item[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}.item[_ngcontent-%COMP%]   .wrapper-info[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{margin-bottom:8px;background:#00bcd4;color:#fff}.item[_ngcontent-%COMP%]   .wrapper-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0}.item[_ngcontent-%COMP%]   .wrapper-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0;font-size:14px}.item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px;width:100%}.item[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-radius:6px}.item[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0}"]}),e})();function yn(e,t){if(1&e&&o.Ob(0,"app-switch-components",12),2&e){const e=o.fc(2);o.lc("myComponents",e.myComponents)}}function xn(e,t){1&e&&o.Ob(0,"app-simple-message",13)}function En(e,t){if(1&e){const e=o.Ub();o.Tb(0,"app-all-dashboard-components",14),o.bc("refreshComponents",function(){return o.xc(e),o.fc(2).listComponents()})("closeEvent",function(){return o.xc(e),o.fc(),o.uc(15).close()}),o.Sb()}if(2&e){const e=o.fc(2);o.lc("myComponents",e.myComponents)}}function Pn(e,t){if(1&e){const e=o.Ub();o.Tb(0,"mat-sidenav-container",2),o.Tb(1,"mat-sidenav-content"),o.Tb(2,"div",3),o.Tb(3,"button",4),o.bc("click",function(){return o.xc(e),o.fc().listComponents()}),o.Tb(4,"mat-icon"),o.Hc(5,"refresh"),o.Sb(),o.Sb(),o.Tb(6,"button",5),o.bc("click",function(){return o.xc(e),o.uc(15).toggle()}),o.Tb(7,"mat-icon"),o.Hc(8),o.Sb(),o.Tb(9,"mat-icon",6),o.Hc(10,"dashboard"),o.Sb(),o.Hc(11),o.Sb(),o.Sb(),o.Fc(12,yn,1,1,"app-switch-components",7),o.Fc(13,xn,1,0,"app-simple-message",8),o.Sb(),o.Tb(14,"mat-sidenav",9,10),o.Fc(16,En,1,1,"app-all-dashboard-components",11),o.Sb(),o.Sb()}if(2&e){const e=o.uc(15),t=o.fc();o.Bb(8),o.Ic(e.opened?"arrow_forward":"arrow_back"),o.Bb(3),o.Jc(" ",e.opened?"FECHAR INDICADORES":"VER INDICADORES"," "),o.Bb(1),o.lc("ngIf",(null==t.myComponents?null:t.myComponents.length)>0),o.Bb(1),o.lc("ngIf",0==(null==t.myComponents?null:t.myComponents.length)),o.Bb(3),o.lc("ngIf",e.opened)}}function An(e,t){1&e&&o.Ob(0,"app-loading-spinner")}const Mn=[{path:"",component:(()=>{class e{constructor(e,t,i){this.navbarService=e,this.dashboardService=t,this.loggedUserService=i,this.unsubscribeNotifier=new d.a}ngOnInit(){this.navbarService.setTitle("Dashboard"),this.listComponents(),this.dashboardService.onComponentRemoved.pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(()=>this.listComponents())}ngOnDestroy(){this.unsubscribeNotifier.next(),this.unsubscribeNotifier.complete()}listComponents(){this.isLoading=!0,this.dashboardService.listComponentsByPerson(this.loggedUserService.getPersonId()).pipe(Object(l.a)(this.unsubscribeNotifier)).subscribe(e=>this.myComponents=e,()=>this.myComponents=[]).add(()=>this.isLoading=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(p.a),o.Nb(h),o.Nb(u.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-dashboard"]],decls:3,vars:2,consts:[["class","sidenav-container",4,"ngIf"],[4,"ngIf"],[1,"sidenav-container"],[1,"d-flex","justify-content-end","mb-4","mt-4"],["mat-button","","mat-raised-button","","matTooltip","Atualizar todos indicadores",1,"mr-4",3,"click"],["mat-button","","mat-raised-button","","matTooltip","Visualizar todos indicadores",3,"click"],[1,"ml-4"],[3,"myComponents",4,"ngIf"],["message","Nenhum indicador adicionado na dashboard.",4,"ngIf"],["mode","over","position","end"],["sidenav",""],[3,"myComponents","refreshComponents","closeEvent",4,"ngIf"],[3,"myComponents"],["message","Nenhum indicador adicionado na dashboard."],[3,"myComponents","refreshComponents","closeEvent"]],template:function(e,t){1&e&&(o.Tb(0,"app-blank-layout"),o.Fc(1,Pn,17,5,"mat-sidenav-container",0),o.Fc(2,An,1,0,"app-loading-spinner",1),o.Sb()),2&e&&(o.Bb(1),o.lc("ngIf",!t.isLoading),o.Bb(1),o.lc("ngIf",t.isLoading))},directives:[g,s.l,v.b,v.c,S.b,O.a,I.a,v.a,gn,he.a,wn,Y.a],styles:["mat-sidenav-container[_ngcontent-%COMP%]{margin-top:12px;height:auto;min-height:calc(100vh - 88px);background:transparent}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:400px;padding:12px}"]}),e})()}];let Ln=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[c.d.forChild(Mn)],c.d]}),e})(),Nn=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[s.c,r.a,Ln,a,n.a]]}),e})()}}]);